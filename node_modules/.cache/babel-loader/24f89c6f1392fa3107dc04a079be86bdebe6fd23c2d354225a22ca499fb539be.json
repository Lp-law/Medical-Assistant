{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect,useCallback}from'react';import{saveBookChapter,saveGlobalPrecedent,getKnowledgeBase}from'../services/knowledgeBase';import{uploadChapterPdf,isApiConfigured,listCases as apiListCases,getCase as apiGetCase,renewCase as apiRenewCase,archiveCase as apiArchiveCase,deleteCase as apiDeleteCase,exportCaseFile as apiExportCaseFile,updateCaseMetadata as apiUpdateCaseMetadata,listNotifications as apiListNotifications,markNotificationRead as apiMarkNotificationRead}from'../services/api';import{listKnowledgeDocuments,getKnowledgeDocument}from'../services/knowledgeApi';import{Book,Gavel,LogOut,Save,Layout,UploadCloud,Loader2,Activity,AlertTriangle,Bell}from'lucide-react';import QualityBadge from'./QualityBadge';import KnowledgeClaimsPanel from'./KnowledgeClaimsPanel';import KnowledgeFlags from'./KnowledgeFlags';import MedicalTimeline from'./MedicalTimeline';import MedicalQualityBox from'./MedicalQualityBox';import LiteraturePanel from'./LiteraturePanel';import ContextRibbon from'./ContextRibbon';import LegalDisclaimer from'./LegalDisclaimer';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=_ref=>{var _medicalDetail$flags,_medicalDetail$claims,_medicalDetail$flags2,_medicalDetail$qualit,_medicalDetail$reason,_medicalDetail$litera,_selectedCase$isOwner;let{currentUserName,onEditCase:_onEditCase,onLogout}=_ref;const[activeTab,setActiveTab]=useState('knowledge');const[brain,setBrain]=useState(getKnowledgeBase());const[newChapter,setNewChapter]=useState({title:'',content:'',tags:[],rules:[]});const[newPrecedent,setNewPrecedent]=useState({caseName:'',keyTakeaway:'',tags:[]});const[importing,setImporting]=useState(false);const[importMessage,setImportMessage]=useState('');const[importInsights,setImportInsights]=useState([]);const[dragActive,setDragActive]=useState(false);const fileInputRef=useRef(null);const[medicalDocs,setMedicalDocs]=useState([]);const[selectedMedicalId,setSelectedMedicalId]=useState('');const[medicalDetail,setMedicalDetail]=useState(null);const[medicalInitialized,setMedicalInitialized]=useState(false);const[medicalListLoading,setMedicalListLoading]=useState(false);const[medicalDetailLoading,setMedicalDetailLoading]=useState(false);const[medicalError,setMedicalError]=useState(null);const[caseLists,setCaseLists]=useState({ownCases:[],otherCases:[]});const[caseListLoading,setCaseListLoading]=useState(false);const[caseListError,setCaseListError]=useState(null);const[selectedCase,setSelectedCase]=useState(null);const[subjectDraft,setSubjectDraft]=useState('');const[notifications,setNotifications]=useState([]);const[notificationsError,setNotificationsError]=useState(null);const[confirmAction,setConfirmAction]=useState(null);const[confirmLoading,setConfirmLoading]=useState(false);const handleSaveChapter=()=>{if(!newChapter.title||!newChapter.content){setImportMessage('חובה למלא כותרת ותוכן לפרק.');return;}const chapter={id:Date.now().toString(),title:newChapter.title,content:newChapter.content,tags:newChapter.tags||[],rules:newChapter.rules||[]};saveBookChapter(chapter);setBrain(getKnowledgeBase());setNewChapter({title:'',content:'',tags:[],rules:[]});setImportMessage('הפרק נשמר בהצלחה במאגר הפנימי.');};const handleSavePrecedent=()=>{if(!newPrecedent.caseName||!newPrecedent.keyTakeaway){setImportMessage('חובה למלא שם ותובנה לפני שמירת תקדים.');return;}const precedent={id:Date.now().toString(),caseName:newPrecedent.caseName,keyTakeaway:newPrecedent.keyTakeaway,citation:newPrecedent.citation||'',tags:newPrecedent.tags||[],relevantIssues:[]};saveGlobalPrecedent(precedent);setBrain(getKnowledgeBase());setNewPrecedent({caseName:'',keyTakeaway:'',tags:[]});setImportMessage('התקדים נשמר בהצלחה במאגר הפנימי.');};const importChapterFile=async file=>{setImporting(true);setImportMessage(\"\\u05DE\\u05E2\\u05DC\\u05D4 \\u05D0\\u05EA \\\"\".concat(file.name,\"\\\" \\u05DC\\u05E2\\u05D9\\u05D1\\u05D5\\u05D3...\"));setImportInsights([]);try{if(!isApiConfigured()){setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');return;}const backendResult=await uploadChapterPdf(file,{docType:'chapter'});const chapter={id:backendResult.id,title:backendResult.title,content:backendResult.content||backendResult.summary,tags:backendResult.tags||[],rules:backendResult.rules||[]};saveBookChapter(chapter);setBrain(getKnowledgeBase());setNewChapter(chapter);setImportInsights(backendResult.insights||[]);setImportMessage(\"\\u05D4\\u05E4\\u05E8\\u05E7 \\\"\".concat(chapter.title,\"\\\" \\u05E2\\u05D5\\u05BC\\u05D1\\u05D3 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4 \\u05D3\\u05E8\\u05DA \\u05D4\\u05E9\\u05E8\\u05EA \\u05D5\\u05E0\\u05E9\\u05DE\\u05E8 \\u05D1\\u05DE\\u05D0\\u05D2\\u05E8.\"));}catch(error){console.error(error);setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');}finally{setImporting(false);if(fileInputRef.current)fileInputRef.current.value='';}};const handlePdfSelection=files=>{if(!files||!files.length)return;const file=files[0];if(file.type!=='application/pdf'){setImportMessage('נא לבחור קובץ PDF בלבד.');return;}importChapterFile(file);};const handleDrop=event=>{event.preventDefault();setDragActive(false);handlePdfSelection(event.dataTransfer.files);};const handleDrag=event=>{event.preventDefault();if(event.type==='dragover'){setDragActive(true);}else if(event.type==='dragleave'){setDragActive(false);}};const triggerFilePicker=()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const refreshCaseLists=useCallback(async()=>{setCaseListLoading(true);setCaseListError(null);try{const payload=await apiListCases();setCaseLists(payload);if(selectedCase&&!payload.ownCases.find(entry=>entry.id===selectedCase.id)){setSelectedCase(null);}if(!selectedCase&&payload.ownCases.length>0){var _payload$ownCases$0$t;setSelectedCase(payload.ownCases[0]);setSubjectDraft((_payload$ownCases$0$t=payload.ownCases[0].topicSummary)!==null&&_payload$ownCases$0$t!==void 0?_payload$ownCases$0$t:'');}}catch(error){console.error(error);setCaseListError('טעינת התיקים נכשלה.');}finally{setCaseListLoading(false);}},[selectedCase]);const refreshNotifications=useCallback(async()=>{try{const items=await apiListNotifications();setNotifications(items);setNotificationsError(null);}catch(error){console.error(error);setNotificationsError('טעינת ההתראות נכשלה.');}},[]);const handleSelectCaseDetail=useCallback(async caseId=>{setCaseListLoading(true);setCaseListError(null);try{var _detail$topicSummary;const detail=await apiGetCase(caseId);setSelectedCase(detail);setSubjectDraft((_detail$topicSummary=detail.topicSummary)!==null&&_detail$topicSummary!==void 0?_detail$topicSummary:'');}catch(error){console.error(error);setCaseListError('טעינת פרטי התיק נכשלה.');}finally{setCaseListLoading(false);}},[]);const performExportCase=async(caseId,format)=>{try{const blob=await apiExportCaseFile(caseId,format);const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"case-\".concat(caseId,\".\").concat(format==='pdf'?'pdf':'json');document.body.appendChild(link);link.click();link.remove();URL.revokeObjectURL(url);}catch(error){console.error(error);setCaseListError('ייצוא התיק נכשל.');}};const performRenewCase=async caseId=>{try{await apiRenewCase(caseId);await refreshCaseLists();if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseId){var _detail$topicSummary2;const detail=await apiGetCase(caseId);setSelectedCase(detail);setSubjectDraft((_detail$topicSummary2=detail.topicSummary)!==null&&_detail$topicSummary2!==void 0?_detail$topicSummary2:'');}}catch(error){console.error(error);setCaseListError('חידוש התיק נכשל.');}};const performArchiveCase=async caseRecord=>{try{if(caseRecord.status==='ARCHIVED'){await apiRenewCase(caseRecord.id);}else{await apiArchiveCase(caseRecord.id);}await refreshCaseLists();if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseRecord.id){const detail=await apiGetCase(caseRecord.id);setSelectedCase(detail);}}catch(error){console.error(error);setCaseListError('עדכון מצב הארכיון נכשל.');}};const performDeleteCase=async caseId=>{try{await apiDeleteCase(caseId);if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseId){setSelectedCase(null);}await refreshCaseLists();}catch(error){console.error(error);setCaseListError('מחיקת התיק נכשלה.');}};const handleSaveMetadata=async()=>{if(!selectedCase)return;try{const updated=await apiUpdateCaseMetadata(selectedCase.id,{topicSummary:subjectDraft.trim()||undefined});setSelectedCase(updated);await refreshCaseLists();}catch(error){console.error(error);setCaseListError('עדכון הנושא נכשל.');}};const closeConfirmDialog=()=>{if(confirmLoading)return;setConfirmAction(null);};const handleConfirmDangerAction=async()=>{if(!confirmAction)return;setConfirmLoading(true);try{switch(confirmAction.kind){case'export':await performExportCase(confirmAction.caseId,confirmAction.format);break;case'renew':await performRenewCase(confirmAction.caseId);break;case'archive':await performArchiveCase(confirmAction.caseRecord);break;case'delete':await performDeleteCase(confirmAction.caseId);break;default:break;}setConfirmAction(null);}finally{setConfirmLoading(false);}};const handleMarkNotification=async notificationId=>{try{await apiMarkNotificationRead(notificationId);await refreshNotifications();}catch(error){console.error(error);setNotificationsError('סימון ההתראה נכשל.');}};useEffect(()=>{if(activeTab!=='medical'||medicalInitialized)return;let cancelled=false;const loadDocuments=async()=>{setMedicalListLoading(true);setMedicalError(null);try{const docs=await listKnowledgeDocuments({docType:'chapter',limit:25});if(!cancelled){var _docs$0$id,_docs$;setMedicalDocs(docs);setSelectedMedicalId((_docs$0$id=(_docs$=docs[0])===null||_docs$===void 0?void 0:_docs$.id)!==null&&_docs$0$id!==void 0?_docs$0$id:'');setMedicalInitialized(true);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');}}finally{if(!cancelled){setMedicalListLoading(false);}}};loadDocuments();return()=>{cancelled=true;};},[activeTab,medicalInitialized]);useEffect(()=>{if(activeTab!=='cases')return;refreshCaseLists();refreshNotifications();},[activeTab,refreshCaseLists,refreshNotifications]);useEffect(()=>{if(activeTab!=='medical')return;if(!selectedMedicalId){setMedicalDetail(null);return;}let cancelled=false;setMedicalDetailLoading(true);setMedicalError(null);const loadDetail=async()=>{try{const doc=await getKnowledgeDocument(selectedMedicalId);if(!cancelled){setMedicalDetail(doc);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת ניתוח רפואי נכשלה.');setMedicalDetail(null);}}finally{if(!cancelled){setMedicalDetailLoading(false);}}};loadDetail();return()=>{cancelled=true;};},[activeTab,selectedMedicalId]);const refreshMedicalDetail=useCallback(async()=>{if(!selectedMedicalId)return;try{const doc=await getKnowledgeDocument(selectedMedicalId);setMedicalDetail(doc);}catch(error){console.error(error);setMedicalError('טעינת הניתוח הרפואי נכשלה.');}},[selectedMedicalId]);const requiresHumanExpert=medicalDetail===null||medicalDetail===void 0?void 0:(_medicalDetail$flags=medicalDetail.flags)===null||_medicalDetail$flags===void 0?void 0:_medicalDetail$flags.some(flag=>flag.code==='HUMAN_EXPERT_REQUIRED');const hasAssertionConflict=Boolean(medicalDetail===null||medicalDetail===void 0?void 0:(_medicalDetail$claims=medicalDetail.claims)===null||_medicalDetail$claims===void 0?void 0:_medicalDetail$claims.some(claim=>claim.assertionType==='FACT'))&&Boolean(medicalDetail===null||medicalDetail===void 0?void 0:(_medicalDetail$flags2=medicalDetail.flags)===null||_medicalDetail$flags2===void 0?void 0:_medicalDetail$flags2.some(flag=>flag.severity==='critical'));const knowledgeView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-card p-6 text-center transition \".concat(dragActive?'border-gold bg-gold/5':'border-pearl bg-pearl/40'),onDragOver:handleDrag,onDragLeave:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,className:\"hidden\",accept:\"application/pdf\",onChange:event=>handlePdfSelection(event.target.files)}),/*#__PURE__*/_jsx(UploadCloud,{className:\"w-10 h-10 text-slate-light mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-navy\",children:\"\\u05D2\\u05E8\\u05E8\\u05D5 \\u05E7\\u05D5\\u05D1\\u05E5 PDF \\u05E9\\u05DC \\u05E4\\u05E8\\u05E7 \\\"\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\\u05D9 \\u05E0\\u05D6\\u05E7\\\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate mt-2\",children:\"\\u05D4\\u05E7\\u05D1\\u05E6\\u05D9\\u05DD \\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D9\\u05DD \\u05D5\\u05DE\\u05E0\\u05D5\\u05E1\\u05D7\\u05D9\\u05DD \\u05D1\\u05E9\\u05E8\\u05EA \\u05D4\\u05DE\\u05D0\\u05D5\\u05D1\\u05D8\\u05D7 \\u2013 \\u05DB\\u05D5\\u05DC\\u05DC \\u05E8\\u05D9\\u05E9\\u05D5\\u05DD Audit \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:triggerFilePicker,className:\"btn-secondary px-6\",disabled:importing,children:\"\\u05D1\\u05D7\\u05E8 \\u05E7\\u05D5\\u05D1\\u05E5 PDF\"}),importing&&/*#__PURE__*/_jsxs(\"div\",{className:\"loader-inline\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"loader-inline__icon\",\"aria-hidden\":\"true\"}),\"\\u05DE\\u05E2\\u05D1\\u05D3 \\u05E7\\u05D5\\u05D1\\u05E5...\"]})]}),importMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate mt-3\",children:importMessage}),importInsights.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold text-slate-light mb-2\",children:\"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D5\\u05EA \\u05E9\\u05D4\\u05D5\\u05E4\\u05E7\\u05D5:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1 text-sm text-slate\",children:importInsights.map(insight=>/*#__PURE__*/_jsxs(\"li\",{className:\"rounded-card border border-pearl bg-white px-3 py-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[insight.title,\": \"]}),insight.content]},insight.title))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"card-shell\",onSubmit:e=>{e.preventDefault();handleSaveChapter();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-5 h-5 text-gold\"}),\" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05E4\\u05E8\\u05E7 \\u05D7\\u05D3\\u05E9\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\",placeholder:\"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA \\u05D4\\u05E4\\u05E8\\u05E7\",value:newChapter.title||'',onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full rounded-card border border-pearl bg-white p-3 text-sm h-24 focus:border-gold\",placeholder:\"\\u05EA\\u05D5\\u05DB\\u05DF / \\u05EA\\u05E7\\u05E6\\u05D9\\u05E8\",value:newChapter.content||'',onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{content:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\",placeholder:\"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",value:(newChapter.tags||[]).join(', '),onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full rounded-card border border-pearl bg-white p-3 text-sm h-20 focus:border-gold\",placeholder:\"\\u05DB\\u05DC\\u05DC\\u05D9\\u05DD (\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4 \\u05DB\\u05DC\\u05DC \\u05D7\\u05D3\\u05E9)\",value:(newChapter.rules||[]).join('\\n'),onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{rules:e.target.value.split('\\n').map(rule=>rule.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn-secondary w-full justify-center\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05E4\\u05E8\\u05E7\"]})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"card-shell\",onSubmit:e=>{e.preventDefault();handleSavePrecedent();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"w-5 h-5 text-gold\"}),\" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD \\u05D7\\u05D3\\u05E9\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\",placeholder:\"\\u05E9\\u05DD \\u05D4\\u05D4\\u05DC\\u05D9\\u05DA / \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\",value:newPrecedent.caseName||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{caseName:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full rounded-card border border-pearl bg-white p-3 text-sm h-24 focus:border-gold\",placeholder:\"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D4 \\u05DE\\u05E8\\u05DB\\u05D6\\u05D9\\u05EA\",value:newPrecedent.keyTakeaway||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{keyTakeaway:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\",placeholder:\"\\u05E6\\u05D9\\u05D5\\u05DF / \\u05DE\\u05E7\\u05D5\\u05E8\",value:newPrecedent.citation||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{citation:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\",placeholder:\"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",value:(newPrecedent.tags||[]).join(', '),onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn-secondary w-full justify-center\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-4 h-4 text-gold\"}),\" \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E7\\u05D9\\u05D9\\u05DE\\u05D9\\u05DD (\",brain.book.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body space-y-3\",children:brain.book.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"state-block text-sm\",children:[/*#__PURE__*/_jsx(Book,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D0\\u05D9\\u05DF \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:\"\\u05DB\\u05E9\\u05D9\\u05D5\\u05D6\\u05E0\\u05D5 \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05D7\\u05D3\\u05E9\\u05D9\\u05DD \\u05D4\\u05DD \\u05D9\\u05EA\\u05D5\\u05D5\\u05E1\\u05E4\\u05D5 \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9\\u05EA \\u05DC\\u05E8\\u05E9\\u05D9\\u05DE\\u05D4.\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-3\",children:brain.book.slice(0,4).map(chapter=>/*#__PURE__*/_jsxs(\"li\",{className:\"mini-card space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-navy\",children:chapter.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light overflow-hidden text-ellipsis whitespace-nowrap\",children:chapter.content})]},chapter.id))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"w-4 h-4 text-gold\"}),\" \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD (\",brain.precedents.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body space-y-3\",children:brain.precedents.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"state-block text-sm\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:\"\\u05D4\\u05D5\\u05E1\\u05E3 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD \\u05D7\\u05D3\\u05E9 \\u05DB\\u05D3\\u05D9 \\u05DC\\u05D4\\u05EA\\u05D7\\u05D9\\u05DC \\u05DC\\u05D1\\u05E0\\u05D5\\u05EA \\u05E1\\u05E4\\u05E8\\u05D9\\u05D9\\u05D4 \\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\\u05EA \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9\\u05EA.\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-3\",children:brain.precedents.slice(0,4).map(precedent=>/*#__PURE__*/_jsxs(\"li\",{className:\"mini-card space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-navy\",children:precedent.caseName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light overflow-hidden text-ellipsis whitespace-nowrap\",children:precedent.keyTakeaway})]},precedent.id))})})]})]})]});const caseStatusLabel={ACTIVE:'פעיל',ARCHIVED:'בארכיון',PENDING_DELETE:'ממתין למחיקה'};const caseStatusStyle={ACTIVE:'bg-gold/20 text-navy',ARCHIVED:'bg-slate-light/30 text-navy',PENDING_DELETE:'bg-danger/10 text-danger'};const renderStatusBadge=status=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center rounded px-2 py-0.5 text-xs font-semibold \".concat(caseStatusStyle[status]),children:caseStatusLabel[status]});const renderDaysIndicator=days=>{if(days===undefined)return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-500\",children:\"\\u05DC\\u05DC\\u05D0 \\u05DE\\u05D9\\u05D3\\u05E2\"});if(days===0){return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-danger font-semibold\",children:\"\\u05E4\\u05D7\\u05D5\\u05EA \\u05DE-24 \\u05E9\\u05E2\\u05D5\\u05EA \\u05DC\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4\"});}const tone=days<=3?'text-danger font-semibold':days<=15?'text-gold font-semibold':'text-slate-light';return/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs \".concat(tone),dir:\"ltr\",children:[\"\\u05E0\\u05D5\\u05EA\\u05E8\\u05D5 \",days,\" \\u05D9\\u05DE\\u05D9\\u05DD\"]});};const CaseCard=_ref2=>{let{item,variant}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell transition hover:shadow-2xl \".concat(variant==='owner'?'cursor-pointer':''),onClick:variant==='owner'?()=>handleSelectCaseDetail(item.id):undefined,children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-base font-semibold\",children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-light truncate\",children:item.topicSummary})]}),/*#__PURE__*/_jsx(\"span\",{className:variant==='owner'?'badge-owner':'badge-readonly',children:variant==='owner'?'שלי':'קריאה בלבד'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body space-y-2 text-sm text-slate\",children:variant==='owner'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-2\",children:[renderStatusBadge(item.status),renderDaysIndicator(item.daysRemaining)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E0\\u05D5\\u05E6\\u05E8: \",new Date(item.createdAt).toLocaleDateString('he-IL')]}),item.lastAccessedAt&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF: \",new Date(item.lastAccessedAt).toLocaleDateString('he-IL')]})]})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-slate-light\",children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF: \",new Date(item.createdAt).toLocaleDateString('he-IL')]})})]});};const casesView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Layout,{className:\"w-5 h-5 text-gold\"}),\" \\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-light\",children:\"\\u05EA\\u05E6\\u05D5\\u05D2\\u05D4 \\u05DE\\u05E9\\u05E8\\u05D3\\u05D9\\u05EA \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9\\u05EA \\u2013 \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D0\\u05D9\\u05E9\\u05D9\\u05D9\\u05DD \\u05DC\\u05E6\\u05D3 \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05DC\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3 \\u05D5\\u05D4\\u05E9\\u05D5\\u05D5\\u05D0\\u05D4.\"})]}),/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-gold-light\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-sm text-slate\",children:\"\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4 \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9\\u05EA \\u05DE\\u05EA\\u05D1\\u05E6\\u05E2\\u05EA \\u05DC\\u05D0\\u05D7\\u05E8 90 \\u05D9\\u05D5\\u05DD. \\u05DE\\u05D5\\u05DE\\u05DC\\u05E5 \\u05DC\\u05EA\\u05D9\\u05D9\\u05E7 \\u05D0\\u05D5 \\u05DC\\u05D9\\u05D9\\u05E6\\u05D0 \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD \\u05D8\\u05E8\\u05DD \\u05D4\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4.\"})]}),caseListError&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block state-block--error text-sm\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D8\\u05E2\\u05D9\\u05E0\\u05EA \\u05D4\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05E0\\u05DB\\u05E9\\u05DC\\u05D4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:caseListError})]}),caseListLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loader-inline\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"loader-inline__icon\",\"aria-hidden\":\"true\"}),\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD...\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6 lg:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-slate\",children:[\"\\u05D4\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05E9\\u05DC\\u05D9 (\",caseLists.ownCases.length,\")\"]}),caseLists.ownCases.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"state-block text-sm\",children:[/*#__PURE__*/_jsx(Layout,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D1\\u05D1\\u05E2\\u05DC\\u05D5\\u05EA\\u05DA \\u05DB\\u05E8\\u05D2\\u05E2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:\"\\u05E6\\u05D5\\u05E8 \\u05EA\\u05D9\\u05E7 \\u05D7\\u05D3\\u05E9 \\u05D0\\u05D5 \\u05D9\\u05D1\\u05D5\\u05D0 \\u05EA\\u05D9\\u05E7 \\u05E7\\u05D9\\u05D9\\u05DD \\u05DB\\u05D3\\u05D9 \\u05DC\\u05D4\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4.\"})]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:caseLists.ownCases.map(item=>/*#__PURE__*/_jsx(CaseCard,{item:item,variant:\"owner\"},item.id))})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-slate\",children:[\"\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D9\\u05DD (\",caseLists.otherCases.length,\")\"]}),caseLists.otherCases.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"state-block text-sm\",children:[/*#__PURE__*/_jsx(Layout,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D7\\u05D9\\u05E6\\u05D5\\u05E0\\u05D9\\u05D9\\u05DD \\u05DC\\u05D4\\u05E9\\u05D5\\u05D5\\u05D0\\u05D4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:\"\\u05DB\\u05E9\\u05EA\\u05D5\\u05E7\\u05E6\\u05D4 \\u05D2\\u05D9\\u05E9\\u05D4 \\u05DC\\u05EA\\u05D9\\u05E7\\u05D9 \\u05DC\\u05D9\\u05DE\\u05D5\\u05D3, \\u05D4\\u05DD \\u05D9\\u05D5\\u05E4\\u05D9\\u05E2\\u05D5 \\u05D1\\u05D0\\u05D6\\u05D5\\u05E8 \\u05D6\\u05D4.\"})]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:caseLists.otherCases.map(item=>/*#__PURE__*/_jsx(CaseCard,{item:item,variant:\"readonly\"},item.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6 lg:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell lg:col-span-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-base font-semibold\",children:\"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05EA\\u05D9\\u05E7 \\u05E0\\u05D1\\u05D7\\u05E8\"}),selectedCase&&/*#__PURE__*/_jsx(\"span\",{className:\"badge-status\",children:selectedCase.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-sm text-slate space-y-3\",children:selectedCase?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-2\",children:[renderStatusBadge(selectedCase.status),renderDaysIndicator(selectedCase.daysRemaining)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light mb-1\",children:\"\\u05E0\\u05D5\\u05E9\\u05D0 \\u05D1\\u05D8\\u05D5\\u05D7\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full rounded-2xl border border-pearl bg-pearl/60 p-3 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\",rows:3,value:subjectDraft,onChange:e=>setSubjectDraft(e.target.value),placeholder:\"\\u05EA\\u05D9\\u05D0\\u05D5\\u05E8 \\u05DE\\u05D9\\u05DC\\u05D5\\u05DC\\u05D9 \\u05E7\\u05E6\\u05E8 \\u05E9\\u05DC \\u05D4\\u05EA\\u05D9\\u05E7...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveMetadata,className:\"btn-primary text-xs px-4 py-1.5\",children:\"\\u05E9\\u05DE\\u05D5\\u05E8 \\u05E0\\u05D5\\u05E9\\u05D0\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-light flex flex-wrap gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E0\\u05D5\\u05E6\\u05E8: \",new Date(selectedCase.createdAt).toLocaleString('he-IL')]}),selectedCase.lastAccessedAt&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05D2\\u05D9\\u05E9\\u05D4 \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D4: \",new Date(selectedCase.lastAccessedAt).toLocaleString('he-IL')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 flex flex-wrap gap-2 border-t border-pearl/60\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary text-xs px-4 py-1.5\",onClick:()=>setConfirmAction({kind:'export',format:'pdf',caseId:selectedCase.id,caseTitle:selectedCase.title}),children:\"\\u05D9\\u05D9\\u05E6\\u05D0 PDF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary text-xs px-4 py-1.5\",onClick:()=>setConfirmAction({kind:'export',format:'json',caseId:selectedCase.id,caseTitle:selectedCase.title}),children:\"\\u05D9\\u05D9\\u05E6\\u05D0 JSON\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline text-xs px-4 py-1.5\",onClick:()=>setConfirmAction({kind:'renew',caseId:selectedCase.id,caseTitle:selectedCase.title}),children:\"\\u05D7\\u05D3\\u05E9 \\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline text-xs px-4 py-1.5\",onClick:()=>setConfirmAction({kind:'archive',caseRecord:selectedCase}),children:selectedCase.status==='ARCHIVED'?'בטל ארכיון':'העבר לארכיון'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline text-xs px-4 py-1.5 border-danger text-danger hover:bg-danger/10\",onClick:()=>setConfirmAction({kind:'delete',caseId:selectedCase.id,caseTitle:selectedCase.title}),children:\"\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4\"})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate\",children:\"\\u05D1\\u05D7\\u05E8 \\u05EA\\u05D9\\u05E7 \\u05DE\\u05D4\\u05E8\\u05E9\\u05D9\\u05DE\\u05D4 \\u05DC\\u05D4\\u05E6\\u05D2\\u05EA \\u05E4\\u05E8\\u05D8\\u05D9\\u05DD.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-base font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Bell,{className:\"w-4 h-4 text-gold\"}),\"\\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA \\u05E9\\u05DE\\u05D9\\u05E8\\u05D4\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-2 text-sm text-slate\",children:[notificationsError&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block state-block--error text-xs\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title text-sm\",children:\"\\u05E9\\u05D2\\u05D9\\u05D0\\u05D4 \\u05D1\\u05D8\\u05E2\\u05D9\\u05E0\\u05EA \\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:notificationsError})]}),notifications.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate\",children:\"\\u05D0\\u05D9\\u05DF \\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA \\u05E4\\u05E2\\u05D9\\u05DC\\u05D5\\u05EA.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:notifications.map(notification=>/*#__PURE__*/_jsxs(\"li\",{className:\"rounded-2xl border border-pearl bg-pearl/40 p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate\",children:notification.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[11px] text-slate-light mt-1\",children:new Date(notification.createdAt).toLocaleString('he-IL')}),!notification.readAt&&/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 text-xs text-gold hover:text-gold-light\",onClick:()=>handleMarkNotification(notification.id),children:\"\\u05E1\\u05DE\\u05DF \\u05DB\\u05E0\\u05E7\\u05E8\\u05D0\"})]},notification.id))})]})]})]})]});const medicalView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4 md:flex-row md:items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-500\",children:\"\\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\",value:selectedMedicalId,onChange:e=>setSelectedMedicalId(e.target.value),disabled:!medicalDocs.length||medicalListLoading,children:[medicalDocs.map(doc=>/*#__PURE__*/_jsx(\"option\",{value:doc.id,children:doc.title},doc.id)),!medicalDocs.length&&/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/3\",children:/*#__PURE__*/_jsx(QualityBadge,{score:medicalDetail===null||medicalDetail===void 0?void 0:medicalDetail.score})})]}),(requiresHumanExpert||hasAssertionConflict)&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block state-block--error text-sm\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:requiresHumanExpert?'נדרש מומחה אנושי':'זוהתה סתירה בין הטענות לדגלים'}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:requiresHumanExpert?'קיים דגל HUMAN_EXPERT_REQUIRED. יש לערב מומחה רפואי לפני פעולה נוספת.':'זוהו טענות מסווגות כעובדה לצד דגלים קריטיים. מומלץ לעבור שוב על הממצאים לפני הסתמכות.'})]}),medicalError&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block state-block--error text-sm\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D8\\u05E2\\u05D9\\u05E0\\u05EA \\u05D4\\u05DE\\u05E1\\u05DE\\u05DA \\u05D4\\u05E8\\u05E4\\u05D5\\u05D0\\u05D9 \\u05E0\\u05DB\\u05E9\\u05DC\\u05D4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:medicalError})]}),(medicalListLoading||medicalDetailLoading)&&/*#__PURE__*/_jsxs(\"div\",{className:\"loader-inline\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"loader-inline__icon\",\"aria-hidden\":\"true\"}),\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9...\"]}),!medicalListLoading&&!medicalDetail&&!medicalError&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block text-sm\",children:[/*#__PURE__*/_jsx(Book,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D0\\u05D9\\u05DF \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD \\u05DC\\u05D4\\u05E6\\u05D2\\u05D4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:\"\\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9 \\u05DE\\u05D4\\u05E8\\u05E9\\u05D9\\u05DE\\u05D4 \\u05D0\\u05D5 \\u05D4\\u05E2\\u05DC\\u05D4 \\u05DE\\u05E1\\u05DE\\u05DA \\u05D7\\u05D3\\u05E9 \\u05DB\\u05D3\\u05D9 \\u05DC\\u05D4\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E0\\u05D9\\u05EA\\u05D5\\u05D7.\"})]}),medicalDetail&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MedicalQualityBox,{score:medicalDetail.medicalQualityScore,findings:(_medicalDetail$qualit=medicalDetail.qualityFindings)!==null&&_medicalDetail$qualit!==void 0?_medicalDetail$qualit:[],reasoningFindings:(_medicalDetail$reason=medicalDetail.reasoningFindings)!==null&&_medicalDetail$reason!==void 0?_medicalDetail$reason:[]}),/*#__PURE__*/_jsx(KnowledgeFlags,{flags:medicalDetail.flags||[]}),/*#__PURE__*/_jsx(KnowledgeClaimsPanel,{claims:medicalDetail.claims||[],limit:5}),/*#__PURE__*/_jsx(MedicalTimeline,{events:medicalDetail.timeline||[]}),/*#__PURE__*/_jsx(LiteraturePanel,{knowledgeId:medicalDetail.id,resources:(_medicalDetail$litera=medicalDetail.literatureResources)!==null&&_medicalDetail$litera!==void 0?_medicalDetail$litera:[],onRefresh:refreshMedicalDetail})]}),/*#__PURE__*/_jsx(LegalDisclaimer,{})]});const contextModeLabel=activeTab==='cases'?'ניהול תיקים משרדיים':activeTab==='knowledge'?'מרכז הידע הפנימי':'בקרה רפואית ותחקור';const ribbonStatus=activeTab==='cases'?selectedCase===null||selectedCase===void 0?void 0:selectedCase.status:undefined;const ribbonCaseName=activeTab==='cases'?selectedCase===null||selectedCase===void 0?void 0:selectedCase.title:undefined;const ribbonReadOnly=activeTab==='cases'?!((_selectedCase$isOwner=selectedCase===null||selectedCase===void 0?void 0:selectedCase.isOwner)!==null&&_selectedCase$isOwner!==void 0?_selectedCase$isOwner:true):false;const confirmTitle=(()=>{if(!confirmAction)return'';switch(confirmAction.kind){case'export':return'אישור ייצוא תיק';case'renew':return'אישור חידוש תיק';case'archive':return confirmAction.caseRecord.status==='ARCHIVED'?'אישור ביטול ארכיון':'אישור העברה לארכיון';case'delete':return'אישור מחיקה סופית';default:return'אישור פעולה';}})();const confirmDescription=(()=>{if(!confirmAction)return'';const base=confirmAction.kind==='archive'?confirmAction.caseRecord.title:confirmAction.caseTitle;switch(confirmAction.kind){case'export':return\"\\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05D6\\u05D5 \\u05EA\\u05D9\\u05D9\\u05E6\\u05D0 \\u05D0\\u05EA \\u05D4\\u05EA\\u05D9\\u05E7 \".concat(base!==null&&base!==void 0?base:'',\" \\u05D1\\u05E4\\u05D5\\u05E8\\u05DE\\u05D8 \").concat(confirmAction.format.toUpperCase(),\" \\u05D5\\u05EA\\u05D1\\u05D5\\u05E6\\u05E2 \\u05E2\\u05DC \\u05D9\\u05D3\\u05D9 \").concat(currentUserName,\".\");case'renew':return\"\\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05D6\\u05D5 \\u05EA\\u05D0\\u05E4\\u05E1 \\u05D0\\u05EA \\u05DE\\u05D5\\u05E2\\u05D3 \\u05D4\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4 \\u05DC\\u05EA\\u05D9\\u05E7 \".concat(base!==null&&base!==void 0?base:'',\". \").concat(currentUserName,\" \\u05DE\\u05D0\\u05E9\\u05E8 \\u05D0\\u05EA \\u05D1\\u05D9\\u05E6\\u05D5\\u05E2\\u05D4.\");case'archive':return confirmAction.caseRecord.status==='ARCHIVED'?\"\\u05D4\\u05EA\\u05D9\\u05E7 \".concat(confirmAction.caseRecord.title,\" \\u05D9\\u05D7\\u05D6\\u05D5\\u05E8 \\u05DE\\u05DE\\u05E6\\u05D1 \\u05D0\\u05E8\\u05DB\\u05D9\\u05D5\\u05DF. \\u05D4\\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05DE\\u05D0\\u05D5\\u05E9\\u05E8\\u05EA \\u05E2\\u05DC \\u05D9\\u05D3\\u05D9 \").concat(currentUserName,\".\"):\"\\u05D4\\u05EA\\u05D9\\u05E7 \".concat(confirmAction.caseRecord.title,\" \\u05D9\\u05E2\\u05D1\\u05D5\\u05E8 \\u05DC\\u05D0\\u05E8\\u05DB\\u05D9\\u05D5\\u05DF \\u05D5\\u05D9\\u05D4\\u05D9\\u05D4 \\u05DC\\u05E7\\u05E8\\u05D9\\u05D0\\u05D4 \\u05D1\\u05DC\\u05D1\\u05D3. \\u05D4\\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05DE\\u05D0\\u05D5\\u05E9\\u05E8\\u05EA \\u05E2\\u05DC \\u05D9\\u05D3\\u05D9 \").concat(currentUserName,\".\");case'delete':return\"\\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05D6\\u05D5 \\u05EA\\u05DE\\u05D7\\u05E7 \\u05D0\\u05EA \\u05D4\\u05EA\\u05D9\\u05E7 \".concat(base!==null&&base!==void 0?base:'',\" \\u05DC\\u05E6\\u05DE\\u05D9\\u05EA\\u05D5\\u05EA \\u05D5\\u05D0\\u05D9\\u05E0\\u05D4 \\u05E0\\u05D9\\u05EA\\u05E0\\u05EA \\u05DC\\u05E9\\u05D7\\u05D6\\u05D5\\u05E8. \").concat(currentUserName,\" \\u05DE\\u05D0\\u05E9\\u05E8 \\u05E9\\u05D4\\u05D1\\u05D9\\u05DF \\u05D0\\u05EA \\u05D4\\u05DE\\u05E9\\u05DE\\u05E2\\u05D5\\u05EA.\");default:return'';}})();return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-pearl text-navy\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-semibold brand-mark\",children:\"LexMedical Admin\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gold-light hidden md:inline\",children:\"\\u05E9\\u05DC\\u05D9\\u05D8\\u05D4 \\u05DE\\u05E9\\u05E8\\u05D3\\u05D9\\u05EA \\u05D1\\u05D7\\u05D5\\u05DE\\u05E8 \\u05D4\\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05BE\\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-pearl\",children:[\"\\u05DE\\u05D7\\u05D5\\u05D1\\u05E8: \",currentUserName]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onLogout,className:\"flex items-center gap-2 rounded-full border border-gold px-3 py-1 text-gold hover:bg-gold/10 transition\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\" \\u05D9\\u05E6\\u05D9\\u05D0\\u05D4\"]})]})]}),/*#__PURE__*/_jsx(ContextRibbon,{mode:contextModeLabel,caseName:ribbonCaseName,status:ribbonStatus,isReadOnly:ribbonReadOnly,onBack:()=>window.history.back()}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-6xl mx-auto px-6 py-8 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-card border border-pearl bg-white p-6 shadow-card-xl flex flex-wrap items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate\",children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF \\u05DC\\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D4: \",new Date(brain.lastUpdated).toLocaleString('he-IL')]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light\",children:\"\\u05DE\\u05DE\\u05E9\\u05E7 \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9 \\u05DC\\u05E9\\u05D9\\u05DE\\u05D5\\u05E9 \\u05E2\\u05D5\\u05E8\\u05DB\\u05D9 \\u05D3\\u05D9\\u05DF \\u05D1\\u05DC\\u05D1\\u05D3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('knowledge'),className:\"rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 \".concat(activeTab==='knowledge'?'bg-navy text-gold':'bg-pearl border border-pearl text-slate'),children:[/*#__PURE__*/_jsx(Book,{className:\"w-4 h-4\"}),\" \\u05D9\\u05D3\\u05E2\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('cases'),className:\"rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 \".concat(activeTab==='cases'?'bg-navy text-gold':'bg-pearl border border-pearl text-slate'),children:[/*#__PURE__*/_jsx(Layout,{className:\"w-4 h-4\"}),\" \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('medical'),className:\"rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 \".concat(activeTab==='medical'?'bg-navy text-gold':'bg-pearl border border-pearl text-slate'),children:[/*#__PURE__*/_jsx(Activity,{className:\"w-4 h-4\"}),\" Medical Analysis\"]})]})]}),activeTab==='knowledge'&&knowledgeView,activeTab==='cases'&&casesView,activeTab==='medical'&&medicalView]}),confirmAction&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-base font-semibold\",children:confirmTitle}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeConfirmDialog,className:\"text-xs text-slate-light hover:text-navy\",\"aria-label\":\"\\u05D1\\u05D8\\u05DC \\u05E4\\u05E2\\u05D5\\u05DC\\u05D4\",children:\"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-3 text-sm text-slate\",children:[/*#__PURE__*/_jsx(\"p\",{children:confirmDescription}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light\",children:\"\\u05D4\\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05EA\\u05E8\\u05E9\\u05DD \\u05D1\\u05DC\\u05D5\\u05D2 \\u05D4\\u05D0\\u05D5\\u05D3\\u05D9\\u05D8 \\u05D4\\u05DE\\u05E9\\u05E8\\u05D3\\u05D9.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3 pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-outline text-xs px-4 py-1.5\",onClick:closeConfirmDialog,disabled:confirmLoading,children:\"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary text-xs px-4 py-1.5\",onClick:handleConfirmDangerAction,disabled:confirmLoading,children:confirmLoading?'מבצע...':'אישור פעולה'})]})]})]})})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","saveBookChapter","saveGlobalPrecedent","getKnowledgeBase","uploadChapterPdf","isApiConfigured","listCases","apiListCases","getCase","apiGetCase","renewCase","apiRenewCase","archiveCase","apiArchiveCase","deleteCase","apiDeleteCase","exportCaseFile","apiExportCaseFile","updateCaseMetadata","apiUpdateCaseMetadata","listNotifications","apiListNotifications","markNotificationRead","apiMarkNotificationRead","listKnowledgeDocuments","getKnowledgeDocument","Book","Gavel","LogOut","Save","Layout","UploadCloud","Loader2","Activity","AlertTriangle","Bell","QualityBadge","KnowledgeClaimsPanel","KnowledgeFlags","MedicalTimeline","MedicalQualityBox","LiteraturePanel","ContextRibbon","LegalDisclaimer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","_ref","_medicalDetail$flags","_medicalDetail$claims","_medicalDetail$flags2","_medicalDetail$qualit","_medicalDetail$reason","_medicalDetail$litera","_selectedCase$isOwner","currentUserName","onEditCase","_onEditCase","onLogout","activeTab","setActiveTab","brain","setBrain","newChapter","setNewChapter","title","content","tags","rules","newPrecedent","setNewPrecedent","caseName","keyTakeaway","importing","setImporting","importMessage","setImportMessage","importInsights","setImportInsights","dragActive","setDragActive","fileInputRef","medicalDocs","setMedicalDocs","selectedMedicalId","setSelectedMedicalId","medicalDetail","setMedicalDetail","medicalInitialized","setMedicalInitialized","medicalListLoading","setMedicalListLoading","medicalDetailLoading","setMedicalDetailLoading","medicalError","setMedicalError","caseLists","setCaseLists","ownCases","otherCases","caseListLoading","setCaseListLoading","caseListError","setCaseListError","selectedCase","setSelectedCase","subjectDraft","setSubjectDraft","notifications","setNotifications","notificationsError","setNotificationsError","confirmAction","setConfirmAction","confirmLoading","setConfirmLoading","handleSaveChapter","chapter","id","Date","now","toString","handleSavePrecedent","precedent","citation","relevantIssues","importChapterFile","file","concat","name","backendResult","docType","summary","insights","error","console","current","value","handlePdfSelection","files","length","type","handleDrop","event","preventDefault","dataTransfer","handleDrag","triggerFilePicker","_fileInputRef$current","click","refreshCaseLists","payload","find","entry","_payload$ownCases$0$t","topicSummary","refreshNotifications","items","handleSelectCaseDetail","caseId","_detail$topicSummary","detail","performExportCase","format","blob","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","remove","revokeObjectURL","performRenewCase","_detail$topicSummary2","performArchiveCase","caseRecord","status","performDeleteCase","handleSaveMetadata","updated","trim","undefined","closeConfirmDialog","handleConfirmDangerAction","kind","handleMarkNotification","notificationId","cancelled","loadDocuments","docs","limit","_docs$0$id","_docs$","loadDetail","doc","refreshMedicalDetail","requiresHumanExpert","flags","some","flag","code","hasAssertionConflict","Boolean","claims","claim","assertionType","severity","knowledgeView","className","children","onDragOver","onDragLeave","onDrop","ref","accept","onChange","target","onClick","disabled","map","insight","onSubmit","e","placeholder","prev","_objectSpread","join","split","tag","filter","rule","book","slice","precedents","caseStatusLabel","ACTIVE","ARCHIVED","PENDING_DELETE","caseStatusStyle","renderStatusBadge","renderDaysIndicator","days","tone","dir","CaseCard","_ref2","item","variant","daysRemaining","createdAt","toLocaleDateString","lastAccessedAt","casesView","rows","toLocaleString","caseTitle","notification","message","readAt","medicalView","score","medicalQualityScore","findings","qualityFindings","reasoningFindings","events","timeline","knowledgeId","resources","literatureResources","onRefresh","contextModeLabel","ribbonStatus","ribbonCaseName","ribbonReadOnly","isOwner","confirmTitle","confirmDescription","base","toUpperCase","mode","isReadOnly","onBack","window","history","back","lastUpdated","role"],"sources":["C:/Office-Apps/LexMedical-App/src/components/AdminDashboard.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport {\r\n  BookChapter,\r\n  GlobalPrecedent,\r\n  CaseData,\r\n  CaseRecord,\r\n  CaseSummaryRecord,\r\n  NotificationRecord,\r\n  AIInsight,\r\n  KnowledgeDocumentSummary,\r\n  KnowledgeDocumentDetail,\r\n} from '../types';\r\nimport { saveBookChapter, saveGlobalPrecedent, getKnowledgeBase } from '../services/knowledgeBase';\r\nimport {\r\n  uploadChapterPdf,\r\n  isApiConfigured,\r\n  listCases as apiListCases,\r\n  getCase as apiGetCase,\r\n  renewCase as apiRenewCase,\r\n  archiveCase as apiArchiveCase,\r\n  deleteCase as apiDeleteCase,\r\n  exportCaseFile as apiExportCaseFile,\r\n  updateCaseMetadata as apiUpdateCaseMetadata,\r\n  listNotifications as apiListNotifications,\r\n  markNotificationRead as apiMarkNotificationRead,\r\n} from '../services/api';\r\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\r\nimport {\r\n  Book,\r\n  Gavel,\r\n  LogOut,\r\n  Save,\r\n  Layout,\r\n  UploadCloud,\r\n  Loader2,\r\n  Activity,\r\n  AlertTriangle,\r\n  Bell,\r\n} from 'lucide-react';\r\nimport QualityBadge from './QualityBadge';\r\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\r\nimport KnowledgeFlags from './KnowledgeFlags';\r\nimport MedicalTimeline from './MedicalTimeline';\r\nimport MedicalQualityBox from './MedicalQualityBox';\r\nimport LiteraturePanel from './LiteraturePanel';\r\nimport ContextRibbon from './ContextRibbon';\r\nimport LegalDisclaimer from './LegalDisclaimer';\r\n\r\ninterface Props {\r\n  currentUserName: string;\r\n  onEditCase: (caseData: CaseData) => void;\r\n  onLogout: () => void;\r\n}\r\n\r\ntype ConfirmAction =\r\n  | { kind: 'export'; format: 'pdf' | 'json'; caseId: string; caseTitle?: string }\r\n  | { kind: 'renew'; caseId: string; caseTitle?: string }\r\n  | { kind: 'archive'; caseRecord: CaseRecord }\r\n  | { kind: 'delete'; caseId: string; caseTitle?: string };\r\n\r\nconst AdminDashboard: React.FC<Props> = ({ currentUserName, onEditCase: _onEditCase, onLogout }) => {\r\n  const [activeTab, setActiveTab] = useState<'cases' | 'knowledge' | 'medical'>('knowledge');\r\n  const [brain, setBrain] = useState(getKnowledgeBase());\r\n  const [newChapter, setNewChapter] = useState<Partial<BookChapter>>({ title: '', content: '', tags: [], rules: [] });\r\n  const [newPrecedent, setNewPrecedent] = useState<Partial<GlobalPrecedent>>({ caseName: '', keyTakeaway: '', tags: [] });\r\n  const [importing, setImporting] = useState(false);\r\n  const [importMessage, setImportMessage] = useState('');\r\n  const [importInsights, setImportInsights] = useState<AIInsight[]>([]);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [medicalDocs, setMedicalDocs] = useState<KnowledgeDocumentSummary[]>([]);\r\n  const [selectedMedicalId, setSelectedMedicalId] = useState<string>('');\r\n  const [medicalDetail, setMedicalDetail] = useState<KnowledgeDocumentDetail | null>(null);\r\n  const [medicalInitialized, setMedicalInitialized] = useState(false);\r\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\r\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\r\n  const [medicalError, setMedicalError] = useState<string | null>(null);\r\n  const [caseLists, setCaseLists] = useState<{ ownCases: CaseRecord[]; otherCases: CaseSummaryRecord[] }>({\r\n    ownCases: [],\r\n    otherCases: [],\r\n  });\r\n  const [caseListLoading, setCaseListLoading] = useState(false);\r\n  const [caseListError, setCaseListError] = useState<string | null>(null);\r\n  const [selectedCase, setSelectedCase] = useState<CaseRecord | null>(null);\r\n  const [subjectDraft, setSubjectDraft] = useState('');\r\n  const [notifications, setNotifications] = useState<NotificationRecord[]>([]);\r\n  const [notificationsError, setNotificationsError] = useState<string | null>(null);\r\n  const [confirmAction, setConfirmAction] = useState<ConfirmAction | null>(null);\r\n  const [confirmLoading, setConfirmLoading] = useState(false);\r\n\r\n  const handleSaveChapter = () => {\r\n    if (!newChapter.title || !newChapter.content) {\r\n      setImportMessage('חובה למלא כותרת ותוכן לפרק.');\r\n      return;\r\n    }\r\n    const chapter: BookChapter = {\r\n      id: Date.now().toString(),\r\n      title: newChapter.title!,\r\n      content: newChapter.content!,\r\n      tags: newChapter.tags || [],\r\n      rules: newChapter.rules || [],\r\n    };\r\n    saveBookChapter(chapter);\r\n    setBrain(getKnowledgeBase());\r\n    setNewChapter({ title: '', content: '', tags: [], rules: [] });\r\n    setImportMessage('הפרק נשמר בהצלחה במאגר הפנימי.');\r\n  };\r\n\r\n  const handleSavePrecedent = () => {\r\n    if (!newPrecedent.caseName || !newPrecedent.keyTakeaway) {\r\n      setImportMessage('חובה למלא שם ותובנה לפני שמירת תקדים.');\r\n      return;\r\n    }\r\n    const precedent: GlobalPrecedent = {\r\n      id: Date.now().toString(),\r\n      caseName: newPrecedent.caseName!,\r\n      keyTakeaway: newPrecedent.keyTakeaway!,\r\n      citation: newPrecedent.citation || '',\r\n      tags: newPrecedent.tags || [],\r\n      relevantIssues: [],\r\n    };\r\n    saveGlobalPrecedent(precedent);\r\n    setBrain(getKnowledgeBase());\r\n    setNewPrecedent({ caseName: '', keyTakeaway: '', tags: [] });\r\n    setImportMessage('התקדים נשמר בהצלחה במאגר הפנימי.');\r\n  };\r\n\r\n  const importChapterFile = async (file: File) => {\r\n    setImporting(true);\r\n    setImportMessage(`מעלה את \"${file.name}\" לעיבוד...`);\r\n    setImportInsights([]);\r\n    try {\r\n      if (!isApiConfigured()) {\r\n        setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');\r\n        return;\r\n      }\r\n      const backendResult = await uploadChapterPdf(file, { docType: 'chapter' });\r\n      const chapter: BookChapter = {\r\n        id: backendResult.id,\r\n        title: backendResult.title,\r\n        content: backendResult.content || backendResult.summary,\r\n        tags: backendResult.tags || [],\r\n        rules: backendResult.rules || [],\r\n      };\r\n      saveBookChapter(chapter);\r\n      setBrain(getKnowledgeBase());\r\n      setNewChapter(chapter);\r\n      setImportInsights(backendResult.insights || []);\r\n      setImportMessage(`הפרק \"${chapter.title}\" עוּבד בהצלחה דרך השרת ונשמר במאגר.`);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');\r\n    } finally {\r\n      setImporting(false);\r\n      if (fileInputRef.current) fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handlePdfSelection = (files: FileList | null) => {\r\n    if (!files || !files.length) return;\r\n    const file = files[0];\r\n    if (file.type !== 'application/pdf') {\r\n      setImportMessage('נא לבחור קובץ PDF בלבד.');\r\n      return;\r\n    }\r\n    importChapterFile(file);\r\n  };\r\n\r\n  const handleDrop = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    setDragActive(false);\r\n    handlePdfSelection(event.dataTransfer.files);\r\n  };\r\n\r\n  const handleDrag = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    if (event.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (event.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const triggerFilePicker = () => fileInputRef.current?.click();\r\n\r\n  const refreshCaseLists = useCallback(async () => {\r\n    setCaseListLoading(true);\r\n    setCaseListError(null);\r\n    try {\r\n      const payload = await apiListCases();\r\n      setCaseLists(payload);\r\n      if (selectedCase && !payload.ownCases.find((entry) => entry.id === selectedCase.id)) {\r\n        setSelectedCase(null);\r\n      }\r\n      if (!selectedCase && payload.ownCases.length > 0) {\r\n        setSelectedCase(payload.ownCases[0]);\r\n        setSubjectDraft(payload.ownCases[0].topicSummary ?? '');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('טעינת התיקים נכשלה.');\r\n    } finally {\r\n      setCaseListLoading(false);\r\n    }\r\n  }, [selectedCase]);\r\n\r\n  const refreshNotifications = useCallback(async () => {\r\n    try {\r\n      const items = await apiListNotifications();\r\n      setNotifications(items);\r\n      setNotificationsError(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setNotificationsError('טעינת ההתראות נכשלה.');\r\n    }\r\n  }, []);\r\n\r\n  const handleSelectCaseDetail = useCallback(\r\n    async (caseId: string) => {\r\n      setCaseListLoading(true);\r\n      setCaseListError(null);\r\n      try {\r\n        const detail = await apiGetCase(caseId);\r\n        setSelectedCase(detail);\r\n        setSubjectDraft(detail.topicSummary ?? '');\r\n      } catch (error) {\r\n        console.error(error);\r\n        setCaseListError('טעינת פרטי התיק נכשלה.');\r\n      } finally {\r\n        setCaseListLoading(false);\r\n      }\r\n    },\r\n    [],\r\n  );\r\n\r\n  const performExportCase = async (caseId: string, format: 'pdf' | 'json') => {\r\n    try {\r\n      const blob = await apiExportCaseFile(caseId, format);\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `case-${caseId}.${format === 'pdf' ? 'pdf' : 'json'}`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('ייצוא התיק נכשל.');\r\n    }\r\n  };\r\n\r\n  const performRenewCase = async (caseId: string) => {\r\n    try {\r\n      await apiRenewCase(caseId);\r\n      await refreshCaseLists();\r\n      if (selectedCase?.id === caseId) {\r\n        const detail = await apiGetCase(caseId);\r\n        setSelectedCase(detail);\r\n        setSubjectDraft(detail.topicSummary ?? '');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('חידוש התיק נכשל.');\r\n    }\r\n  };\r\n\r\n  const performArchiveCase = async (caseRecord: CaseRecord) => {\r\n    try {\r\n      if (caseRecord.status === 'ARCHIVED') {\r\n        await apiRenewCase(caseRecord.id);\r\n      } else {\r\n        await apiArchiveCase(caseRecord.id);\r\n      }\r\n      await refreshCaseLists();\r\n      if (selectedCase?.id === caseRecord.id) {\r\n        const detail = await apiGetCase(caseRecord.id);\r\n        setSelectedCase(detail);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('עדכון מצב הארכיון נכשל.');\r\n    }\r\n  };\r\n\r\n  const performDeleteCase = async (caseId: string) => {\r\n    try {\r\n      await apiDeleteCase(caseId);\r\n      if (selectedCase?.id === caseId) {\r\n        setSelectedCase(null);\r\n      }\r\n      await refreshCaseLists();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('מחיקת התיק נכשלה.');\r\n    }\r\n  };\r\n\r\n  const handleSaveMetadata = async () => {\r\n    if (!selectedCase) return;\r\n    try {\r\n      const updated = await apiUpdateCaseMetadata(selectedCase.id, { topicSummary: subjectDraft.trim() || undefined });\r\n      setSelectedCase(updated);\r\n      await refreshCaseLists();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('עדכון הנושא נכשל.');\r\n    }\r\n  };\r\n\r\n  const closeConfirmDialog = () => {\r\n    if (confirmLoading) return;\r\n    setConfirmAction(null);\r\n  };\r\n\r\n  const handleConfirmDangerAction = async () => {\r\n    if (!confirmAction) return;\r\n    setConfirmLoading(true);\r\n    try {\r\n      switch (confirmAction.kind) {\r\n        case 'export':\r\n          await performExportCase(confirmAction.caseId, confirmAction.format);\r\n          break;\r\n        case 'renew':\r\n          await performRenewCase(confirmAction.caseId);\r\n          break;\r\n        case 'archive':\r\n          await performArchiveCase(confirmAction.caseRecord);\r\n          break;\r\n        case 'delete':\r\n          await performDeleteCase(confirmAction.caseId);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setConfirmAction(null);\r\n    } finally {\r\n      setConfirmLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMarkNotification = async (notificationId: string) => {\r\n    try {\r\n      await apiMarkNotificationRead(notificationId);\r\n      await refreshNotifications();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setNotificationsError('סימון ההתראה נכשל.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical' || medicalInitialized) return;\r\n    let cancelled = false;\r\n    const loadDocuments = async () => {\r\n      setMedicalListLoading(true);\r\n      setMedicalError(null);\r\n      try {\r\n        const docs = await listKnowledgeDocuments({ docType: 'chapter', limit: 25 });\r\n        if (!cancelled) {\r\n          setMedicalDocs(docs);\r\n          setSelectedMedicalId(docs[0]?.id ?? '');\r\n          setMedicalInitialized(true);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalListLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDocuments();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, medicalInitialized]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'cases') return;\r\n    refreshCaseLists();\r\n    refreshNotifications();\r\n  }, [activeTab, refreshCaseLists, refreshNotifications]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical') return;\r\n    if (!selectedMedicalId) {\r\n      setMedicalDetail(null);\r\n      return;\r\n    }\r\n    let cancelled = false;\r\n    setMedicalDetailLoading(true);\r\n    setMedicalError(null);\r\n    const loadDetail = async () => {\r\n      try {\r\n        const doc = await getKnowledgeDocument(selectedMedicalId);\r\n        if (!cancelled) {\r\n          setMedicalDetail(doc);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת ניתוח רפואי נכשלה.');\r\n          setMedicalDetail(null);\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalDetailLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDetail();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, selectedMedicalId]);\r\n\r\n  const refreshMedicalDetail = useCallback(async () => {\r\n    if (!selectedMedicalId) return;\r\n    try {\r\n      const doc = await getKnowledgeDocument(selectedMedicalId);\r\n      setMedicalDetail(doc);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMedicalError('טעינת הניתוח הרפואי נכשלה.');\r\n    }\r\n  }, [selectedMedicalId]);\r\n\r\n  const requiresHumanExpert = medicalDetail?.flags?.some((flag) => flag.code === 'HUMAN_EXPERT_REQUIRED');\r\n  const hasAssertionConflict =\r\n    Boolean(medicalDetail?.claims?.some((claim) => claim.assertionType === 'FACT')) &&\r\n    Boolean(medicalDetail?.flags?.some((flag) => flag.severity === 'critical'));\r\n\r\n  const knowledgeView = (\r\n    <div className=\"space-y-6\">\r\n      <div\r\n        className={`border-2 border-dashed rounded-card p-6 text-center transition ${\r\n          dragActive ? 'border-gold bg-gold/5' : 'border-pearl bg-pearl/40'\r\n        }`}\r\n        onDragOver={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          className=\"hidden\"\r\n          accept=\"application/pdf\"\r\n          onChange={(event) => handlePdfSelection(event.target.files)}\r\n        />\r\n        <UploadCloud className=\"w-10 h-10 text-slate-light mx-auto mb-3\" />\r\n        <p className=\"text-lg font-semibold text-navy\">גררו קובץ PDF של פרק \"תחשיבי נזק\"</p>\r\n        <p className=\"text-sm text-slate mt-2\">הקבצים מעובדים ומנוסחים בשרת המאובטח – כולל רישום Audit אוטומטי.</p>\r\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\">\r\n          <button type=\"button\" onClick={triggerFilePicker} className=\"btn-secondary px-6\" disabled={importing}>\r\n            בחר קובץ PDF\r\n          </button>\r\n          {importing && (\r\n            <div className=\"loader-inline\">\r\n              <Loader2 className=\"loader-inline__icon\" aria-hidden=\"true\" />\r\n              מעבד קובץ...\r\n            </div>\r\n          )}\r\n        </div>\r\n        {importMessage && <p className=\"text-sm text-slate mt-3\">{importMessage}</p>}\r\n        {importInsights.length > 0 && (\r\n          <div className=\"mt-4 text-left\">\r\n            <p className=\"text-xs font-bold text-slate-light mb-2\">תובנות שהופקו:</p>\r\n            <ul className=\"space-y-1 text-sm text-slate\">\r\n              {importInsights.map((insight) => (\r\n                <li key={insight.title} className=\"rounded-card border border-pearl bg-white px-3 py-2\">\r\n                  <span className=\"font-semibold\">{insight.title}: </span>\r\n                  {insight.content}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid lg:grid-cols-2 gap-6\">\r\n        <form\r\n          className=\"card-shell\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSaveChapter();\r\n          }}\r\n        >\r\n          <div className=\"card-accent\" />\r\n          <div className=\"card-head\">\r\n            <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n              <Book className=\"w-5 h-5 text-gold\" /> הוסף פרק חדש\r\n            </h2>\r\n          </div>\r\n          <div className=\"card-underline\" />\r\n          <div className=\"card-body space-y-4\">\r\n            <input\r\n              className=\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\"\r\n              placeholder=\"כותרת הפרק\"\r\n              value={newChapter.title || ''}\r\n              onChange={(e) => setNewChapter((prev) => ({ ...prev, title: e.target.value }))}\r\n            />\r\n            <textarea\r\n              className=\"w-full rounded-card border border-pearl bg-white p-3 text-sm h-24 focus:border-gold\"\r\n              placeholder=\"תוכן / תקציר\"\r\n              value={newChapter.content || ''}\r\n              onChange={(e) => setNewChapter((prev) => ({ ...prev, content: e.target.value }))}\r\n            />\r\n            <input\r\n              className=\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\"\r\n              placeholder=\"תגיות (מופרדות בפסיק)\"\r\n              value={(newChapter.tags || []).join(', ')}\r\n              onChange={(e) =>\r\n                setNewChapter((prev) => ({\r\n                  ...prev,\r\n                  tags: e.target.value\r\n                    .split(',')\r\n                    .map((tag) => tag.trim())\r\n                    .filter(Boolean),\r\n                }))\r\n              }\r\n            />\r\n            <textarea\r\n              className=\"w-full rounded-card border border-pearl bg-white p-3 text-sm h-20 focus:border-gold\"\r\n              placeholder=\"כללים (כל שורה כלל חדש)\"\r\n              value={(newChapter.rules || []).join('\\n')}\r\n              onChange={(e) =>\r\n                setNewChapter((prev) => ({\r\n                  ...prev,\r\n                  rules: e.target.value\r\n                    .split('\\n')\r\n                    .map((rule) => rule.trim())\r\n                    .filter(Boolean),\r\n                }))\r\n              }\r\n            />\r\n            <button type=\"submit\" className=\"btn-secondary w-full justify-center\">\r\n              <Save className=\"w-4 h-4\" /> שמור פרק\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        <form\r\n          className=\"card-shell\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSavePrecedent();\r\n          }}\r\n        >\r\n          <div className=\"card-accent\" />\r\n          <div className=\"card-head\">\r\n            <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n              <Gavel className=\"w-5 h-5 text-gold\" /> הוסף תקדים חדש\r\n            </h2>\r\n          </div>\r\n          <div className=\"card-underline\" />\r\n          <div className=\"card-body space-y-4\">\r\n            <input\r\n              className=\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\"\r\n              placeholder=\"שם ההליך / תקדים\"\r\n              value={newPrecedent.caseName || ''}\r\n              onChange={(e) => setNewPrecedent((prev) => ({ ...prev, caseName: e.target.value }))}\r\n            />\r\n            <textarea\r\n              className=\"w-full rounded-card border border-pearl bg-white p-3 text-sm h-24 focus:border-gold\"\r\n              placeholder=\"תובנה מרכזית\"\r\n              value={newPrecedent.keyTakeaway || ''}\r\n              onChange={(e) => setNewPrecedent((prev) => ({ ...prev, keyTakeaway: e.target.value }))}\r\n            />\r\n            <input\r\n              className=\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\"\r\n              placeholder=\"ציון / מקור\"\r\n              value={newPrecedent.citation || ''}\r\n              onChange={(e) => setNewPrecedent((prev) => ({ ...prev, citation: e.target.value }))}\r\n            />\r\n            <input\r\n              className=\"w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\"\r\n              placeholder=\"תגיות (מופרדות בפסיק)\"\r\n              value={(newPrecedent.tags || []).join(', ')}\r\n              onChange={(e) =>\r\n                setNewPrecedent((prev) => ({\r\n                  ...prev,\r\n                  tags: e.target.value\r\n                    .split(',')\r\n                    .map((tag) => tag.trim())\r\n                    .filter(Boolean),\r\n                }))\r\n              }\r\n            />\r\n            <button type=\"submit\" className=\"btn-secondary w-full justify-center\">\r\n              <Save className=\"w-4 h-4\" /> שמור תקדים\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        <div className=\"card-shell\">\r\n          <div className=\"card-accent\" />\r\n          <div className=\"card-head\">\r\n            <h3 className=\"font-semibold flex items-center gap-2\">\r\n              <Book className=\"w-4 h-4 text-gold\" /> פרקים קיימים ({brain.book.length})\r\n            </h3>\r\n          </div>\r\n          <div className=\"card-underline\" />\r\n          <div className=\"card-body space-y-3\">\r\n            {brain.book.length === 0 ? (\r\n              <div className=\"state-block text-sm\">\r\n                <Book className=\"state-block__icon\" aria-hidden=\"true\" />\r\n                <p className=\"state-block__title\">אין פרקים שמורים</p>\r\n                <p className=\"state-block__description\">כשיוזנו פרקים חדשים הם יתווספו אוטומטית לרשימה.</p>\r\n              </div>\r\n            ) : (\r\n              <ul className=\"space-y-3\">\r\n                {brain.book.slice(0, 4).map((chapter) => (\r\n                  <li key={chapter.id} className=\"mini-card space-y-1\">\r\n                    <p className=\"font-semibold text-navy\">{chapter.title}</p>\r\n                    <p className=\"text-xs text-slate-light overflow-hidden text-ellipsis whitespace-nowrap\">\r\n                      {chapter.content}\r\n                    </p>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"card-shell\">\r\n          <div className=\"card-accent\" />\r\n          <div className=\"card-head\">\r\n            <h3 className=\"font-semibold flex items-center gap-2\">\r\n              <Gavel className=\"w-4 h-4 text-gold\" /> תקדימים ({brain.precedents.length})\r\n            </h3>\r\n          </div>\r\n          <div className=\"card-underline\" />\r\n          <div className=\"card-body space-y-3\">\r\n            {brain.precedents.length === 0 ? (\r\n              <div className=\"state-block text-sm\">\r\n                <Gavel className=\"state-block__icon\" aria-hidden=\"true\" />\r\n                <p className=\"state-block__title\">אין תקדימים שמורים</p>\r\n                <p className=\"state-block__description\">הוסף תקדים חדש כדי להתחיל לבנות ספרייה משפטית פנימית.</p>\r\n              </div>\r\n            ) : (\r\n              <ul className=\"space-y-3\">\r\n                {brain.precedents.slice(0, 4).map((precedent) => (\r\n                  <li key={precedent.id} className=\"mini-card space-y-1\">\r\n                    <p className=\"font-semibold text-navy\">{precedent.caseName}</p>\r\n                    <p className=\"text-xs text-slate-light overflow-hidden text-ellipsis whitespace-nowrap\">\r\n                      {precedent.keyTakeaway}\r\n                    </p>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const caseStatusLabel: Record<'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE', string> = {\r\n    ACTIVE: 'פעיל',\r\n    ARCHIVED: 'בארכיון',\r\n    PENDING_DELETE: 'ממתין למחיקה',\r\n  };\r\n\r\n  const caseStatusStyle: Record<'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE', string> = {\r\n    ACTIVE: 'bg-gold/20 text-navy',\r\n    ARCHIVED: 'bg-slate-light/30 text-navy',\r\n    PENDING_DELETE: 'bg-danger/10 text-danger',\r\n  };\r\n\r\n  const renderStatusBadge = (status: 'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE') => (\r\n    <span className={`inline-flex items-center rounded px-2 py-0.5 text-xs font-semibold ${caseStatusStyle[status]}`}>\r\n      {caseStatusLabel[status]}\r\n    </span>\r\n  );\r\n\r\n  const renderDaysIndicator = (days?: number) => {\r\n    if (days === undefined) return <span className=\"text-xs text-slate-500\">ללא מידע</span>;\r\n    if (days === 0) {\r\n      return <span className=\"text-xs text-danger font-semibold\">פחות מ-24 שעות למחיקה</span>;\r\n    }\r\n    const tone =\r\n      days <= 3 ? 'text-danger font-semibold' : days <= 15 ? 'text-gold font-semibold' : 'text-slate-light';\r\n    return (\r\n      <span className={`text-xs ${tone}`} dir=\"ltr\">\r\n        נותרו {days} ימים\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const CaseCard = ({\r\n    item,\r\n    variant,\r\n  }: {\r\n    item: CaseSummaryRecord;\r\n    variant: 'owner' | 'readonly';\r\n  }) => (\r\n    <div\r\n      className={`card-shell transition hover:shadow-2xl ${variant === 'owner' ? 'cursor-pointer' : ''}`}\r\n      onClick={variant === 'owner' ? () => handleSelectCaseDetail(item.id) : undefined}\r\n    >\r\n      <div className=\"card-accent\" />\r\n      <div className=\"card-head\">\r\n        <div className=\"space-y-1\">\r\n          <p className=\"text-base font-semibold\">{item.title}</p>\r\n          <p className=\"text-sm text-slate-light truncate\">{item.topicSummary}</p>\r\n        </div>\r\n        <span className={variant === 'owner' ? 'badge-owner' : 'badge-readonly'}>\r\n          {variant === 'owner' ? 'שלי' : 'קריאה בלבד'}\r\n        </span>\r\n      </div>\r\n      <div className=\"card-underline\" />\r\n      <div className=\"card-body space-y-2 text-sm text-slate\">\r\n        {variant === 'owner' ? (\r\n          <>\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              {renderStatusBadge(item.status as any)}\r\n              {renderDaysIndicator(item.daysRemaining)}\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-4 text-xs\">\r\n              <span>נוצר: {new Date(item.createdAt).toLocaleDateString('he-IL')}</span>\r\n              {item.lastAccessedAt && <span>עודכן: {new Date(item.lastAccessedAt).toLocaleDateString('he-IL')}</span>}\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <span className=\"text-xs text-slate-light\">\r\n            עודכן: {new Date(item.createdAt).toLocaleDateString('he-IL')}\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const casesView = (\r\n    <div className=\"space-y-6\">\r\n      <section className=\"card-shell\">\r\n        <div className=\"card-accent\" />\r\n        <div className=\"card-head\">\r\n          <div>\r\n            <p className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <Layout className=\"w-5 h-5 text-gold\" /> ניהול תיקים\r\n            </p>\r\n            <p className=\"text-sm text-slate-light\">\r\n              תצוגה משרדית פנימית – תיקים אישיים לצד תיקים ללימוד והשוואה.\r\n            </p>\r\n          </div>\r\n          <AlertTriangle className=\"w-5 h-5 text-gold-light\" />\r\n        </div>\r\n        <div className=\"card-underline\" />\r\n        <div className=\"card-body text-sm text-slate\">\r\n          מחיקה אוטומטית מתבצעת לאחר 90 יום. מומלץ לתייק או לייצא מסמכים טרם המחיקה.\r\n        </div>\r\n      </section>\r\n\r\n      {caseListError && (\r\n        <div className=\"state-block state-block--error text-sm\">\r\n          <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\r\n          <p className=\"state-block__title\">טעינת התיקים נכשלה</p>\r\n          <p className=\"state-block__description\">{caseListError}</p>\r\n        </div>\r\n      )}\r\n      {caseListLoading && (\r\n        <div className=\"loader-inline\">\r\n          <Loader2 className=\"loader-inline__icon\" aria-hidden=\"true\" />\r\n          טוען נתוני תיקים...\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid gap-6 lg:grid-cols-2\">\r\n        <section className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-semibold text-slate\">התיקים שלי ({caseLists.ownCases.length})</h3>\r\n          {caseLists.ownCases.length === 0 ? (\r\n            <div className=\"card-shell\">\r\n              <div className=\"card-accent\" />\r\n              <div className=\"card-body\">\r\n                <div className=\"state-block text-sm\">\r\n                  <Layout className=\"state-block__icon\" aria-hidden=\"true\" />\r\n                  <p className=\"state-block__title\">אין תיקים בבעלותך כרגע</p>\r\n                  <p className=\"state-block__description\">צור תיק חדש או יבוא תיק קיים כדי להתחיל בעבודה.</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {caseLists.ownCases.map((item) => (\r\n                <CaseCard key={item.id} item={item} variant=\"owner\" />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </section>\r\n\r\n        <section className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-semibold text-slate\">תיקים אחרים ({caseLists.otherCases.length})</h3>\r\n          {caseLists.otherCases.length === 0 ? (\r\n            <div className=\"card-shell\">\r\n              <div className=\"card-accent\" />\r\n              <div className=\"card-body\">\r\n                <div className=\"state-block text-sm\">\r\n                  <Layout className=\"state-block__icon\" aria-hidden=\"true\" />\r\n                  <p className=\"state-block__title\">אין תיקים חיצוניים להשוואה</p>\r\n                  <p className=\"state-block__description\">כשתוקצה גישה לתיקי לימוד, הם יופיעו באזור זה.</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {caseLists.otherCases.map((item) => (\r\n                <CaseCard key={item.id} item={item} variant=\"readonly\" />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </section>\r\n      </div>\r\n\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        <div className=\"card-shell lg:col-span-2\">\r\n          <div className=\"card-accent\" />\r\n          <div className=\"card-head\">\r\n            <p className=\"text-base font-semibold\">פרטי תיק נבחר</p>\r\n            {selectedCase && <span className=\"badge-status\">{selectedCase.title}</span>}\r\n          </div>\r\n          <div className=\"card-underline\" />\r\n          <div className=\"card-body text-sm text-slate space-y-3\">\r\n            {selectedCase ? (\r\n              <>\r\n                <div className=\"flex flex-wrap items-center gap-2\">\r\n                  {renderStatusBadge(selectedCase.status)}\r\n                  {renderDaysIndicator(selectedCase.daysRemaining)}\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-slate-light mb-1\">נושא בטוח</p>\r\n                  <textarea\r\n                    className=\"w-full rounded-2xl border border-pearl bg-pearl/60 p-3 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\"\r\n                    rows={3}\r\n                    value={subjectDraft}\r\n                    onChange={(e) => setSubjectDraft(e.target.value)}\r\n                    placeholder=\"תיאור מילולי קצר של התיק...\"\r\n                  />\r\n                  <div className=\"mt-2 flex justify-end\">\r\n                    <button onClick={handleSaveMetadata} className=\"btn-primary text-xs px-4 py-1.5\">\r\n                      שמור נושא\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-xs text-slate-light flex flex-wrap gap-4\">\r\n                  <span>נוצר: {new Date(selectedCase.createdAt).toLocaleString('he-IL')}</span>\r\n                  {selectedCase.lastAccessedAt && (\r\n                    <span>גישה אחרונה: {new Date(selectedCase.lastAccessedAt).toLocaleString('he-IL')}</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"pt-4 flex flex-wrap gap-2 border-t border-pearl/60\">\r\n                  <button\r\n                    className=\"btn-primary text-xs px-4 py-1.5\"\r\n                    onClick={() =>\r\n                      setConfirmAction({\r\n                        kind: 'export',\r\n                        format: 'pdf',\r\n                        caseId: selectedCase.id,\r\n                        caseTitle: selectedCase.title,\r\n                      })\r\n                    }\r\n                  >\r\n                    ייצא PDF\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-secondary text-xs px-4 py-1.5\"\r\n                    onClick={() =>\r\n                      setConfirmAction({\r\n                        kind: 'export',\r\n                        format: 'json',\r\n                        caseId: selectedCase.id,\r\n                        caseTitle: selectedCase.title,\r\n                      })\r\n                    }\r\n                  >\r\n                    ייצא JSON\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-outline text-xs px-4 py-1.5\"\r\n                    onClick={() =>\r\n                      setConfirmAction({\r\n                        kind: 'renew',\r\n                        caseId: selectedCase.id,\r\n                        caseTitle: selectedCase.title,\r\n                      })\r\n                    }\r\n                  >\r\n                    חדש תיק\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-outline text-xs px-4 py-1.5\"\r\n                    onClick={() =>\r\n                      setConfirmAction({\r\n                        kind: 'archive',\r\n                        caseRecord: selectedCase,\r\n                      })\r\n                    }\r\n                  >\r\n                    {selectedCase.status === 'ARCHIVED' ? 'בטל ארכיון' : 'העבר לארכיון'}\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-outline text-xs px-4 py-1.5 border-danger text-danger hover:bg-danger/10\"\r\n                    onClick={() =>\r\n                      setConfirmAction({\r\n                        kind: 'delete',\r\n                        caseId: selectedCase.id,\r\n                        caseTitle: selectedCase.title,\r\n                      })\r\n                    }\r\n                  >\r\n                    מחיקה\r\n                  </button>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <p className=\"text-sm text-slate\">בחר תיק מהרשימה להצגת פרטים.</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card-shell\">\r\n          <div className=\"card-accent\" />\r\n          <div className=\"card-head\">\r\n            <p className=\"text-base font-semibold flex items-center gap-2\">\r\n              <Bell className=\"w-4 h-4 text-gold\" />\r\n              התראות שמירה\r\n            </p>\r\n          </div>\r\n          <div className=\"card-underline\" />\r\n          <div className=\"card-body space-y-2 text-sm text-slate\">\r\n            {notificationsError && (\r\n              <div className=\"state-block state-block--error text-xs\">\r\n                <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\r\n                <p className=\"state-block__title text-sm\">שגיאה בטעינת התראות</p>\r\n                <p className=\"state-block__description\">{notificationsError}</p>\r\n              </div>\r\n            )}\r\n            {notifications.length === 0 ? (\r\n              <p className=\"text-sm text-slate\">אין התראות פעילות.</p>\r\n            ) : (\r\n              <ul className=\"space-y-2\">\r\n                {notifications.map((notification) => (\r\n                  <li key={notification.id} className=\"rounded-2xl border border-pearl bg-pearl/40 p-3\">\r\n                    <p className=\"text-slate\">{notification.message}</p>\r\n                    <p className=\"text-[11px] text-slate-light mt-1\">\r\n                      {new Date(notification.createdAt).toLocaleString('he-IL')}\r\n                    </p>\r\n                    {!notification.readAt && (\r\n                      <button\r\n                        className=\"mt-2 text-xs text-gold hover:text-gold-light\"\r\n                        onClick={() => handleMarkNotification(notification.id)}\r\n                      >\r\n                        סמן כנקרא\r\n                      </button>\r\n                    )}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const medicalView = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-end\">\r\n        <div className=\"flex-1\">\r\n          <label className=\"text-xs font-semibold text-slate-500\">בחר מסמך רפואי</label>\r\n          <select\r\n            className=\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\"\r\n            value={selectedMedicalId}\r\n            onChange={(e) => setSelectedMedicalId(e.target.value)}\r\n            disabled={!medicalDocs.length || medicalListLoading}\r\n          >\r\n            {medicalDocs.map((doc) => (\r\n              <option key={doc.id} value={doc.id}>\r\n                {doc.title}\r\n              </option>\r\n            ))}\r\n            {!medicalDocs.length && <option value=\"\">אין מסמכים</option>}\r\n          </select>\r\n        </div>\r\n        <div className=\"md:w-1/3\">\r\n          <QualityBadge score={medicalDetail?.score} />\r\n        </div>\r\n      </div>\r\n\r\n      {(requiresHumanExpert || hasAssertionConflict) && (\r\n        <div className=\"state-block state-block--error text-sm\">\r\n          <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\r\n          <p className=\"state-block__title\">\r\n            {requiresHumanExpert ? 'נדרש מומחה אנושי' : 'זוהתה סתירה בין הטענות לדגלים'}\r\n          </p>\r\n          <p className=\"state-block__description\">\r\n            {requiresHumanExpert\r\n              ? 'קיים דגל HUMAN_EXPERT_REQUIRED. יש לערב מומחה רפואי לפני פעולה נוספת.'\r\n              : 'זוהו טענות מסווגות כעובדה לצד דגלים קריטיים. מומלץ לעבור שוב על הממצאים לפני הסתמכות.'}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {medicalError && (\r\n        <div className=\"state-block state-block--error text-sm\">\r\n          <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\r\n          <p className=\"state-block__title\">טעינת המסמך הרפואי נכשלה</p>\r\n          <p className=\"state-block__description\">{medicalError}</p>\r\n        </div>\r\n      )}\r\n\r\n      {(medicalListLoading || medicalDetailLoading) && (\r\n        <div className=\"loader-inline\">\r\n          <Loader2 className=\"loader-inline__icon\" aria-hidden=\"true\" />\r\n          טוען נתוני ניתוח רפואי...\r\n        </div>\r\n      )}\r\n\r\n      {!medicalListLoading && !medicalDetail && !medicalError && (\r\n        <div className=\"state-block text-sm\">\r\n          <Book className=\"state-block__icon\" aria-hidden=\"true\" />\r\n          <p className=\"state-block__title\">אין ניתוחים רפואיים להצגה</p>\r\n          <p className=\"state-block__description\">בחר מסמך רפואי מהרשימה או העלה מסמך חדש כדי להתחיל בניתוח.</p>\r\n        </div>\r\n      )}\r\n\r\n      {medicalDetail && (\r\n        <>\r\n          <MedicalQualityBox\r\n            score={medicalDetail.medicalQualityScore}\r\n            findings={medicalDetail.qualityFindings ?? []}\r\n            reasoningFindings={medicalDetail.reasoningFindings ?? []}\r\n          />\r\n          <KnowledgeFlags flags={medicalDetail.flags || []} />\r\n          <KnowledgeClaimsPanel claims={medicalDetail.claims || []} limit={5} />\r\n          <MedicalTimeline events={medicalDetail.timeline || []} />\r\n          <LiteraturePanel\r\n            knowledgeId={medicalDetail.id}\r\n            resources={medicalDetail.literatureResources ?? []}\r\n            onRefresh={refreshMedicalDetail}\r\n          />\r\n        </>\r\n      )}\r\n      <LegalDisclaimer />\r\n    </div>\r\n  );\r\n\r\n  const contextModeLabel =\r\n    activeTab === 'cases'\r\n      ? 'ניהול תיקים משרדיים'\r\n      : activeTab === 'knowledge'\r\n      ? 'מרכז הידע הפנימי'\r\n      : 'בקרה רפואית ותחקור';\r\n  const ribbonStatus = activeTab === 'cases' ? selectedCase?.status : undefined;\r\n  const ribbonCaseName = activeTab === 'cases' ? selectedCase?.title : undefined;\r\n  const ribbonReadOnly = activeTab === 'cases' ? !(selectedCase?.isOwner ?? true) : false;\r\n\r\n  const confirmTitle = (() => {\r\n    if (!confirmAction) return '';\r\n    switch (confirmAction.kind) {\r\n      case 'export':\r\n        return 'אישור ייצוא תיק';\r\n      case 'renew':\r\n        return 'אישור חידוש תיק';\r\n      case 'archive':\r\n        return confirmAction.caseRecord.status === 'ARCHIVED' ? 'אישור ביטול ארכיון' : 'אישור העברה לארכיון';\r\n      case 'delete':\r\n        return 'אישור מחיקה סופית';\r\n      default:\r\n        return 'אישור פעולה';\r\n    }\r\n  })();\r\n\r\n  const confirmDescription = (() => {\r\n    if (!confirmAction) return '';\r\n    const base = confirmAction.kind === 'archive' ? confirmAction.caseRecord.title : confirmAction.caseTitle;\r\n    switch (confirmAction.kind) {\r\n      case 'export':\r\n        return `פעולה זו תייצא את התיק ${base ?? ''} בפורמט ${confirmAction.format.toUpperCase()} ותבוצע על ידי ${currentUserName}.`;\r\n      case 'renew':\r\n        return `פעולה זו תאפס את מועד המחיקה לתיק ${base ?? ''}. ${currentUserName} מאשר את ביצועה.`;\r\n      case 'archive':\r\n        return confirmAction.caseRecord.status === 'ARCHIVED'\r\n          ? `התיק ${confirmAction.caseRecord.title} יחזור ממצב ארכיון. הפעולה מאושרת על ידי ${currentUserName}.`\r\n          : `התיק ${confirmAction.caseRecord.title} יעבור לארכיון ויהיה לקריאה בלבד. הפעולה מאושרת על ידי ${currentUserName}.`;\r\n      case 'delete':\r\n        return `פעולה זו תמחק את התיק ${base ?? ''} לצמיתות ואינה ניתנת לשחזור. ${currentUserName} מאשר שהבין את המשמעות.`;\r\n      default:\r\n        return '';\r\n    }\r\n  })();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-pearl text-navy\" dir=\"rtl\">\r\n      <header className=\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <span className=\"text-xl font-semibold brand-mark\">LexMedical Admin</span>\r\n          <span className=\"text-xs text-gold-light hidden md:inline\">\r\n            שליטה משרדית בחומר הרפואי־משפטי\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-4 text-sm\">\r\n          <span className=\"text-pearl\">מחובר: {currentUserName}</span>\r\n          <button onClick={onLogout} className=\"flex items-center gap-2 rounded-full border border-gold px-3 py-1 text-gold hover:bg-gold/10 transition\">\r\n            <LogOut className=\"w-4 h-4\" /> יציאה\r\n          </button>\r\n        </div>\r\n      </header>\r\n      <ContextRibbon\r\n        mode={contextModeLabel}\r\n        caseName={ribbonCaseName}\r\n        status={ribbonStatus}\r\n        isReadOnly={ribbonReadOnly}\r\n        onBack={() => window.history.back()}\r\n      />\r\n      <main className=\"max-w-6xl mx-auto px-6 py-8 space-y-6\">\r\n        <div className=\"rounded-card border border-pearl bg-white p-6 shadow-card-xl flex flex-wrap items-center justify-between gap-4\">\r\n          <div>\r\n            <p className=\"text-sm text-slate\">עודכן לאחרונה: {new Date(brain.lastUpdated).toLocaleString('he-IL')}</p>\r\n            <p className=\"text-xs text-slate-light\">ממשק פנימי לשימוש עורכי דין בלבד</p>\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-3\">\r\n            <button\r\n              onClick={() => setActiveTab('knowledge')}\r\n              className={`rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 ${\r\n                activeTab === 'knowledge' ? 'bg-navy text-gold' : 'bg-pearl border border-pearl text-slate'\r\n              }`}\r\n            >\r\n              <Book className=\"w-4 h-4\" /> ידע\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('cases')}\r\n              className={`rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 ${\r\n                activeTab === 'cases' ? 'bg-navy text-gold' : 'bg-pearl border border-pearl text-slate'\r\n              }`}\r\n            >\r\n              <Layout className=\"w-4 h-4\" /> תיקים\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('medical')}\r\n              className={`rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 ${\r\n                activeTab === 'medical' ? 'bg-navy text-gold' : 'bg-pearl border border-pearl text-slate'\r\n              }`}\r\n            >\r\n              <Activity className=\"w-4 h-4\" /> Medical Analysis\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {activeTab === 'knowledge' && knowledgeView}\r\n        {activeTab === 'cases' && casesView}\r\n        {activeTab === 'medical' && medicalView}\r\n      </main>\r\n      {confirmAction && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4\" role=\"dialog\" aria-modal=\"true\">\r\n          <div className=\"card-shell max-w-md w-full\">\r\n            <div className=\"card-accent\" />\r\n            <div className=\"card-head\">\r\n              <h4 className=\"text-base font-semibold\">{confirmTitle}</h4>\r\n              <button\r\n                type=\"button\"\r\n                onClick={closeConfirmDialog}\r\n                className=\"text-xs text-slate-light hover:text-navy\"\r\n                aria-label=\"בטל פעולה\"\r\n              >\r\n                ביטול\r\n              </button>\r\n            </div>\r\n            <div className=\"card-underline\" />\r\n            <div className=\"card-body space-y-3 text-sm text-slate\">\r\n              <p>{confirmDescription}</p>\r\n              <p className=\"text-xs text-slate-light\">הפעולה תרשם בלוג האודיט המשרדי.</p>\r\n              <div className=\"flex justify-end gap-3 pt-2\">\r\n                <button type=\"button\" className=\"btn-outline text-xs px-4 py-1.5\" onClick={closeConfirmDialog} disabled={confirmLoading}>\r\n                  ביטול\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn-primary text-xs px-4 py-1.5\"\r\n                  onClick={handleConfirmDangerAction}\r\n                  disabled={confirmLoading}\r\n                >\r\n                  {confirmLoading ? 'מבצע...' : 'אישור פעולה'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}