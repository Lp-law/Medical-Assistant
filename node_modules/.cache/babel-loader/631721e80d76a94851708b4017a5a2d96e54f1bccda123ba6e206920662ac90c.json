{"ast":null,"code":"import { API_BASE_URL } from './api';\nexport const login = async (username, password) => {\n  const response = await fetch(`${API_BASE_URL}/auth/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  });\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error((error === null || error === void 0 ? void 0 : error.error) || 'login_failed');\n  }\n  return await response.json();\n};\nexport const fetchCurrentUser = async token => {\n  const response = await fetch(`${API_BASE_URL}/auth/me`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  if (!response.ok) {\n    throw new Error('session_invalid');\n  }\n  const data = await response.json();\n  return data.user;\n};","map":{"version":3,"names":["API_BASE_URL","login","username","password","response","fetch","method","headers","body","JSON","stringify","ok","error","json","catch","Error","fetchCurrentUser","token","Authorization","data","user"],"sources":["C:/Office-Apps/LexMedical-App/src/services/authClient.ts"],"sourcesContent":["import { API_BASE_URL } from './api';\r\nimport { UserRole } from '../types';\r\n\r\nexport interface AuthUser {\r\n  id: string;\r\n  username: string;\r\n  role: UserRole;\r\n}\r\n\r\nexport interface LoginResponse {\r\n  token: string;\r\n  user: AuthUser;\r\n}\r\n\r\nexport const login = async (username: string, password: string): Promise<LoginResponse> => {\r\n  const response = await fetch(`${API_BASE_URL}/auth/login`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ username, password }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error?.error || 'login_failed');\r\n  }\r\n\r\n  return (await response.json()) as LoginResponse;\r\n};\r\n\r\nexport const fetchCurrentUser = async (token: string): Promise<AuthUser> => {\r\n  const response = await fetch(`${API_BASE_URL}/auth/me`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error('session_invalid');\r\n  }\r\n  const data = await response.json();\r\n  return data.user as AuthUser;\r\n};\r\n\r\n"],"mappings":"AAAA,SAASA,YAAY,QAAQ,OAAO;AAcpC,OAAO,MAAMC,KAAK,GAAG,MAAAA,CAAOC,QAAgB,EAAEC,QAAgB,KAA6B;EACzF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGL,YAAY,aAAa,EAAE;IACzDM,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAER,QAAQ;MAAEC;IAAS,CAAC;EAC7C,CAAC,CAAC;EAEF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;IAChB,MAAMC,KAAK,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACrD,MAAM,IAAIC,KAAK,CAAC,CAAAH,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEA,KAAK,KAAI,cAAc,CAAC;EACjD;EAEA,OAAQ,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;AAC/B,CAAC;AAED,OAAO,MAAMG,gBAAgB,GAAG,MAAOC,KAAa,IAAwB;EAC1E,MAAMb,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGL,YAAY,UAAU,EAAE;IACtDO,OAAO,EAAE;MACPW,aAAa,EAAE,UAAUD,KAAK;IAChC;EACF,CAAC,CAAC;EACF,IAAI,CAACb,QAAQ,CAACO,EAAE,EAAE;IAChB,MAAM,IAAII,KAAK,CAAC,iBAAiB,CAAC;EACpC;EACA,MAAMI,IAAI,GAAG,MAAMf,QAAQ,CAACS,IAAI,CAAC,CAAC;EAClC,OAAOM,IAAI,CAACC,IAAI;AAClB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}