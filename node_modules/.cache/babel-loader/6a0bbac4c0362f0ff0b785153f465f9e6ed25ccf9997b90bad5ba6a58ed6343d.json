{"ast":null,"code":"import{API_BASE_URL}from'./api';export const login=async(username,password)=>{const response=await fetch(\"\".concat(API_BASE_URL,\"/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});if(!response.ok){const error=await response.json().catch(()=>({}));throw new Error((error===null||error===void 0?void 0:error.error)||'login_failed');}return await response.json();};export const fetchCurrentUser=async token=>{const response=await fetch(\"\".concat(API_BASE_URL,\"/auth/me\"),{headers:{Authorization:\"Bearer \".concat(token)}});if(!response.ok){throw new Error('session_invalid');}const data=await response.json();return data.user;};","map":{"version":3,"names":["API_BASE_URL","login","username","password","response","fetch","concat","method","headers","body","JSON","stringify","ok","error","json","catch","Error","fetchCurrentUser","token","Authorization","data","user"],"sources":["C:/Office-Apps/LexMedical-App/src/services/authClient.ts"],"sourcesContent":["import { API_BASE_URL } from './api';\r\nimport { UserRole } from '../types';\r\n\r\nexport interface AuthUser {\r\n  id: string;\r\n  username: string;\r\n  role: UserRole;\r\n}\r\n\r\nexport interface LoginResponse {\r\n  token: string;\r\n  user: AuthUser;\r\n}\r\n\r\nexport const login = async (username: string, password: string): Promise<LoginResponse> => {\r\n  const response = await fetch(`${API_BASE_URL}/auth/login`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ username, password }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error?.error || 'login_failed');\r\n  }\r\n\r\n  return (await response.json()) as LoginResponse;\r\n};\r\n\r\nexport const fetchCurrentUser = async (token: string): Promise<AuthUser> => {\r\n  const response = await fetch(`${API_BASE_URL}/auth/me`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error('session_invalid');\r\n  }\r\n  const data = await response.json();\r\n  return data.user as AuthUser;\r\n};\r\n\r\n"],"mappings":"AAAA,OAASA,YAAY,KAAQ,OAAO,CAcpC,MAAO,MAAM,CAAAC,KAAK,CAAG,KAAAA,CAAOC,QAAgB,CAAEC,QAAgB,GAA6B,CACzF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,YAAY,gBAAe,CACzDO,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAET,QAAQ,CAAEC,QAAS,CAAC,CAC7C,CAAC,CAAC,CAEF,GAAI,CAACC,QAAQ,CAACQ,EAAE,CAAE,CAChB,KAAM,CAAAC,KAAK,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CACrD,KAAM,IAAI,CAAAC,KAAK,CAAC,CAAAH,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEA,KAAK,GAAI,cAAc,CAAC,CACjD,CAEA,MAAQ,MAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAC/B,CAAC,CAED,MAAO,MAAM,CAAAG,gBAAgB,CAAG,KAAO,CAAAC,KAAa,EAAwB,CAC1E,KAAM,CAAAd,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,YAAY,aAAY,CACtDQ,OAAO,CAAE,CACPW,aAAa,WAAAb,MAAA,CAAYY,KAAK,CAChC,CACF,CAAC,CAAC,CACF,GAAI,CAACd,QAAQ,CAACQ,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAI,KAAK,CAAC,iBAAiB,CAAC,CACpC,CACA,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAhB,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClC,MAAO,CAAAM,IAAI,CAACC,IAAI,CAClB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}