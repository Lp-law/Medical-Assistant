{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect,useCallback}from'react';import{saveBookChapter,saveGlobalPrecedent,getKnowledgeBase}from'../services/knowledgeBase';import{uploadChapterPdf,isApiConfigured,listCases as apiListCases,getCase as apiGetCase,renewCase as apiRenewCase,archiveCase as apiArchiveCase,deleteCase as apiDeleteCase,exportCaseFile as apiExportCaseFile,updateCaseMetadata as apiUpdateCaseMetadata,listNotifications as apiListNotifications,markNotificationRead as apiMarkNotificationRead}from'../services/api';import{listKnowledgeDocuments,getKnowledgeDocument}from'../services/knowledgeApi';import{Book,Gavel,LogOut,Save,Layout,UploadCloud,Loader2,Activity,AlertTriangle,Bell}from'lucide-react';import QualityBadge from'./QualityBadge';import KnowledgeClaimsPanel from'./KnowledgeClaimsPanel';import KnowledgeFlags from'./KnowledgeFlags';import MedicalTimeline from'./MedicalTimeline';import MedicalQualityBox from'./MedicalQualityBox';import LiteraturePanel from'./LiteraturePanel';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=_ref=>{var _medicalDetail$qualit,_medicalDetail$reason,_medicalDetail$litera;let{currentUserName,onEditCase:_onEditCase,onLogout}=_ref;const[activeTab,setActiveTab]=useState('knowledge');const[brain,setBrain]=useState(getKnowledgeBase());const[newChapter,setNewChapter]=useState({title:'',content:'',tags:[],rules:[]});const[newPrecedent,setNewPrecedent]=useState({caseName:'',keyTakeaway:'',tags:[]});const[importing,setImporting]=useState(false);const[importMessage,setImportMessage]=useState('');const[importInsights,setImportInsights]=useState([]);const[dragActive,setDragActive]=useState(false);const fileInputRef=useRef(null);const[medicalDocs,setMedicalDocs]=useState([]);const[selectedMedicalId,setSelectedMedicalId]=useState('');const[medicalDetail,setMedicalDetail]=useState(null);const[medicalInitialized,setMedicalInitialized]=useState(false);const[medicalListLoading,setMedicalListLoading]=useState(false);const[medicalDetailLoading,setMedicalDetailLoading]=useState(false);const[medicalError,setMedicalError]=useState(null);const[caseLists,setCaseLists]=useState({ownCases:[],otherCases:[]});const[caseListLoading,setCaseListLoading]=useState(false);const[caseListError,setCaseListError]=useState(null);const[caseTabFilter,setCaseTabFilter]=useState('own');const[selectedCase,setSelectedCase]=useState(null);const[subjectDraft,setSubjectDraft]=useState('');const[otherCaseExpanded,setOtherCaseExpanded]=useState(null);const[notifications,setNotifications]=useState([]);const[notificationsError,setNotificationsError]=useState(null);const handleSaveChapter=()=>{if(!newChapter.title||!newChapter.content){alert('חובה למלא כותרת ותוכן');return;}const chapter={id:Date.now().toString(),title:newChapter.title,content:newChapter.content,tags:newChapter.tags||[],rules:newChapter.rules||[]};saveBookChapter(chapter);setBrain(getKnowledgeBase());setNewChapter({title:'',content:'',tags:[],rules:[]});};const handleSavePrecedent=()=>{if(!newPrecedent.caseName||!newPrecedent.keyTakeaway){alert('חובה למלא שם ותובנה');return;}const precedent={id:Date.now().toString(),caseName:newPrecedent.caseName,keyTakeaway:newPrecedent.keyTakeaway,citation:newPrecedent.citation||'',tags:newPrecedent.tags||[],relevantIssues:[]};saveGlobalPrecedent(precedent);setBrain(getKnowledgeBase());setNewPrecedent({caseName:'',keyTakeaway:'',tags:[]});};const importChapterFile=async file=>{setImporting(true);setImportMessage(\"\\u05DE\\u05E2\\u05DC\\u05D4 \\u05D0\\u05EA \\\"\".concat(file.name,\"\\\" \\u05DC\\u05E2\\u05D9\\u05D1\\u05D5\\u05D3...\"));setImportInsights([]);try{if(!isApiConfigured()){setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');return;}const backendResult=await uploadChapterPdf(file,{docType:'chapter'});const chapter={id:backendResult.id,title:backendResult.title,content:backendResult.content||backendResult.summary,tags:backendResult.tags||[],rules:backendResult.rules||[]};saveBookChapter(chapter);setBrain(getKnowledgeBase());setNewChapter(chapter);setImportInsights(backendResult.insights||[]);setImportMessage(\"\\u05D4\\u05E4\\u05E8\\u05E7 \\\"\".concat(chapter.title,\"\\\" \\u05E2\\u05D5\\u05BC\\u05D1\\u05D3 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4 \\u05D3\\u05E8\\u05DA \\u05D4\\u05E9\\u05E8\\u05EA \\u05D5\\u05E0\\u05E9\\u05DE\\u05E8 \\u05D1\\u05DE\\u05D0\\u05D2\\u05E8.\"));}catch(error){console.error(error);setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');}finally{setImporting(false);if(fileInputRef.current)fileInputRef.current.value='';}};const handlePdfSelection=files=>{if(!files||!files.length)return;const file=files[0];if(file.type!=='application/pdf'){setImportMessage('נא לבחור קובץ PDF בלבד.');return;}importChapterFile(file);};const handleDrop=event=>{event.preventDefault();setDragActive(false);handlePdfSelection(event.dataTransfer.files);};const handleDrag=event=>{event.preventDefault();if(event.type==='dragover'){setDragActive(true);}else if(event.type==='dragleave'){setDragActive(false);}};const triggerFilePicker=()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const refreshCaseLists=useCallback(async()=>{setCaseListLoading(true);setCaseListError(null);try{const payload=await apiListCases();setCaseLists(payload);if(selectedCase&&!payload.ownCases.find(entry=>entry.id===selectedCase.id)){setSelectedCase(null);}}catch(error){console.error(error);setCaseListError('טעינת התיקים נכשלה.');}finally{setCaseListLoading(false);}},[selectedCase]);const refreshNotifications=useCallback(async()=>{try{const items=await apiListNotifications();setNotifications(items);setNotificationsError(null);}catch(error){console.error(error);setNotificationsError('טעינת ההתראות נכשלה.');}},[]);const handleSelectCaseDetail=useCallback(async caseId=>{setCaseListLoading(true);setCaseListError(null);try{var _detail$topicSummary;const detail=await apiGetCase(caseId);setSelectedCase(detail);setSubjectDraft((_detail$topicSummary=detail.topicSummary)!==null&&_detail$topicSummary!==void 0?_detail$topicSummary:'');}catch(error){console.error(error);setCaseListError('טעינת פרטי התיק נכשלה.');}finally{setCaseListLoading(false);}},[]);const handleExportCase=async(caseId,format)=>{try{const blob=await apiExportCaseFile(caseId,format);const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"case-\".concat(caseId,\".\").concat(format==='pdf'?'pdf':'json');document.body.appendChild(link);link.click();link.remove();URL.revokeObjectURL(url);}catch(error){console.error(error);setCaseListError('ייצוא התיק נכשל.');}};const handleRenewCase=async caseId=>{try{await apiRenewCase(caseId);await refreshCaseLists();if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseId){var _detail$topicSummary2;const detail=await apiGetCase(caseId);setSelectedCase(detail);setSubjectDraft((_detail$topicSummary2=detail.topicSummary)!==null&&_detail$topicSummary2!==void 0?_detail$topicSummary2:'');}}catch(error){console.error(error);setCaseListError('חידוש התיק נכשל.');}};const handleArchiveCase=async caseRecord=>{try{if(caseRecord.status==='ARCHIVED'){await apiRenewCase(caseRecord.id);}else{await apiArchiveCase(caseRecord.id);}await refreshCaseLists();if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseRecord.id){const detail=await apiGetCase(caseRecord.id);setSelectedCase(detail);}}catch(error){console.error(error);setCaseListError('עדכון מצב הארכיון נכשל.');}};const handleDeleteCase=async caseId=>{if(!window.confirm('האם למחוק את התיק באופן סופי? פעולה זו אינה ניתנת לשחזור.'))return;try{await apiDeleteCase(caseId);if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseId){setSelectedCase(null);}await refreshCaseLists();}catch(error){console.error(error);setCaseListError('מחיקת התיק נכשלה.');}};const handleSaveMetadata=async()=>{if(!selectedCase)return;try{const updated=await apiUpdateCaseMetadata(selectedCase.id,{topicSummary:subjectDraft.trim()||undefined});setSelectedCase(updated);await refreshCaseLists();}catch(error){console.error(error);setCaseListError('עדכון הנושא נכשל.');}};const handleMarkNotification=async notificationId=>{try{await apiMarkNotificationRead(notificationId);await refreshNotifications();}catch(error){console.error(error);setNotificationsError('סימון ההתראה נכשל.');}};useEffect(()=>{if(activeTab!=='medical'||medicalInitialized)return;let cancelled=false;const loadDocuments=async()=>{setMedicalListLoading(true);setMedicalError(null);try{const docs=await listKnowledgeDocuments({docType:'chapter',limit:25});if(!cancelled){var _docs$0$id,_docs$;setMedicalDocs(docs);setSelectedMedicalId((_docs$0$id=(_docs$=docs[0])===null||_docs$===void 0?void 0:_docs$.id)!==null&&_docs$0$id!==void 0?_docs$0$id:'');setMedicalInitialized(true);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');}}finally{if(!cancelled){setMedicalListLoading(false);}}};loadDocuments();return()=>{cancelled=true;};},[activeTab,medicalInitialized]);useEffect(()=>{if(activeTab!=='cases')return;refreshCaseLists();refreshNotifications();},[activeTab,refreshCaseLists,refreshNotifications]);useEffect(()=>{if(activeTab!=='medical')return;if(!selectedMedicalId){setMedicalDetail(null);return;}let cancelled=false;setMedicalDetailLoading(true);setMedicalError(null);const loadDetail=async()=>{try{const doc=await getKnowledgeDocument(selectedMedicalId);if(!cancelled){setMedicalDetail(doc);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת ניתוח רפואי נכשלה.');setMedicalDetail(null);}}finally{if(!cancelled){setMedicalDetailLoading(false);}}};loadDetail();return()=>{cancelled=true;};},[activeTab,selectedMedicalId]);const refreshMedicalDetail=useCallback(async()=>{if(!selectedMedicalId)return;try{const doc=await getKnowledgeDocument(selectedMedicalId);setMedicalDetail(doc);}catch(error){console.error(error);setMedicalError('טעינת הניתוח הרפואי נכשלה.');}},[selectedMedicalId]);const knowledgeView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-xl p-6 bg-slate-50 text-center transition \".concat(dragActive?'border-blue-500 bg-blue-50/40':'border-slate-200'),onDragOver:handleDrag,onDragLeave:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,className:\"hidden\",accept:\"application/pdf\",onChange:event=>handlePdfSelection(event.target.files)}),/*#__PURE__*/_jsx(UploadCloud,{className:\"w-10 h-10 text-slate-400 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-slate-800\",children:\"\\u05D2\\u05E8\\u05E8\\u05D5 \\u05E7\\u05D5\\u05D1\\u05E5 PDF \\u05E9\\u05DC \\u05E4\\u05E8\\u05E7 \\\"\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\\u05D9 \\u05E0\\u05D6\\u05E7\\\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500 mt-2\",children:\"\\u05D4\\u05E7\\u05D1\\u05E6\\u05D9\\u05DD \\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D9\\u05DD \\u05D5\\u05DE\\u05E0\\u05D5\\u05E1\\u05D7\\u05D9\\u05DD \\u05D1\\u05E9\\u05E8\\u05EA \\u05D4\\u05DE\\u05D0\\u05D5\\u05D1\\u05D8\\u05D7 \\u2013 \\u05DB\\u05D5\\u05DC\\u05DC \\u05E8\\u05D9\\u05E9\\u05D5\\u05DD Audit \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:triggerFilePicker,className:\"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition\",disabled:importing,children:\"\\u05D1\\u05D7\\u05E8 \\u05E7\\u05D5\\u05D1\\u05E5 PDF\"}),importing&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-600\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 animate-spin\"}),\"\\u05DE\\u05E2\\u05D1\\u05D3 \\u05E7\\u05D5\\u05D1\\u05E5...\"]})]}),importMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600 mt-3\",children:importMessage}),importInsights.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold text-slate-500 mb-2\",children:\"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D5\\u05EA \\u05E9\\u05D4\\u05D5\\u05E4\\u05E7\\u05D5:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1 text-sm text-slate-600\",children:importInsights.map(insight=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded px-3 py-2 bg-white\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[insight.title,\": \"]}),insight.content]},insight.title))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",onSubmit:e=>{e.preventDefault();handleSaveChapter();},children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-5 h-5 text-blue-600\"}),\" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05E4\\u05E8\\u05E7 \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA \\u05D4\\u05E4\\u05E8\\u05E7\",value:newChapter.title||'',onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-24\",placeholder:\"\\u05EA\\u05D5\\u05DB\\u05DF / \\u05EA\\u05E7\\u05E6\\u05D9\\u05E8\",value:newChapter.content||'',onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{content:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",value:(newChapter.tags||[]).join(', '),onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-20 text-sm\",placeholder:\"\\u05DB\\u05DC\\u05DC\\u05D9\\u05DD (\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4 \\u05DB\\u05DC\\u05DC \\u05D7\\u05D3\\u05E9)\",value:(newChapter.rules||[]).join('\\n'),onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{rules:e.target.value.split('\\n').map(rule=>rule.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05E4\\u05E8\\u05E7\"]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",onSubmit:e=>{e.preventDefault();handleSavePrecedent();},children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"w-5 h-5 text-purple-600\"}),\" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05E9\\u05DD \\u05D4\\u05D4\\u05DC\\u05D9\\u05DA / \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\",value:newPrecedent.caseName||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{caseName:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-24\",placeholder:\"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D4 \\u05DE\\u05E8\\u05DB\\u05D6\\u05D9\\u05EA\",value:newPrecedent.keyTakeaway||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{keyTakeaway:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05E6\\u05D9\\u05D5\\u05DF / \\u05DE\\u05E7\\u05D5\\u05E8\",value:newPrecedent.citation||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{citation:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",value:(newPrecedent.tags||[]).join(', '),onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded shadow border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-4 h-4 text-blue-600\"}),\" \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E7\\u05D9\\u05D9\\u05DE\\u05D9\\u05DD (\",brain.book.length,\")\"]}),brain.book.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:brain.book.slice(0,4).map(chapter=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-slate-800\",children:chapter.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\",children:chapter.content})]},chapter.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded shadow border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"w-4 h-4 text-purple-600\"}),\" \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD (\",brain.precedents.length,\")\"]}),brain.precedents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:brain.precedents.slice(0,4).map(precedent=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-slate-800\",children:precedent.caseName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\",children:precedent.keyTakeaway})]},precedent.id))})]})]})]});const caseStatusLabel={ACTIVE:'פעיל',ARCHIVED:'בארכיון',PENDING_DELETE:'ממתין למחיקה'};const caseStatusStyle={ACTIVE:'bg-emerald-50 text-emerald-700',ARCHIVED:'bg-slate-100 text-slate-600',PENDING_DELETE:'bg-rose-50 text-rose-700'};const renderStatusBadge=status=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center rounded px-2 py-0.5 text-xs font-semibold \".concat(caseStatusStyle[status]),children:caseStatusLabel[status]});const renderDaysIndicator=days=>{if(days===undefined)return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-500\",children:\"\\u05DC\\u05DC\\u05D0 \\u05DE\\u05D9\\u05D3\\u05E2\"});if(days===0){return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-rose-600 font-semibold\",children:\"\\u05E4\\u05D7\\u05D5\\u05EA \\u05DE-24 \\u05E9\\u05E2\\u05D5\\u05EA \\u05DC\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4\"});}const tone=days<=3?'text-rose-600 font-semibold':days<=15?'text-amber-600 font-semibold':'text-slate-500';return/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs \".concat(tone),children:[\"\\u05E0\\u05D5\\u05EA\\u05E8\\u05D5 \",days,\" \\u05D9\\u05DE\\u05D9\\u05DD\"]});};const casesView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded shadow border border-slate-200 flex flex-col gap-2\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Layout,{className:\"w-5 h-5 text-emerald-600\"}),\" \\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600\",children:\"\\u05DB\\u05DC \\u05D4\\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\\u05D9\\u05DD \\u05D9\\u05DB\\u05D5\\u05DC\\u05D9\\u05DD \\u05DC\\u05DC\\u05DE\\u05D5\\u05D3 \\u05DE\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D9\\u05DD, \\u05D0\\u05DA \\u05E8\\u05E7 \\u05D9\\u05D5\\u05E6\\u05E8 \\u05D4\\u05EA\\u05D9\\u05E7 \\u05E8\\u05E9\\u05D0\\u05D9 \\u05DC\\u05E2\\u05E8\\u05D5\\u05DA, \\u05DC\\u05D7\\u05D3\\u05E9 \\u05D0\\u05D5 \\u05DC\\u05DE\\u05D7\\u05D5\\u05E7. \\u05DE\\u05D9\\u05D3\\u05E2 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9 \\u05E0\\u05E9\\u05D0\\u05E8 \\u05D7\\u05E1\\u05D5\\u05D9.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-xs text-slate-500\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-4 h-4 text-amber-500\"}),\"\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4 \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9\\u05EA \\u05DE\\u05EA\\u05D1\\u05E6\\u05E2\\u05EA \\u05DC\\u05D0\\u05D7\\u05E8 90 \\u05D9\\u05D5\\u05DD \\u2013 \\u05DE\\u05D5\\u05DE\\u05DC\\u05E5 \\u05DC\\u05D9\\u05D9\\u05E6\\u05D0 \\u05D0\\u05D5 \\u05DC\\u05D0\\u05E8\\u05DB\\u05D1 \\u05DE\\u05D1\\u05E2\\u05D5\\u05D3 \\u05DE\\u05D5\\u05E2\\u05D3.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6 lg:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"rounded px-3 py-1 text-sm \".concat(caseTabFilter==='own'?'bg-slate-900 text-white':'bg-white border border-slate-300 text-slate-600'),onClick:()=>setCaseTabFilter('own'),children:[\"\\u05D4\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05E9\\u05DC\\u05D9 (\",caseLists.ownCases.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"rounded px-3 py-1 text-sm \".concat(caseTabFilter==='others'?'bg-slate-900 text-white':'bg-white border border-slate-300 text-slate-600'),onClick:()=>setCaseTabFilter('others'),children:[\"\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D9\\u05DD (\",caseLists.otherCases.length,\")\"]})]}),caseListError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-rose-200 bg-rose-50 p-2 text-sm text-rose-700\",children:caseListError}),caseListLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-500\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin\"}),\" \\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD...\"]}),!caseListLoading&&caseTabFilter==='own'&&/*#__PURE__*/_jsxs(_Fragment,{children:[caseLists.ownCases.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D1\\u05D1\\u05E2\\u05DC\\u05D5\\u05EA\\u05DA. \\u05E0\\u05D9\\u05EA\\u05DF \\u05DC\\u05D9\\u05E6\\u05D5\\u05E8 \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D7\\u05D3\\u05E9\\u05D9\\u05DD \\u05DE\\u05DE\\u05E1\\u05DA \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4 \\u05D4\\u05E8\\u05D0\\u05E9\\u05D9.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:caseLists.ownCases.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"rounded border border-slate-200 bg-white p-4 shadow-sm space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-base font-semibold text-slate-800\",children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:item.topicSummary})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-start md:items-end gap-1\",children:[renderStatusBadge(item.status),renderDaysIndicator(item.daysRemaining)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 text-xs text-slate-500\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E0\\u05D5\\u05E6\\u05E8: \",new Date(item.createdAt).toLocaleDateString('he-IL')]}),item.lastAccessedAt&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF: \",new Date(item.lastAccessedAt).toLocaleDateString('he-IL')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 pt-2 text-sm\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\",onClick:()=>handleSelectCaseDetail(item.id),children:\"\\u05E4\\u05EA\\u05D7\"}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\",onClick:()=>handleExportCase(item.id,'pdf'),children:\"\\u05D9\\u05D9\\u05E6\\u05D0 PDF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\",onClick:()=>handleExportCase(item.id,'json'),children:\"\\u05D9\\u05D9\\u05E6\\u05D0 JSON\"}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\",onClick:()=>handleRenewCase(item.id),children:\"\\u05D7\\u05D3\\u05E9 \\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\",onClick:()=>handleArchiveCase(item),children:item.status==='ARCHIVED'?'בטל ארכוב':'העבר לארכיון'}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded border border-rose-200 px-3 py-1 text-rose-600 hover:bg-rose-50\",onClick:()=>handleDeleteCase(item.id),children:\"\\u05DE\\u05D7\\u05E7\"})]})]},item.id))})]}),!caseListLoading&&caseTabFilter==='others'&&/*#__PURE__*/_jsxs(_Fragment,{children:[caseLists.otherCases.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D7\\u05D9\\u05E6\\u05D5\\u05E0\\u05D9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD \\u05DC\\u05E6\\u05E4\\u05D9\\u05D9\\u05D4.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:caseLists.otherCases.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"rounded border border-slate-200 bg-white p-4 shadow-sm space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-slate-800\",children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:otherCaseExpanded===item.id?item.topicSummary:\"\".concat(item.topicSummary.slice(0,80),\"...\")})]}),/*#__PURE__*/_jsx(\"span\",{className:\"rounded bg-slate-100 px-2 py-0.5 text-[11px] text-slate-600\",children:\"\\u05DE\\u05D5\\u05E8\\u05D4 \\u05D1\\u05DC\\u05D1\\u05D3\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-xs text-blue-600 hover:text-blue-800\",onClick:()=>setOtherCaseExpanded(otherCaseExpanded===item.id?null:item.id),children:otherCaseExpanded===item.id?'הסתר נושא':'צפה בנושא'})]},item.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded shadow border border-slate-200 p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 flex items-center gap-2 text-slate-800\",children:[/*#__PURE__*/_jsx(Layout,{className:\"w-4 h-4 text-emerald-600\"}),\" \\u05E4\\u05E8\\u05D8\\u05D9 \\u05EA\\u05D9\\u05E7\"]}),selectedCase?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm text-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:selectedCase.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2\",children:renderStatusBadge(selectedCase.status)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs\",children:renderDaysIndicator(selectedCase.daysRemaining)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-500\",children:\"\\u05E0\\u05D5\\u05E9\\u05D0 \\u05D1\\u05D8\\u05D5\\u05D7\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\",rows:3,value:subjectDraft,onChange:e=>setSubjectDraft(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 rounded bg-slate-900 px-3 py-1 text-xs text-white\",onClick:handleSaveMetadata,children:\"\\u05E2\\u05D3\\u05DB\\u05DF \\u05E0\\u05D5\\u05E9\\u05D0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-500\",children:[\"\\u05E0\\u05D5\\u05E6\\u05E8 \\u05D1-\",new Date(selectedCase.createdAt).toLocaleString('he-IL')]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"\\u05D1\\u05D7\\u05E8 \\u05EA\\u05D9\\u05E7 \\u05DE\\u05D4\\u05E8\\u05E9\\u05D9\\u05DE\\u05D4 \\u05DC\\u05D4\\u05E6\\u05D2\\u05EA \\u05E4\\u05E8\\u05D8\\u05D9\\u05DD.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded shadow border border-slate-200 p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 flex items-center gap-2 text-slate-800\",children:[/*#__PURE__*/_jsx(Bell,{className:\"w-4 h-4 text-amber-600\"}),\" \\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA \\u05E9\\u05DE\\u05D9\\u05E8\\u05D4\"]}),notificationsError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-rose-200 bg-rose-50 p-2 text-xs text-rose-700\",children:notificationsError}),notifications.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA \\u05E4\\u05E2\\u05D9\\u05DC\\u05D5\\u05EA.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2 text-sm\",children:notifications.map(notification=>/*#__PURE__*/_jsxs(\"li\",{className:\"rounded border border-slate-100 bg-slate-50 p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-700\",children:notification.message}),!notification.readAt&&/*#__PURE__*/_jsx(\"button\",{className:\"text-xs text-blue-600 hover:text-blue-800\",onClick:()=>handleMarkNotification(notification.id),children:\"\\u05E1\\u05DE\\u05DF \\u05DB\\u05E0\\u05E7\\u05E8\\u05D0\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[11px] text-slate-500\",children:new Date(notification.createdAt).toLocaleString('he-IL')})]},notification.id))})]})]})]})]});const medicalView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4 md:flex-row md:items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-500\",children:\"\\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\",value:selectedMedicalId,onChange:e=>setSelectedMedicalId(e.target.value),disabled:!medicalDocs.length||medicalListLoading,children:[medicalDocs.map(doc=>/*#__PURE__*/_jsx(\"option\",{value:doc.id,children:doc.title},doc.id)),!medicalDocs.length&&/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/3\",children:/*#__PURE__*/_jsx(QualityBadge,{score:medicalDetail===null||medicalDetail===void 0?void 0:medicalDetail.score})})]}),medicalError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\",children:medicalError}),(medicalListLoading||medicalDetailLoading)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-500\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin\"}),\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9...\"]}),!medicalListLoading&&!medicalDetail&&!medicalError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD \\u05DC\\u05D4\\u05E6\\u05D2\\u05D4.\"}),medicalDetail&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MedicalQualityBox,{score:medicalDetail.medicalQualityScore,findings:(_medicalDetail$qualit=medicalDetail.qualityFindings)!==null&&_medicalDetail$qualit!==void 0?_medicalDetail$qualit:[],reasoningFindings:(_medicalDetail$reason=medicalDetail.reasoningFindings)!==null&&_medicalDetail$reason!==void 0?_medicalDetail$reason:[]}),/*#__PURE__*/_jsx(KnowledgeFlags,{flags:medicalDetail.flags||[]}),/*#__PURE__*/_jsx(KnowledgeClaimsPanel,{claims:medicalDetail.claims||[],limit:5}),/*#__PURE__*/_jsx(MedicalTimeline,{events:medicalDetail.timeline||[]}),/*#__PURE__*/_jsx(LiteraturePanel,{knowledgeId:medicalDetail.id,resources:(_medicalDetail$litera=medicalDetail.literatureResources)!==null&&_medicalDetail$litera!==void 0?_medicalDetail$litera:[],onRefresh:refreshMedicalDetail})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-slate-100 text-slate-900 font-sans\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"bg-slate-900 text-white p-6 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold serif\",children:\"LexMedical Admin\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onLogout,className:\"flex items-center gap-2 hover:text-red-400\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\" \\u05D9\\u05E6\\u05D9\\u05D0\\u05D4\"]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-6xl mx-auto p-8 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-600\",children:[\"\\u05DE\\u05D7\\u05D5\\u05D1\\u05E8 \\u05DB- \",currentUserName]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-400\",children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF \\u05DC\\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D4: \",new Date(brain.lastUpdated).toLocaleString('he-IL')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('knowledge'),className:\"px-4 py-2 rounded border text-sm flex items-center gap-2 \".concat(activeTab==='knowledge'?'bg-slate-900 text-white border-slate-900':'border-slate-300 text-slate-600'),children:[/*#__PURE__*/_jsx(Book,{className:\"w-4 h-4\"}),\" \\u05D9\\u05D3\\u05E2\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('cases'),className:\"px-4 py-2 rounded border text-sm flex items-center gap-2 \".concat(activeTab==='cases'?'bg-slate-900 text-white border-slate-900':'border-slate-300 text-slate-600'),children:[/*#__PURE__*/_jsx(Layout,{className:\"w-4 h-4\"}),\" \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('medical'),className:\"px-4 py-2 rounded border text-sm flex items-center gap-2 \".concat(activeTab==='medical'?'bg-slate-900 text-white border-slate-900':'border-slate-300 text-slate-600'),children:[/*#__PURE__*/_jsx(Activity,{className:\"w-4 h-4\"}),\" Medical Analysis\"]})]})]}),activeTab==='knowledge'&&knowledgeView,activeTab==='cases'&&casesView,activeTab==='medical'&&medicalView]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","saveBookChapter","saveGlobalPrecedent","getKnowledgeBase","uploadChapterPdf","isApiConfigured","listCases","apiListCases","getCase","apiGetCase","renewCase","apiRenewCase","archiveCase","apiArchiveCase","deleteCase","apiDeleteCase","exportCaseFile","apiExportCaseFile","updateCaseMetadata","apiUpdateCaseMetadata","listNotifications","apiListNotifications","markNotificationRead","apiMarkNotificationRead","listKnowledgeDocuments","getKnowledgeDocument","Book","Gavel","LogOut","Save","Layout","UploadCloud","Loader2","Activity","AlertTriangle","Bell","QualityBadge","KnowledgeClaimsPanel","KnowledgeFlags","MedicalTimeline","MedicalQualityBox","LiteraturePanel","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","_ref","_medicalDetail$qualit","_medicalDetail$reason","_medicalDetail$litera","currentUserName","onEditCase","_onEditCase","onLogout","activeTab","setActiveTab","brain","setBrain","newChapter","setNewChapter","title","content","tags","rules","newPrecedent","setNewPrecedent","caseName","keyTakeaway","importing","setImporting","importMessage","setImportMessage","importInsights","setImportInsights","dragActive","setDragActive","fileInputRef","medicalDocs","setMedicalDocs","selectedMedicalId","setSelectedMedicalId","medicalDetail","setMedicalDetail","medicalInitialized","setMedicalInitialized","medicalListLoading","setMedicalListLoading","medicalDetailLoading","setMedicalDetailLoading","medicalError","setMedicalError","caseLists","setCaseLists","ownCases","otherCases","caseListLoading","setCaseListLoading","caseListError","setCaseListError","caseTabFilter","setCaseTabFilter","selectedCase","setSelectedCase","subjectDraft","setSubjectDraft","otherCaseExpanded","setOtherCaseExpanded","notifications","setNotifications","notificationsError","setNotificationsError","handleSaveChapter","alert","chapter","id","Date","now","toString","handleSavePrecedent","precedent","citation","relevantIssues","importChapterFile","file","concat","name","backendResult","docType","summary","insights","error","console","current","value","handlePdfSelection","files","length","type","handleDrop","event","preventDefault","dataTransfer","handleDrag","triggerFilePicker","_fileInputRef$current","click","refreshCaseLists","payload","find","entry","refreshNotifications","items","handleSelectCaseDetail","caseId","_detail$topicSummary","detail","topicSummary","handleExportCase","format","blob","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","remove","revokeObjectURL","handleRenewCase","_detail$topicSummary2","handleArchiveCase","caseRecord","status","handleDeleteCase","window","confirm","handleSaveMetadata","updated","trim","undefined","handleMarkNotification","notificationId","cancelled","loadDocuments","docs","limit","_docs$0$id","_docs$","loadDetail","doc","refreshMedicalDetail","knowledgeView","className","children","onDragOver","onDragLeave","onDrop","ref","accept","onChange","target","onClick","disabled","map","insight","onSubmit","e","placeholder","prev","_objectSpread","join","split","tag","filter","Boolean","rule","book","slice","precedents","caseStatusLabel","ACTIVE","ARCHIVED","PENDING_DELETE","caseStatusStyle","renderStatusBadge","renderDaysIndicator","days","tone","casesView","item","daysRemaining","createdAt","toLocaleDateString","lastAccessedAt","rows","toLocaleString","notification","message","readAt","medicalView","score","medicalQualityScore","findings","qualityFindings","reasoningFindings","flags","claims","events","timeline","knowledgeId","resources","literatureResources","onRefresh","dir","lastUpdated"],"sources":["C:/Office-Apps/LexMedical-App/src/components/AdminDashboard.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport {\r\n  BookChapter,\r\n  GlobalPrecedent,\r\n  CaseData,\r\n  CaseRecord,\r\n  CaseSummaryRecord,\r\n  NotificationRecord,\r\n  AIInsight,\r\n  KnowledgeDocumentSummary,\r\n  KnowledgeDocumentDetail,\r\n} from '../types';\r\nimport { saveBookChapter, saveGlobalPrecedent, getKnowledgeBase } from '../services/knowledgeBase';\r\nimport {\r\n  uploadChapterPdf,\r\n  isApiConfigured,\r\n  listCases as apiListCases,\r\n  getCase as apiGetCase,\r\n  renewCase as apiRenewCase,\r\n  archiveCase as apiArchiveCase,\r\n  deleteCase as apiDeleteCase,\r\n  exportCaseFile as apiExportCaseFile,\r\n  updateCaseMetadata as apiUpdateCaseMetadata,\r\n  listNotifications as apiListNotifications,\r\n  markNotificationRead as apiMarkNotificationRead,\r\n} from '../services/api';\r\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\r\nimport { Book, Gavel, LogOut, Save, Layout, UploadCloud, Loader2, Activity, AlertTriangle, Bell } from 'lucide-react';\r\nimport QualityBadge from './QualityBadge';\r\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\r\nimport KnowledgeFlags from './KnowledgeFlags';\r\nimport MedicalTimeline from './MedicalTimeline';\r\nimport MedicalQualityBox from './MedicalQualityBox';\r\nimport LiteraturePanel from './LiteraturePanel';\r\n\r\ninterface Props {\r\n  currentUserName: string;\r\n  onEditCase: (caseData: CaseData) => void;\r\n  onLogout: () => void;\r\n}\r\n\r\nconst AdminDashboard: React.FC<Props> = ({ currentUserName, onEditCase: _onEditCase, onLogout }) => {\r\n  const [activeTab, setActiveTab] = useState<'cases' | 'knowledge' | 'medical'>('knowledge');\r\n  const [brain, setBrain] = useState(getKnowledgeBase());\r\n  const [newChapter, setNewChapter] = useState<Partial<BookChapter>>({ title: '', content: '', tags: [], rules: [] });\r\n  const [newPrecedent, setNewPrecedent] = useState<Partial<GlobalPrecedent>>({ caseName: '', keyTakeaway: '', tags: [] });\r\n  const [importing, setImporting] = useState(false);\r\n  const [importMessage, setImportMessage] = useState('');\r\n  const [importInsights, setImportInsights] = useState<AIInsight[]>([]);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [medicalDocs, setMedicalDocs] = useState<KnowledgeDocumentSummary[]>([]);\r\n  const [selectedMedicalId, setSelectedMedicalId] = useState<string>('');\r\n  const [medicalDetail, setMedicalDetail] = useState<KnowledgeDocumentDetail | null>(null);\r\n  const [medicalInitialized, setMedicalInitialized] = useState(false);\r\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\r\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\r\n  const [medicalError, setMedicalError] = useState<string | null>(null);\r\n  const [caseLists, setCaseLists] = useState<{ ownCases: CaseRecord[]; otherCases: CaseSummaryRecord[] }>({\r\n    ownCases: [],\r\n    otherCases: [],\r\n  });\r\n  const [caseListLoading, setCaseListLoading] = useState(false);\r\n  const [caseListError, setCaseListError] = useState<string | null>(null);\r\n  const [caseTabFilter, setCaseTabFilter] = useState<'own' | 'others'>('own');\r\n  const [selectedCase, setSelectedCase] = useState<CaseRecord | null>(null);\r\n  const [subjectDraft, setSubjectDraft] = useState('');\r\n  const [otherCaseExpanded, setOtherCaseExpanded] = useState<string | null>(null);\r\n  const [notifications, setNotifications] = useState<NotificationRecord[]>([]);\r\n  const [notificationsError, setNotificationsError] = useState<string | null>(null);\r\n\r\n  const handleSaveChapter = () => {\r\n    if (!newChapter.title || !newChapter.content) {\r\n      alert('חובה למלא כותרת ותוכן');\r\n      return;\r\n    }\r\n    const chapter: BookChapter = {\r\n      id: Date.now().toString(),\r\n      title: newChapter.title!,\r\n      content: newChapter.content!,\r\n      tags: newChapter.tags || [],\r\n      rules: newChapter.rules || [],\r\n    };\r\n    saveBookChapter(chapter);\r\n    setBrain(getKnowledgeBase());\r\n    setNewChapter({ title: '', content: '', tags: [], rules: [] });\r\n  };\r\n\r\n  const handleSavePrecedent = () => {\r\n    if (!newPrecedent.caseName || !newPrecedent.keyTakeaway) {\r\n      alert('חובה למלא שם ותובנה');\r\n      return;\r\n    }\r\n    const precedent: GlobalPrecedent = {\r\n      id: Date.now().toString(),\r\n      caseName: newPrecedent.caseName!,\r\n      keyTakeaway: newPrecedent.keyTakeaway!,\r\n      citation: newPrecedent.citation || '',\r\n      tags: newPrecedent.tags || [],\r\n      relevantIssues: [],\r\n    };\r\n    saveGlobalPrecedent(precedent);\r\n    setBrain(getKnowledgeBase());\r\n    setNewPrecedent({ caseName: '', keyTakeaway: '', tags: [] });\r\n  };\r\n\r\n  const importChapterFile = async (file: File) => {\r\n    setImporting(true);\r\n    setImportMessage(`מעלה את \"${file.name}\" לעיבוד...`);\r\n    setImportInsights([]);\r\n    try {\r\n      if (!isApiConfigured()) {\r\n        setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');\r\n        return;\r\n      }\r\n      const backendResult = await uploadChapterPdf(file, { docType: 'chapter' });\r\n      const chapter: BookChapter = {\r\n        id: backendResult.id,\r\n        title: backendResult.title,\r\n        content: backendResult.content || backendResult.summary,\r\n        tags: backendResult.tags || [],\r\n        rules: backendResult.rules || [],\r\n      };\r\n      saveBookChapter(chapter);\r\n      setBrain(getKnowledgeBase());\r\n      setNewChapter(chapter);\r\n      setImportInsights(backendResult.insights || []);\r\n      setImportMessage(`הפרק \"${chapter.title}\" עוּבד בהצלחה דרך השרת ונשמר במאגר.`);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');\r\n    } finally {\r\n      setImporting(false);\r\n      if (fileInputRef.current) fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handlePdfSelection = (files: FileList | null) => {\r\n    if (!files || !files.length) return;\r\n    const file = files[0];\r\n    if (file.type !== 'application/pdf') {\r\n      setImportMessage('נא לבחור קובץ PDF בלבד.');\r\n      return;\r\n    }\r\n    importChapterFile(file);\r\n  };\r\n\r\n  const handleDrop = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    setDragActive(false);\r\n    handlePdfSelection(event.dataTransfer.files);\r\n  };\r\n\r\n  const handleDrag = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    if (event.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (event.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const triggerFilePicker = () => fileInputRef.current?.click();\r\n\r\n  const refreshCaseLists = useCallback(async () => {\r\n    setCaseListLoading(true);\r\n    setCaseListError(null);\r\n    try {\r\n      const payload = await apiListCases();\r\n      setCaseLists(payload);\r\n      if (selectedCase && !payload.ownCases.find((entry) => entry.id === selectedCase.id)) {\r\n        setSelectedCase(null);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('טעינת התיקים נכשלה.');\r\n    } finally {\r\n      setCaseListLoading(false);\r\n    }\r\n  }, [selectedCase]);\r\n\r\n  const refreshNotifications = useCallback(async () => {\r\n    try {\r\n      const items = await apiListNotifications();\r\n      setNotifications(items);\r\n      setNotificationsError(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setNotificationsError('טעינת ההתראות נכשלה.');\r\n    }\r\n  }, []);\r\n\r\n  const handleSelectCaseDetail = useCallback(\r\n    async (caseId: string) => {\r\n      setCaseListLoading(true);\r\n      setCaseListError(null);\r\n      try {\r\n        const detail = await apiGetCase(caseId);\r\n        setSelectedCase(detail);\r\n        setSubjectDraft(detail.topicSummary ?? '');\r\n      } catch (error) {\r\n        console.error(error);\r\n        setCaseListError('טעינת פרטי התיק נכשלה.');\r\n      } finally {\r\n        setCaseListLoading(false);\r\n      }\r\n    },\r\n    [],\r\n  );\r\n\r\n  const handleExportCase = async (caseId: string, format: 'pdf' | 'json') => {\r\n    try {\r\n      const blob = await apiExportCaseFile(caseId, format);\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `case-${caseId}.${format === 'pdf' ? 'pdf' : 'json'}`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('ייצוא התיק נכשל.');\r\n    }\r\n  };\r\n\r\n  const handleRenewCase = async (caseId: string) => {\r\n    try {\r\n      await apiRenewCase(caseId);\r\n      await refreshCaseLists();\r\n      if (selectedCase?.id === caseId) {\r\n        const detail = await apiGetCase(caseId);\r\n        setSelectedCase(detail);\r\n        setSubjectDraft(detail.topicSummary ?? '');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('חידוש התיק נכשל.');\r\n    }\r\n  };\r\n\r\n  const handleArchiveCase = async (caseRecord: CaseRecord) => {\r\n    try {\r\n      if (caseRecord.status === 'ARCHIVED') {\r\n        await apiRenewCase(caseRecord.id);\r\n      } else {\r\n        await apiArchiveCase(caseRecord.id);\r\n      }\r\n      await refreshCaseLists();\r\n      if (selectedCase?.id === caseRecord.id) {\r\n        const detail = await apiGetCase(caseRecord.id);\r\n        setSelectedCase(detail);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('עדכון מצב הארכיון נכשל.');\r\n    }\r\n  };\r\n\r\n  const handleDeleteCase = async (caseId: string) => {\r\n    if (!window.confirm('האם למחוק את התיק באופן סופי? פעולה זו אינה ניתנת לשחזור.')) return;\r\n    try {\r\n      await apiDeleteCase(caseId);\r\n      if (selectedCase?.id === caseId) {\r\n        setSelectedCase(null);\r\n      }\r\n      await refreshCaseLists();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('מחיקת התיק נכשלה.');\r\n    }\r\n  };\r\n\r\n  const handleSaveMetadata = async () => {\r\n    if (!selectedCase) return;\r\n    try {\r\n      const updated = await apiUpdateCaseMetadata(selectedCase.id, { topicSummary: subjectDraft.trim() || undefined });\r\n      setSelectedCase(updated);\r\n      await refreshCaseLists();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('עדכון הנושא נכשל.');\r\n    }\r\n  };\r\n\r\n  const handleMarkNotification = async (notificationId: string) => {\r\n    try {\r\n      await apiMarkNotificationRead(notificationId);\r\n      await refreshNotifications();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setNotificationsError('סימון ההתראה נכשל.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical' || medicalInitialized) return;\r\n    let cancelled = false;\r\n    const loadDocuments = async () => {\r\n      setMedicalListLoading(true);\r\n      setMedicalError(null);\r\n      try {\r\n        const docs = await listKnowledgeDocuments({ docType: 'chapter', limit: 25 });\r\n        if (!cancelled) {\r\n          setMedicalDocs(docs);\r\n          setSelectedMedicalId(docs[0]?.id ?? '');\r\n          setMedicalInitialized(true);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalListLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDocuments();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, medicalInitialized]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'cases') return;\r\n    refreshCaseLists();\r\n    refreshNotifications();\r\n  }, [activeTab, refreshCaseLists, refreshNotifications]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical') return;\r\n    if (!selectedMedicalId) {\r\n      setMedicalDetail(null);\r\n      return;\r\n    }\r\n    let cancelled = false;\r\n    setMedicalDetailLoading(true);\r\n    setMedicalError(null);\r\n    const loadDetail = async () => {\r\n      try {\r\n        const doc = await getKnowledgeDocument(selectedMedicalId);\r\n        if (!cancelled) {\r\n          setMedicalDetail(doc);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת ניתוח רפואי נכשלה.');\r\n          setMedicalDetail(null);\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalDetailLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDetail();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, selectedMedicalId]);\r\n\r\n  const refreshMedicalDetail = useCallback(async () => {\r\n    if (!selectedMedicalId) return;\r\n    try {\r\n      const doc = await getKnowledgeDocument(selectedMedicalId);\r\n      setMedicalDetail(doc);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMedicalError('טעינת הניתוח הרפואי נכשלה.');\r\n    }\r\n  }, [selectedMedicalId]);\r\n\r\n  const knowledgeView = (\r\n    <div className=\"space-y-6\">\r\n      <div\r\n        className={`border-2 border-dashed rounded-xl p-6 bg-slate-50 text-center transition ${\r\n          dragActive ? 'border-blue-500 bg-blue-50/40' : 'border-slate-200'\r\n        }`}\r\n        onDragOver={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          className=\"hidden\"\r\n          accept=\"application/pdf\"\r\n          onChange={(event) => handlePdfSelection(event.target.files)}\r\n        />\r\n        <UploadCloud className=\"w-10 h-10 text-slate-400 mx-auto mb-3\" />\r\n        <p className=\"text-lg font-semibold text-slate-800\">גררו קובץ PDF של פרק \"תחשיבי נזק\"</p>\r\n        <p className=\"text-sm text-slate-500 mt-2\">הקבצים מעובדים ומנוסחים בשרת המאובטח – כולל רישום Audit אוטומטי.</p>\r\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={triggerFilePicker}\r\n            className=\"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition\"\r\n            disabled={importing}\r\n          >\r\n            בחר קובץ PDF\r\n          </button>\r\n          {importing && (\r\n            <div className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              מעבד קובץ...\r\n            </div>\r\n          )}\r\n        </div>\r\n        {importMessage && <p className=\"text-sm text-slate-600 mt-3\">{importMessage}</p>}\r\n        {importInsights.length > 0 && (\r\n          <div className=\"mt-4 text-left\">\r\n            <p className=\"text-xs font-bold text-slate-500 mb-2\">תובנות שהופקו:</p>\r\n            <ul className=\"space-y-1 text-sm text-slate-600\">\r\n              {importInsights.map((insight) => (\r\n                <li key={insight.title} className=\"border border-slate-100 rounded px-3 py-2 bg-white\">\r\n                  <span className=\"font-semibold\">{insight.title}: </span>\r\n                  {insight.content}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid lg:grid-cols-2 gap-6\">\r\n        <form\r\n          className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSaveChapter();\r\n          }}\r\n        >\r\n          <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n            <Book className=\"w-5 h-5 text-blue-600\" /> הוסף פרק חדש\r\n          </h2>\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"כותרת הפרק\"\r\n            value={newChapter.title || ''}\r\n            onChange={(e) => setNewChapter((prev) => ({ ...prev, title: e.target.value }))}\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-24\"\r\n            placeholder=\"תוכן / תקציר\"\r\n            value={newChapter.content || ''}\r\n            onChange={(e) => setNewChapter((prev) => ({ ...prev, content: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"תגיות (מופרדות בפסיק)\"\r\n            value={(newChapter.tags || []).join(', ')}\r\n            onChange={(e) =>\r\n              setNewChapter((prev) => ({\r\n                ...prev,\r\n                tags: e.target.value\r\n                  .split(',')\r\n                  .map((tag) => tag.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-20 text-sm\"\r\n            placeholder=\"כללים (כל שורה כלל חדש)\"\r\n            value={(newChapter.rules || []).join('\\n')}\r\n            onChange={(e) =>\r\n              setNewChapter((prev) => ({\r\n                ...prev,\r\n                rules: e.target.value\r\n                  .split('\\n')\r\n                  .map((rule) => rule.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <button type=\"submit\" className=\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\">\r\n            <Save className=\"w-4 h-4\" /> שמור פרק\r\n          </button>\r\n        </form>\r\n\r\n        <form\r\n          className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSavePrecedent();\r\n          }}\r\n        >\r\n          <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n            <Gavel className=\"w-5 h-5 text-purple-600\" /> הוסף תקדים חדש\r\n          </h2>\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"שם ההליך / תקדים\"\r\n            value={newPrecedent.caseName || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, caseName: e.target.value }))}\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-24\"\r\n            placeholder=\"תובנה מרכזית\"\r\n            value={newPrecedent.keyTakeaway || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, keyTakeaway: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"ציון / מקור\"\r\n            value={newPrecedent.citation || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, citation: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"תגיות (מופרדות בפסיק)\"\r\n            value={(newPrecedent.tags || []).join(', ')}\r\n            onChange={(e) =>\r\n              setNewPrecedent((prev) => ({\r\n                ...prev,\r\n                tags: e.target.value\r\n                  .split(',')\r\n                  .map((tag) => tag.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <button type=\"submit\" className=\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\">\r\n            <Save className=\"w-4 h-4\" /> שמור תקדים\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white p-5 rounded shadow border border-slate-200\">\r\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n            <Book className=\"w-4 h-4 text-blue-600\" /> פרקים קיימים ({brain.book.length})\r\n          </h3>\r\n          {brain.book.length === 0 ? (\r\n            <p className=\"text-sm text-slate-500\">אין פרקים שמורים.</p>\r\n          ) : (\r\n            <ul className=\"space-y-2\">\r\n              {brain.book.slice(0, 4).map((chapter) => (\r\n                <li key={chapter.id} className=\"border border-slate-100 rounded p-3\">\r\n                  <p className=\"font-semibold text-slate-800\">{chapter.title}</p>\r\n                  <p className=\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\">{chapter.content}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n        <div className=\"bg-white p-5 rounded shadow border border-slate-200\">\r\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n            <Gavel className=\"w-4 h-4 text-purple-600\" /> תקדימים ({brain.precedents.length})\r\n          </h3>\r\n          {brain.precedents.length === 0 ? (\r\n            <p className=\"text-sm text-slate-500\">אין תקדימים שמורים.</p>\r\n          ) : (\r\n            <ul className=\"space-y-2\">\r\n              {brain.precedents.slice(0, 4).map((precedent) => (\r\n                <li key={precedent.id} className=\"border border-slate-100 rounded p-3\">\r\n                  <p className=\"font-semibold text-slate-800\">{precedent.caseName}</p>\r\n                  <p className=\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\">{precedent.keyTakeaway}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const caseStatusLabel: Record<'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE', string> = {\r\n    ACTIVE: 'פעיל',\r\n    ARCHIVED: 'בארכיון',\r\n    PENDING_DELETE: 'ממתין למחיקה',\r\n  };\r\n\r\n  const caseStatusStyle: Record<'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE', string> = {\r\n    ACTIVE: 'bg-emerald-50 text-emerald-700',\r\n    ARCHIVED: 'bg-slate-100 text-slate-600',\r\n    PENDING_DELETE: 'bg-rose-50 text-rose-700',\r\n  };\r\n\r\n  const renderStatusBadge = (status: 'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE') => (\r\n    <span className={`inline-flex items-center rounded px-2 py-0.5 text-xs font-semibold ${caseStatusStyle[status]}`}>\r\n      {caseStatusLabel[status]}\r\n    </span>\r\n  );\r\n\r\n  const renderDaysIndicator = (days?: number) => {\r\n    if (days === undefined) return <span className=\"text-xs text-slate-500\">ללא מידע</span>;\r\n    if (days === 0) {\r\n      return <span className=\"text-xs text-rose-600 font-semibold\">פחות מ-24 שעות למחיקה</span>;\r\n    }\r\n    const tone =\r\n      days <= 3 ? 'text-rose-600 font-semibold' : days <= 15 ? 'text-amber-600 font-semibold' : 'text-slate-500';\r\n    return <span className={`text-xs ${tone}`}>נותרו {days} ימים</span>;\r\n  };\r\n\r\n  const casesView = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white p-5 rounded shadow border border-slate-200 flex flex-col gap-2\">\r\n        <h2 className=\"text-xl font-bold flex items-center gap-2\">\r\n          <Layout className=\"w-5 h-5 text-emerald-600\" /> ניהול תיקים\r\n        </h2>\r\n        <p className=\"text-sm text-slate-600\">\r\n          כל המשתמשים יכולים ללמוד מתיקים אחרים, אך רק יוצר התיק רשאי לערוך, לחדש או למחוק. מידע רפואי נשאר חסוי.\r\n        </p>\r\n        <div className=\"flex items-center gap-2 text-xs text-slate-500\">\r\n          <AlertTriangle className=\"w-4 h-4 text-amber-500\" />\r\n          מחיקה אוטומטית מתבצעת לאחר 90 יום – מומלץ לייצא או לארכב מבעוד מועד.\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        <div className=\"lg:col-span-2 space-y-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              className={`rounded px-3 py-1 text-sm ${\r\n                caseTabFilter === 'own' ? 'bg-slate-900 text-white' : 'bg-white border border-slate-300 text-slate-600'\r\n              }`}\r\n              onClick={() => setCaseTabFilter('own')}\r\n            >\r\n              התיקים שלי ({caseLists.ownCases.length})\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className={`rounded px-3 py-1 text-sm ${\r\n                caseTabFilter === 'others'\r\n                  ? 'bg-slate-900 text-white'\r\n                  : 'bg-white border border-slate-300 text-slate-600'\r\n              }`}\r\n              onClick={() => setCaseTabFilter('others')}\r\n            >\r\n              תיקים אחרים ({caseLists.otherCases.length})\r\n            </button>\r\n          </div>\r\n\r\n          {caseListError && (\r\n            <div className=\"rounded border border-rose-200 bg-rose-50 p-2 text-sm text-rose-700\">{caseListError}</div>\r\n          )}\r\n          {caseListLoading && (\r\n            <div className=\"flex items-center gap-2 text-sm text-slate-500\">\r\n              <Loader2 className=\"h-4 w-4 animate-spin\" /> טוען נתוני תיקים...\r\n            </div>\r\n          )}\r\n\r\n          {!caseListLoading && caseTabFilter === 'own' && (\r\n            <>\r\n              {caseLists.ownCases.length === 0 && (\r\n                <div className=\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\">\r\n                  אין תיקים בבעלותך. ניתן ליצור תיקים חדשים ממסך העבודה הראשי.\r\n                </div>\r\n              )}\r\n              <div className=\"space-y-4\">\r\n                {caseLists.ownCases.map((item) => (\r\n                  <div key={item.id} className=\"rounded border border-slate-200 bg-white p-4 shadow-sm space-y-2\">\r\n                    <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\r\n                      <div>\r\n                        <p className=\"text-base font-semibold text-slate-800\">{item.title}</p>\r\n                        <p className=\"text-sm text-slate-500\">{item.topicSummary}</p>\r\n                      </div>\r\n                      <div className=\"flex flex-col items-start md:items-end gap-1\">\r\n                        {renderStatusBadge(item.status)}\r\n                        {renderDaysIndicator(item.daysRemaining)}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap gap-2 text-xs text-slate-500\">\r\n                      <span>נוצר: {new Date(item.createdAt).toLocaleDateString('he-IL')}</span>\r\n                      {item.lastAccessedAt && (\r\n                        <span>עודכן: {new Date(item.lastAccessedAt).toLocaleDateString('he-IL')}</span>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex flex-wrap gap-2 pt-2 text-sm\">\r\n                      <button\r\n                        className=\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\"\r\n                        onClick={() => handleSelectCaseDetail(item.id)}\r\n                      >\r\n                        פתח\r\n                      </button>\r\n                      <button\r\n                        className=\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\"\r\n                        onClick={() => handleExportCase(item.id, 'pdf')}\r\n                      >\r\n                        ייצא PDF\r\n                      </button>\r\n                      <button\r\n                        className=\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\"\r\n                        onClick={() => handleExportCase(item.id, 'json')}\r\n                      >\r\n                        ייצא JSON\r\n                      </button>\r\n                      <button\r\n                        className=\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\"\r\n                        onClick={() => handleRenewCase(item.id)}\r\n                      >\r\n                        חדש תיק\r\n                      </button>\r\n                      <button\r\n                        className=\"rounded border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50\"\r\n                        onClick={() => handleArchiveCase(item)}\r\n                      >\r\n                        {item.status === 'ARCHIVED' ? 'בטל ארכוב' : 'העבר לארכיון'}\r\n                      </button>\r\n                      <button\r\n                        className=\"rounded border border-rose-200 px-3 py-1 text-rose-600 hover:bg-rose-50\"\r\n                        onClick={() => handleDeleteCase(item.id)}\r\n                      >\r\n                        מחק\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {!caseListLoading && caseTabFilter === 'others' && (\r\n            <>\r\n              {caseLists.otherCases.length === 0 && (\r\n                <div className=\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\">\r\n                  אין תיקים חיצוניים זמינים לצפייה.\r\n                </div>\r\n              )}\r\n              <div className=\"space-y-4\">\r\n                {caseLists.otherCases.map((item) => (\r\n                  <div key={item.id} className=\"rounded border border-slate-200 bg-white p-4 shadow-sm space-y-2\">\r\n                    <div className=\"flex items-center justify-between gap-2\">\r\n                      <div>\r\n                        <p className=\"text-sm font-semibold text-slate-800\">{item.title}</p>\r\n                        <p className=\"text-xs text-slate-500\">\r\n                          {otherCaseExpanded === item.id ? item.topicSummary : `${item.topicSummary.slice(0, 80)}...`}\r\n                        </p>\r\n                      </div>\r\n                      <span className=\"rounded bg-slate-100 px-2 py-0.5 text-[11px] text-slate-600\">מורה בלבד</span>\r\n                    </div>\r\n                    <button\r\n                      className=\"text-xs text-blue-600 hover:text-blue-800\"\r\n                      onClick={() => setOtherCaseExpanded(otherCaseExpanded === item.id ? null : item.id)}\r\n                    >\r\n                      {otherCaseExpanded === item.id ? 'הסתר נושא' : 'צפה בנושא'}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div className=\"bg-white rounded shadow border border-slate-200 p-4\">\r\n            <h3 className=\"font-semibold mb-3 flex items-center gap-2 text-slate-800\">\r\n              <Layout className=\"w-4 h-4 text-emerald-600\" /> פרטי תיק\r\n            </h3>\r\n            {selectedCase ? (\r\n              <div className=\"space-y-3 text-sm text-slate-700\">\r\n                <div>\r\n                  <p className=\"text-xs text-slate-500\">כותרת</p>\r\n                  <p className=\"font-semibold\">{selectedCase.title}</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">{renderStatusBadge(selectedCase.status)}</div>\r\n                <div className=\"text-xs\">{renderDaysIndicator(selectedCase.daysRemaining)}</div>\r\n                <div>\r\n                  <label className=\"text-xs font-semibold text-slate-500\">נושא בטוח</label>\r\n                  <textarea\r\n                    className=\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\"\r\n                    rows={3}\r\n                    value={subjectDraft}\r\n                    onChange={(e) => setSubjectDraft(e.target.value)}\r\n                  />\r\n                  <button\r\n                    className=\"mt-2 rounded bg-slate-900 px-3 py-1 text-xs text-white\"\r\n                    onClick={handleSaveMetadata}\r\n                  >\r\n                    עדכן נושא\r\n                  </button>\r\n                </div>\r\n                <div className=\"text-xs text-slate-500\">\r\n                  נוצר ב-{new Date(selectedCase.createdAt).toLocaleString('he-IL')}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-sm text-slate-500\">בחר תיק מהרשימה להצגת פרטים.</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded shadow border border-slate-200 p-4\">\r\n            <h3 className=\"font-semibold mb-3 flex items-center gap-2 text-slate-800\">\r\n              <Bell className=\"w-4 h-4 text-amber-600\" /> התראות שמירה\r\n            </h3>\r\n            {notificationsError && (\r\n              <div className=\"rounded border border-rose-200 bg-rose-50 p-2 text-xs text-rose-700\">{notificationsError}</div>\r\n            )}\r\n            {notifications.length === 0 ? (\r\n              <p className=\"text-sm text-slate-500\">אין התראות פעילות.</p>\r\n            ) : (\r\n              <ul className=\"space-y-2 text-sm\">\r\n                {notifications.map((notification) => (\r\n                  <li key={notification.id} className=\"rounded border border-slate-100 bg-slate-50 p-2\">\r\n                    <div className=\"flex items-center justify-between gap-2\">\r\n                      <span className=\"text-slate-700\">{notification.message}</span>\r\n                      {!notification.readAt && (\r\n                        <button\r\n                          className=\"text-xs text-blue-600 hover:text-blue-800\"\r\n                          onClick={() => handleMarkNotification(notification.id)}\r\n                        >\r\n                          סמן כנקרא\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"text-[11px] text-slate-500\">\r\n                      {new Date(notification.createdAt).toLocaleString('he-IL')}\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const medicalView = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-end\">\r\n        <div className=\"flex-1\">\r\n          <label className=\"text-xs font-semibold text-slate-500\">בחר מסמך רפואי</label>\r\n          <select\r\n            className=\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\"\r\n            value={selectedMedicalId}\r\n            onChange={(e) => setSelectedMedicalId(e.target.value)}\r\n            disabled={!medicalDocs.length || medicalListLoading}\r\n          >\r\n            {medicalDocs.map((doc) => (\r\n              <option key={doc.id} value={doc.id}>\r\n                {doc.title}\r\n              </option>\r\n            ))}\r\n            {!medicalDocs.length && <option value=\"\">אין מסמכים</option>}\r\n          </select>\r\n        </div>\r\n        <div className=\"md:w-1/3\">\r\n          <QualityBadge score={medicalDetail?.score} />\r\n        </div>\r\n      </div>\r\n\r\n      {medicalError && (\r\n        <div className=\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\">{medicalError}</div>\r\n      )}\r\n\r\n      {(medicalListLoading || medicalDetailLoading) && (\r\n        <div className=\"flex items-center gap-2 text-sm text-slate-500\">\r\n          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          טוען נתוני ניתוח רפואי...\r\n        </div>\r\n      )}\r\n\r\n      {!medicalListLoading && !medicalDetail && !medicalError && (\r\n        <div className=\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\">\r\n          אין ניתוחים רפואיים זמינים להצגה.\r\n        </div>\r\n      )}\r\n\r\n      {medicalDetail && (\r\n        <>\r\n          <MedicalQualityBox\r\n            score={medicalDetail.medicalQualityScore}\r\n            findings={medicalDetail.qualityFindings ?? []}\r\n            reasoningFindings={medicalDetail.reasoningFindings ?? []}\r\n          />\r\n          <KnowledgeFlags flags={medicalDetail.flags || []} />\r\n          <KnowledgeClaimsPanel claims={medicalDetail.claims || []} limit={5} />\r\n          <MedicalTimeline events={medicalDetail.timeline || []} />\r\n          <LiteraturePanel\r\n            knowledgeId={medicalDetail.id}\r\n            resources={medicalDetail.literatureResources ?? []}\r\n            onRefresh={refreshMedicalDetail}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-100 text-slate-900 font-sans\" dir=\"rtl\">\r\n      <header className=\"bg-slate-900 text-white p-6 flex justify-between items-center\">\r\n        <h1 className=\"text-2xl font-bold serif\">LexMedical Admin</h1>\r\n        <button onClick={onLogout} className=\"flex items-center gap-2 hover:text-red-400\">\r\n          <LogOut className=\"w-4 h-4\" /> יציאה\r\n        </button>\r\n      </header>\r\n      <main className=\"max-w-6xl mx-auto p-8 space-y-6\">\r\n        <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n          <div>\r\n            <p className=\"text-sm text-slate-600\">מחובר כ- {currentUserName}</p>\r\n            <p className=\"text-xs text-slate-400\">עודכן לאחרונה: {new Date(brain.lastUpdated).toLocaleString('he-IL')}</p>\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => setActiveTab('knowledge')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'knowledge' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Book className=\"w-4 h-4\" /> ידע\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('cases')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'cases' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Layout className=\"w-4 h-4\" /> תיקים\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('medical')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'medical' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Activity className=\"w-4 h-4\" /> Medical Analysis\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {activeTab === 'knowledge' && knowledgeView}\r\n        {activeTab === 'cases' && casesView}\r\n        {activeTab === 'medical' && medicalView}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}