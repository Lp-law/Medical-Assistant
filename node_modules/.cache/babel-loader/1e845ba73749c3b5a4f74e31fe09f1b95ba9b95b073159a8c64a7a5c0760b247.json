{"ast":null,"code":"var _jsxFileName = \"C:\\\\Office-Apps\\\\LexMedical-App\\\\src\\\\components\\\\AdminDashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { saveBookChapter, saveGlobalPrecedent, getKnowledgeBase } from '../services/knowledgeBase';\nimport { uploadChapterPdf, isApiConfigured } from '../services/api';\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\nimport { Book, Gavel, LogOut, Save, Layout, UploadCloud, Loader2, Activity } from 'lucide-react';\nimport QualityBadge from './QualityBadge';\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\nimport KnowledgeFlags from './KnowledgeFlags';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = ({\n  currentUserName,\n  onEditCase: _onEditCase,\n  onLogout\n}) => {\n  _s();\n  const [activeTab, setActiveTab] = useState('knowledge');\n  const [brain, setBrain] = useState(getKnowledgeBase());\n  const [newChapter, setNewChapter] = useState({\n    title: '',\n    content: '',\n    tags: [],\n    rules: []\n  });\n  const [newPrecedent, setNewPrecedent] = useState({\n    caseName: '',\n    keyTakeaway: '',\n    tags: []\n  });\n  const [importing, setImporting] = useState(false);\n  const [importMessage, setImportMessage] = useState('');\n  const [importInsights, setImportInsights] = useState([]);\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef(null);\n  const [medicalDocs, setMedicalDocs] = useState([]);\n  const [selectedMedicalId, setSelectedMedicalId] = useState('');\n  const [medicalDetail, setMedicalDetail] = useState(null);\n  const [medicalInitialized, setMedicalInitialized] = useState(false);\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\n  const [medicalError, setMedicalError] = useState(null);\n  const handleSaveChapter = () => {\n    if (!newChapter.title || !newChapter.content) {\n      alert('חובה למלא כותרת ותוכן');\n      return;\n    }\n    const chapter = {\n      id: Date.now().toString(),\n      title: newChapter.title,\n      content: newChapter.content,\n      tags: newChapter.tags || [],\n      rules: newChapter.rules || []\n    };\n    saveBookChapter(chapter);\n    setBrain(getKnowledgeBase());\n    setNewChapter({\n      title: '',\n      content: '',\n      tags: [],\n      rules: []\n    });\n  };\n  const handleSavePrecedent = () => {\n    if (!newPrecedent.caseName || !newPrecedent.keyTakeaway) {\n      alert('חובה למלא שם ותובנה');\n      return;\n    }\n    const precedent = {\n      id: Date.now().toString(),\n      caseName: newPrecedent.caseName,\n      keyTakeaway: newPrecedent.keyTakeaway,\n      citation: newPrecedent.citation || '',\n      tags: newPrecedent.tags || [],\n      relevantIssues: []\n    };\n    saveGlobalPrecedent(precedent);\n    setBrain(getKnowledgeBase());\n    setNewPrecedent({\n      caseName: '',\n      keyTakeaway: '',\n      tags: []\n    });\n  };\n  const importChapterFile = async file => {\n    setImporting(true);\n    setImportMessage(`מעלה את \"${file.name}\" לעיבוד...`);\n    setImportInsights([]);\n    try {\n      if (!isApiConfigured()) {\n        setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');\n        return;\n      }\n      const backendResult = await uploadChapterPdf(file, {\n        docType: 'chapter'\n      });\n      const chapter = {\n        id: backendResult.id,\n        title: backendResult.title,\n        content: backendResult.content || backendResult.summary,\n        tags: backendResult.tags || [],\n        rules: backendResult.rules || []\n      };\n      saveBookChapter(chapter);\n      setBrain(getKnowledgeBase());\n      setNewChapter(chapter);\n      setImportInsights(backendResult.insights || []);\n      setImportMessage(`הפרק \"${chapter.title}\" עוּבד בהצלחה דרך השרת ונשמר במאגר.`);\n    } catch (error) {\n      console.error(error);\n      setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');\n    } finally {\n      setImporting(false);\n      if (fileInputRef.current) fileInputRef.current.value = '';\n    }\n  };\n  const handlePdfSelection = files => {\n    if (!files || !files.length) return;\n    const file = files[0];\n    if (file.type !== 'application/pdf') {\n      setImportMessage('נא לבחור קובץ PDF בלבד.');\n      return;\n    }\n    importChapterFile(file);\n  };\n  const handleDrop = event => {\n    event.preventDefault();\n    setDragActive(false);\n    handlePdfSelection(event.dataTransfer.files);\n  };\n  const handleDrag = event => {\n    event.preventDefault();\n    if (event.type === 'dragover') {\n      setDragActive(true);\n    } else if (event.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n  const triggerFilePicker = () => {\n    var _fileInputRef$current;\n    return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  useEffect(() => {\n    if (activeTab !== 'medical' || medicalInitialized) return;\n    let cancelled = false;\n    const loadDocuments = async () => {\n      setMedicalListLoading(true);\n      setMedicalError(null);\n      try {\n        const docs = await listKnowledgeDocuments({\n          docType: 'chapter',\n          limit: 25\n        });\n        if (!cancelled) {\n          var _docs$0$id, _docs$;\n          setMedicalDocs(docs);\n          setSelectedMedicalId((_docs$0$id = (_docs$ = docs[0]) === null || _docs$ === void 0 ? void 0 : _docs$.id) !== null && _docs$0$id !== void 0 ? _docs$0$id : '');\n          setMedicalInitialized(true);\n        }\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');\n        }\n      } finally {\n        if (!cancelled) {\n          setMedicalListLoading(false);\n        }\n      }\n    };\n    loadDocuments();\n    return () => {\n      cancelled = true;\n    };\n  }, [activeTab, medicalInitialized]);\n  useEffect(() => {\n    if (activeTab !== 'medical') return;\n    if (!selectedMedicalId) {\n      setMedicalDetail(null);\n      return;\n    }\n    let cancelled = false;\n    setMedicalDetailLoading(true);\n    setMedicalError(null);\n    const loadDetail = async () => {\n      try {\n        const doc = await getKnowledgeDocument(selectedMedicalId);\n        if (!cancelled) {\n          setMedicalDetail(doc);\n        }\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setMedicalError('טעינת ניתוח רפואי נכשלה.');\n          setMedicalDetail(null);\n        }\n      } finally {\n        if (!cancelled) {\n          setMedicalDetailLoading(false);\n        }\n      }\n    };\n    loadDetail();\n    return () => {\n      cancelled = true;\n    };\n  }, [activeTab, selectedMedicalId]);\n  const knowledgeView = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `border-2 border-dashed rounded-xl p-6 bg-slate-50 text-center transition ${dragActive ? 'border-blue-500 bg-blue-50/40' : 'border-slate-200'}`,\n      onDragOver: handleDrag,\n      onDragLeave: handleDrag,\n      onDrop: handleDrop,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        ref: fileInputRef,\n        className: \"hidden\",\n        accept: \"application/pdf\",\n        onChange: event => handlePdfSelection(event.target.files)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UploadCloud, {\n        className: \"w-10 h-10 text-slate-400 mx-auto mb-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg font-semibold text-slate-800\",\n        children: \"\\u05D2\\u05E8\\u05E8\\u05D5 \\u05E7\\u05D5\\u05D1\\u05E5 PDF \\u05E9\\u05DC \\u05E4\\u05E8\\u05E7 \\\"\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\\u05D9 \\u05E0\\u05D6\\u05E7\\\"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-slate-500 mt-2\",\n        children: \"\\u05D4\\u05E7\\u05D1\\u05E6\\u05D9\\u05DD \\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D9\\u05DD \\u05D5\\u05DE\\u05E0\\u05D5\\u05E1\\u05D7\\u05D9\\u05DD \\u05D1\\u05E9\\u05E8\\u05EA \\u05D4\\u05DE\\u05D0\\u05D5\\u05D1\\u05D8\\u05D7 \\u2013 \\u05DB\\u05D5\\u05DC\\u05DC \\u05E8\\u05D9\\u05E9\\u05D5\\u05DD Audit \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: triggerFilePicker,\n          className: \"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition\",\n          disabled: importing,\n          children: \"\\u05D1\\u05D7\\u05E8 \\u05E7\\u05D5\\u05D1\\u05E5 PDF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), importing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 text-sm text-slate-600\",\n          children: [/*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"w-4 h-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this), \"\\u05DE\\u05E2\\u05D1\\u05D3 \\u05E7\\u05D5\\u05D1\\u05E5...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), importMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-slate-600 mt-3\",\n        children: importMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 27\n      }, this), importInsights.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 text-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs font-bold text-slate-500 mb-2\",\n          children: \"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D5\\u05EA \\u05E9\\u05D4\\u05D5\\u05E4\\u05E7\\u05D5:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-1 text-sm text-slate-600\",\n          children: importInsights.map(insight => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"border border-slate-100 rounded px-3 py-2 bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: [insight.title, \": \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 19\n            }, this), insight.content]\n          }, insight.title, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid lg:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",\n        onSubmit: e => {\n          e.preventDefault();\n          handleSaveChapter();\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-bold flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Book, {\n            className: \"w-5 h-5 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this), \" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05E4\\u05E8\\u05E7 \\u05D7\\u05D3\\u05E9\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"w-full border border-slate-300 rounded p-2\",\n          placeholder: \"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA \\u05D4\\u05E4\\u05E8\\u05E7\",\n          value: newChapter.title || '',\n          onChange: e => setNewChapter(prev => ({\n            ...prev,\n            title: e.target.value\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"w-full border border-slate-300 rounded p-2 h-24\",\n          placeholder: \"\\u05EA\\u05D5\\u05DB\\u05DF / \\u05EA\\u05E7\\u05E6\\u05D9\\u05E8\",\n          value: newChapter.content || '',\n          onChange: e => setNewChapter(prev => ({\n            ...prev,\n            content: e.target.value\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"w-full border border-slate-300 rounded p-2\",\n          placeholder: \"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",\n          value: (newChapter.tags || []).join(', '),\n          onChange: e => setNewChapter(prev => ({\n            ...prev,\n            tags: e.target.value.split(',').map(tag => tag.trim()).filter(Boolean)\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"w-full border border-slate-300 rounded p-2 h-20 text-sm\",\n          placeholder: \"\\u05DB\\u05DC\\u05DC\\u05D9\\u05DD (\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4 \\u05DB\\u05DC\\u05DC \\u05D7\\u05D3\\u05E9)\",\n          value: (newChapter.rules || []).join('\\n'),\n          onChange: e => setNewChapter(prev => ({\n            ...prev,\n            rules: e.target.value.split('\\n').map(rule => rule.trim()).filter(Boolean)\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), \" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05E4\\u05E8\\u05E7\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",\n        onSubmit: e => {\n          e.preventDefault();\n          handleSavePrecedent();\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-bold flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Gavel, {\n            className: \"w-5 h-5 text-purple-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), \" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD \\u05D7\\u05D3\\u05E9\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"w-full border border-slate-300 rounded p-2\",\n          placeholder: \"\\u05E9\\u05DD \\u05D4\\u05D4\\u05DC\\u05D9\\u05DA / \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\",\n          value: newPrecedent.caseName || '',\n          onChange: e => setNewPrecedent(prev => ({\n            ...prev,\n            caseName: e.target.value\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"w-full border border-slate-300 rounded p-2 h-24\",\n          placeholder: \"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D4 \\u05DE\\u05E8\\u05DB\\u05D6\\u05D9\\u05EA\",\n          value: newPrecedent.keyTakeaway || '',\n          onChange: e => setNewPrecedent(prev => ({\n            ...prev,\n            keyTakeaway: e.target.value\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"w-full border border-slate-300 rounded p-2\",\n          placeholder: \"\\u05E6\\u05D9\\u05D5\\u05DF / \\u05DE\\u05E7\\u05D5\\u05E8\",\n          value: newPrecedent.citation || '',\n          onChange: e => setNewPrecedent(prev => ({\n            ...prev,\n            citation: e.target.value\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"w-full border border-slate-300 rounded p-2\",\n          placeholder: \"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",\n          value: (newPrecedent.tags || []).join(', '),\n          onChange: e => setNewPrecedent(prev => ({\n            ...prev,\n            tags: e.target.value.split(',').map(tag => tag.trim()).filter(Boolean)\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), \" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid md:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-5 rounded shadow border border-slate-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-3 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Book, {\n            className: \"w-4 h-4 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), \" \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E7\\u05D9\\u05D9\\u05DE\\u05D9\\u05DD (\", brain.book.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), brain.book.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-slate-500\",\n          children: \"\\u05D0\\u05D9\\u05DF \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-2\",\n          children: brain.book.slice(0, 4).map(chapter => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"border border-slate-100 rounded p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold text-slate-800\",\n              children: chapter.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\",\n              children: chapter.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 19\n            }, this)]\n          }, chapter.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-5 rounded shadow border border-slate-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-3 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Gavel, {\n            className: \"w-4 h-4 text-purple-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this), \" \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD (\", brain.precedents.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), brain.precedents.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-slate-500\",\n          children: \"\\u05D0\\u05D9\\u05DF \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-2\",\n          children: brain.precedents.slice(0, 4).map(precedent => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"border border-slate-100 rounded p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold text-slate-800\",\n              children: precedent.caseName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\",\n              children: precedent.keyTakeaway\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 19\n            }, this)]\n          }, precedent.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n  const casesView = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(Layout, {\n        className: \"w-5 h-5 text-emerald-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), \" \\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-slate-600\",\n      children: \"\\u05DB\\u05DC \\u05D4\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05E0\\u05E9\\u05DE\\u05E8\\u05D9\\u05DD \\u05D5\\u05DE\\u05E1\\u05D5\\u05E0\\u05DB\\u05E8\\u05E0\\u05D9\\u05DD \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9\\u05EA \\u05DE\\u05D5\\u05DC \\u05D4\\u05E9\\u05E8\\u05EA.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-slate-400\",\n      children: \"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05DE\\u05EA\\u05E7\\u05D3\\u05DD \\u05D9\\u05EA\\u05D5\\u05D5\\u05E1\\u05E3 \\u05D1\\u05E9\\u05DC\\u05D1\\u05D9\\u05DD \\u05D4\\u05D1\\u05D0\\u05D9\\u05DD.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 394,\n    columnNumber: 5\n  }, this);\n  const medicalView = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col gap-4 md:flex-row md:items-end\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-xs font-semibold text-slate-500\",\n          children: \"\\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"mt-1 w-full rounded border border-slate-300 p-2 text-sm\",\n          value: selectedMedicalId,\n          onChange: e => setSelectedMedicalId(e.target.value),\n          disabled: !medicalDocs.length || medicalListLoading,\n          children: [medicalDocs.map(doc => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: doc.id,\n            children: doc.title\n          }, doc.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)), !medicalDocs.length && /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:w-1/3\",\n        children: /*#__PURE__*/_jsxDEV(QualityBadge, {\n          score: medicalDetail === null || medicalDetail === void 0 ? void 0 : medicalDetail.score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this), medicalError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\",\n      children: medicalError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 9\n    }, this), (medicalListLoading || medicalDetailLoading) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2 text-sm text-slate-500\",\n      children: [/*#__PURE__*/_jsxDEV(Loader2, {\n        className: \"h-4 w-4 animate-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this), \"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 9\n    }, this), !medicalListLoading && !medicalDetail && !medicalError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\",\n      children: \"\\u05D0\\u05D9\\u05DF \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD \\u05DC\\u05D4\\u05E6\\u05D2\\u05D4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 9\n    }, this), medicalDetail && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(KnowledgeFlags, {\n        flags: medicalDetail.flags || []\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(KnowledgeClaimsPanel, {\n        claims: medicalDetail.claims || [],\n        limit: 5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 404,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-slate-100 text-slate-900 font-sans\",\n    dir: \"rtl\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-slate-900 text-white p-6 flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold serif\",\n        children: \"LexMedical Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onLogout,\n        className: \"flex items-center gap-2 hover:text-red-400\",\n        children: [/*#__PURE__*/_jsxDEV(LogOut, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this), \" \\u05D9\\u05E6\\u05D9\\u05D0\\u05D4\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-6xl mx-auto p-8 space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap items-center justify-between gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-slate-600\",\n            children: [\"\\u05DE\\u05D7\\u05D5\\u05D1\\u05E8 \\u05DB- \", currentUserName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-slate-400\",\n            children: [\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF \\u05DC\\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D4: \", new Date(brain.lastUpdated).toLocaleString('he-IL')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('knowledge'),\n            className: `px-4 py-2 rounded border text-sm flex items-center gap-2 ${activeTab === 'knowledge' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'}`,\n            children: [/*#__PURE__*/_jsxDEV(Book, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this), \" \\u05D9\\u05D3\\u05E2\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('cases'),\n            className: `px-4 py-2 rounded border text-sm flex items-center gap-2 ${activeTab === 'cases' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'}`,\n            children: [/*#__PURE__*/_jsxDEV(Layout, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 15\n            }, this), \" \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('medical'),\n            className: `px-4 py-2 rounded border text-sm flex items-center gap-2 ${activeTab === 'medical' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'}`,\n            children: [/*#__PURE__*/_jsxDEV(Activity, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this), \" Medical Analysis\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), activeTab === 'knowledge' && knowledgeView, activeTab === 'cases' && casesView, activeTab === 'medical' && medicalView]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 454,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminDashboard, \"TflJt8uOk5Mbf+2eSIcKlId+mSg=\");\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useRef","useEffect","saveBookChapter","saveGlobalPrecedent","getKnowledgeBase","uploadChapterPdf","isApiConfigured","listKnowledgeDocuments","getKnowledgeDocument","Book","Gavel","LogOut","Save","Layout","UploadCloud","Loader2","Activity","QualityBadge","KnowledgeClaimsPanel","KnowledgeFlags","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminDashboard","currentUserName","onEditCase","_onEditCase","onLogout","_s","activeTab","setActiveTab","brain","setBrain","newChapter","setNewChapter","title","content","tags","rules","newPrecedent","setNewPrecedent","caseName","keyTakeaway","importing","setImporting","importMessage","setImportMessage","importInsights","setImportInsights","dragActive","setDragActive","fileInputRef","medicalDocs","setMedicalDocs","selectedMedicalId","setSelectedMedicalId","medicalDetail","setMedicalDetail","medicalInitialized","setMedicalInitialized","medicalListLoading","setMedicalListLoading","medicalDetailLoading","setMedicalDetailLoading","medicalError","setMedicalError","handleSaveChapter","alert","chapter","id","Date","now","toString","handleSavePrecedent","precedent","citation","relevantIssues","importChapterFile","file","name","backendResult","docType","summary","insights","error","console","current","value","handlePdfSelection","files","length","type","handleDrop","event","preventDefault","dataTransfer","handleDrag","triggerFilePicker","_fileInputRef$current","click","cancelled","loadDocuments","docs","limit","_docs$0$id","_docs$","loadDetail","doc","knowledgeView","className","children","onDragOver","onDragLeave","onDrop","ref","accept","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","map","insight","onSubmit","e","placeholder","prev","join","split","tag","trim","filter","Boolean","rule","book","slice","precedents","casesView","medicalView","score","flags","claims","dir","lastUpdated","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Office-Apps/LexMedical-App/src/components/AdminDashboard.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  BookChapter,\r\n  GlobalPrecedent,\r\n  CaseData,\r\n  AIInsight,\r\n  KnowledgeDocumentSummary,\r\n  KnowledgeDocumentDetail,\r\n} from '../types';\r\nimport { saveBookChapter, saveGlobalPrecedent, getKnowledgeBase } from '../services/knowledgeBase';\r\nimport { uploadChapterPdf, isApiConfigured } from '../services/api';\r\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\r\nimport { Book, Gavel, LogOut, Save, Layout, UploadCloud, Loader2, Activity } from 'lucide-react';\r\nimport QualityBadge from './QualityBadge';\r\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\r\nimport KnowledgeFlags from './KnowledgeFlags';\r\n\r\ninterface Props {\r\n  currentUserName: string;\r\n  onEditCase: (caseData: CaseData) => void;\r\n  onLogout: () => void;\r\n}\r\n\r\nconst AdminDashboard: React.FC<Props> = ({ currentUserName, onEditCase: _onEditCase, onLogout }) => {\r\n  const [activeTab, setActiveTab] = useState<'cases' | 'knowledge' | 'medical'>('knowledge');\r\n  const [brain, setBrain] = useState(getKnowledgeBase());\r\n  const [newChapter, setNewChapter] = useState<Partial<BookChapter>>({ title: '', content: '', tags: [], rules: [] });\r\n  const [newPrecedent, setNewPrecedent] = useState<Partial<GlobalPrecedent>>({ caseName: '', keyTakeaway: '', tags: [] });\r\n  const [importing, setImporting] = useState(false);\r\n  const [importMessage, setImportMessage] = useState('');\r\n  const [importInsights, setImportInsights] = useState<AIInsight[]>([]);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [medicalDocs, setMedicalDocs] = useState<KnowledgeDocumentSummary[]>([]);\r\n  const [selectedMedicalId, setSelectedMedicalId] = useState<string>('');\r\n  const [medicalDetail, setMedicalDetail] = useState<KnowledgeDocumentDetail | null>(null);\r\n  const [medicalInitialized, setMedicalInitialized] = useState(false);\r\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\r\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\r\n  const [medicalError, setMedicalError] = useState<string | null>(null);\r\n\r\n  const handleSaveChapter = () => {\r\n    if (!newChapter.title || !newChapter.content) {\r\n      alert('חובה למלא כותרת ותוכן');\r\n      return;\r\n    }\r\n    const chapter: BookChapter = {\r\n      id: Date.now().toString(),\r\n      title: newChapter.title!,\r\n      content: newChapter.content!,\r\n      tags: newChapter.tags || [],\r\n      rules: newChapter.rules || [],\r\n    };\r\n    saveBookChapter(chapter);\r\n    setBrain(getKnowledgeBase());\r\n    setNewChapter({ title: '', content: '', tags: [], rules: [] });\r\n  };\r\n\r\n  const handleSavePrecedent = () => {\r\n    if (!newPrecedent.caseName || !newPrecedent.keyTakeaway) {\r\n      alert('חובה למלא שם ותובנה');\r\n      return;\r\n    }\r\n    const precedent: GlobalPrecedent = {\r\n      id: Date.now().toString(),\r\n      caseName: newPrecedent.caseName!,\r\n      keyTakeaway: newPrecedent.keyTakeaway!,\r\n      citation: newPrecedent.citation || '',\r\n      tags: newPrecedent.tags || [],\r\n      relevantIssues: [],\r\n    };\r\n    saveGlobalPrecedent(precedent);\r\n    setBrain(getKnowledgeBase());\r\n    setNewPrecedent({ caseName: '', keyTakeaway: '', tags: [] });\r\n  };\r\n\r\n  const importChapterFile = async (file: File) => {\r\n    setImporting(true);\r\n    setImportMessage(`מעלה את \"${file.name}\" לעיבוד...`);\r\n    setImportInsights([]);\r\n    try {\r\n      if (!isApiConfigured()) {\r\n        setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');\r\n        return;\r\n      }\r\n      const backendResult = await uploadChapterPdf(file, { docType: 'chapter' });\r\n      const chapter: BookChapter = {\r\n        id: backendResult.id,\r\n        title: backendResult.title,\r\n        content: backendResult.content || backendResult.summary,\r\n        tags: backendResult.tags || [],\r\n        rules: backendResult.rules || [],\r\n      };\r\n      saveBookChapter(chapter);\r\n      setBrain(getKnowledgeBase());\r\n      setNewChapter(chapter);\r\n      setImportInsights(backendResult.insights || []);\r\n      setImportMessage(`הפרק \"${chapter.title}\" עוּבד בהצלחה דרך השרת ונשמר במאגר.`);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');\r\n    } finally {\r\n      setImporting(false);\r\n      if (fileInputRef.current) fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handlePdfSelection = (files: FileList | null) => {\r\n    if (!files || !files.length) return;\r\n    const file = files[0];\r\n    if (file.type !== 'application/pdf') {\r\n      setImportMessage('נא לבחור קובץ PDF בלבד.');\r\n      return;\r\n    }\r\n    importChapterFile(file);\r\n  };\r\n\r\n  const handleDrop = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    setDragActive(false);\r\n    handlePdfSelection(event.dataTransfer.files);\r\n  };\r\n\r\n  const handleDrag = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    if (event.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (event.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const triggerFilePicker = () => fileInputRef.current?.click();\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical' || medicalInitialized) return;\r\n    let cancelled = false;\r\n    const loadDocuments = async () => {\r\n      setMedicalListLoading(true);\r\n      setMedicalError(null);\r\n      try {\r\n        const docs = await listKnowledgeDocuments({ docType: 'chapter', limit: 25 });\r\n        if (!cancelled) {\r\n          setMedicalDocs(docs);\r\n          setSelectedMedicalId(docs[0]?.id ?? '');\r\n          setMedicalInitialized(true);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalListLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDocuments();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, medicalInitialized]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical') return;\r\n    if (!selectedMedicalId) {\r\n      setMedicalDetail(null);\r\n      return;\r\n    }\r\n    let cancelled = false;\r\n    setMedicalDetailLoading(true);\r\n    setMedicalError(null);\r\n    const loadDetail = async () => {\r\n      try {\r\n        const doc = await getKnowledgeDocument(selectedMedicalId);\r\n        if (!cancelled) {\r\n          setMedicalDetail(doc);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת ניתוח רפואי נכשלה.');\r\n          setMedicalDetail(null);\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalDetailLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDetail();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, selectedMedicalId]);\r\n\r\n  const knowledgeView = (\r\n    <div className=\"space-y-6\">\r\n      <div\r\n        className={`border-2 border-dashed rounded-xl p-6 bg-slate-50 text-center transition ${\r\n          dragActive ? 'border-blue-500 bg-blue-50/40' : 'border-slate-200'\r\n        }`}\r\n        onDragOver={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          className=\"hidden\"\r\n          accept=\"application/pdf\"\r\n          onChange={(event) => handlePdfSelection(event.target.files)}\r\n        />\r\n        <UploadCloud className=\"w-10 h-10 text-slate-400 mx-auto mb-3\" />\r\n        <p className=\"text-lg font-semibold text-slate-800\">גררו קובץ PDF של פרק \"תחשיבי נזק\"</p>\r\n        <p className=\"text-sm text-slate-500 mt-2\">הקבצים מעובדים ומנוסחים בשרת המאובטח – כולל רישום Audit אוטומטי.</p>\r\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={triggerFilePicker}\r\n            className=\"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition\"\r\n            disabled={importing}\r\n          >\r\n            בחר קובץ PDF\r\n          </button>\r\n          {importing && (\r\n            <div className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              מעבד קובץ...\r\n            </div>\r\n          )}\r\n        </div>\r\n        {importMessage && <p className=\"text-sm text-slate-600 mt-3\">{importMessage}</p>}\r\n        {importInsights.length > 0 && (\r\n          <div className=\"mt-4 text-left\">\r\n            <p className=\"text-xs font-bold text-slate-500 mb-2\">תובנות שהופקו:</p>\r\n            <ul className=\"space-y-1 text-sm text-slate-600\">\r\n              {importInsights.map((insight) => (\r\n                <li key={insight.title} className=\"border border-slate-100 rounded px-3 py-2 bg-white\">\r\n                  <span className=\"font-semibold\">{insight.title}: </span>\r\n                  {insight.content}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid lg:grid-cols-2 gap-6\">\r\n        <form\r\n          className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSaveChapter();\r\n          }}\r\n        >\r\n          <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n            <Book className=\"w-5 h-5 text-blue-600\" /> הוסף פרק חדש\r\n          </h2>\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"כותרת הפרק\"\r\n            value={newChapter.title || ''}\r\n            onChange={(e) => setNewChapter((prev) => ({ ...prev, title: e.target.value }))}\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-24\"\r\n            placeholder=\"תוכן / תקציר\"\r\n            value={newChapter.content || ''}\r\n            onChange={(e) => setNewChapter((prev) => ({ ...prev, content: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"תגיות (מופרדות בפסיק)\"\r\n            value={(newChapter.tags || []).join(', ')}\r\n            onChange={(e) =>\r\n              setNewChapter((prev) => ({\r\n                ...prev,\r\n                tags: e.target.value\r\n                  .split(',')\r\n                  .map((tag) => tag.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-20 text-sm\"\r\n            placeholder=\"כללים (כל שורה כלל חדש)\"\r\n            value={(newChapter.rules || []).join('\\n')}\r\n            onChange={(e) =>\r\n              setNewChapter((prev) => ({\r\n                ...prev,\r\n                rules: e.target.value\r\n                  .split('\\n')\r\n                  .map((rule) => rule.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <button type=\"submit\" className=\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\">\r\n            <Save className=\"w-4 h-4\" /> שמור פרק\r\n          </button>\r\n        </form>\r\n\r\n        <form\r\n          className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSavePrecedent();\r\n          }}\r\n        >\r\n          <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n            <Gavel className=\"w-5 h-5 text-purple-600\" /> הוסף תקדים חדש\r\n          </h2>\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"שם ההליך / תקדים\"\r\n            value={newPrecedent.caseName || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, caseName: e.target.value }))}\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-24\"\r\n            placeholder=\"תובנה מרכזית\"\r\n            value={newPrecedent.keyTakeaway || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, keyTakeaway: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"ציון / מקור\"\r\n            value={newPrecedent.citation || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, citation: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"תגיות (מופרדות בפסיק)\"\r\n            value={(newPrecedent.tags || []).join(', ')}\r\n            onChange={(e) =>\r\n              setNewPrecedent((prev) => ({\r\n                ...prev,\r\n                tags: e.target.value\r\n                  .split(',')\r\n                  .map((tag) => tag.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <button type=\"submit\" className=\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\">\r\n            <Save className=\"w-4 h-4\" /> שמור תקדים\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white p-5 rounded shadow border border-slate-200\">\r\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n            <Book className=\"w-4 h-4 text-blue-600\" /> פרקים קיימים ({brain.book.length})\r\n          </h3>\r\n          {brain.book.length === 0 ? (\r\n            <p className=\"text-sm text-slate-500\">אין פרקים שמורים.</p>\r\n          ) : (\r\n            <ul className=\"space-y-2\">\r\n              {brain.book.slice(0, 4).map((chapter) => (\r\n                <li key={chapter.id} className=\"border border-slate-100 rounded p-3\">\r\n                  <p className=\"font-semibold text-slate-800\">{chapter.title}</p>\r\n                  <p className=\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\">{chapter.content}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n        <div className=\"bg-white p-5 rounded shadow border border-slate-200\">\r\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n            <Gavel className=\"w-4 h-4 text-purple-600\" /> תקדימים ({brain.precedents.length})\r\n          </h3>\r\n          {brain.precedents.length === 0 ? (\r\n            <p className=\"text-sm text-slate-500\">אין תקדימים שמורים.</p>\r\n          ) : (\r\n            <ul className=\"space-y-2\">\r\n              {brain.precedents.slice(0, 4).map((precedent) => (\r\n                <li key={precedent.id} className=\"border border-slate-100 rounded p-3\">\r\n                  <p className=\"font-semibold text-slate-800\">{precedent.caseName}</p>\r\n                  <p className=\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\">{precedent.keyTakeaway}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const casesView = (\r\n    <div className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\">\r\n      <h2 className=\"text-xl font-bold flex items-center gap-2\">\r\n        <Layout className=\"w-5 h-5 text-emerald-600\" /> ניהול תיקים\r\n      </h2>\r\n      <p className=\"text-sm text-slate-600\">כל התיקים נשמרים ומסונכרנים אוטומטית מול השרת.</p>\r\n      <p className=\"text-xs text-slate-400\">ניהול תיקים מתקדם יתווסף בשלבים הבאים.</p>\r\n    </div>\r\n  );\r\n\r\n  const medicalView = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-end\">\r\n        <div className=\"flex-1\">\r\n          <label className=\"text-xs font-semibold text-slate-500\">בחר מסמך רפואי</label>\r\n          <select\r\n            className=\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\"\r\n            value={selectedMedicalId}\r\n            onChange={(e) => setSelectedMedicalId(e.target.value)}\r\n            disabled={!medicalDocs.length || medicalListLoading}\r\n          >\r\n            {medicalDocs.map((doc) => (\r\n              <option key={doc.id} value={doc.id}>\r\n                {doc.title}\r\n              </option>\r\n            ))}\r\n            {!medicalDocs.length && <option value=\"\">אין מסמכים</option>}\r\n          </select>\r\n        </div>\r\n        <div className=\"md:w-1/3\">\r\n          <QualityBadge score={medicalDetail?.score} />\r\n        </div>\r\n      </div>\r\n\r\n      {medicalError && (\r\n        <div className=\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\">{medicalError}</div>\r\n      )}\r\n\r\n      {(medicalListLoading || medicalDetailLoading) && (\r\n        <div className=\"flex items-center gap-2 text-sm text-slate-500\">\r\n          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          טוען נתוני ניתוח רפואי...\r\n        </div>\r\n      )}\r\n\r\n      {!medicalListLoading && !medicalDetail && !medicalError && (\r\n        <div className=\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\">\r\n          אין ניתוחים רפואיים זמינים להצגה.\r\n        </div>\r\n      )}\r\n\r\n      {medicalDetail && (\r\n        <>\r\n          <KnowledgeFlags flags={medicalDetail.flags || []} />\r\n          <KnowledgeClaimsPanel claims={medicalDetail.claims || []} limit={5} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-100 text-slate-900 font-sans\" dir=\"rtl\">\r\n      <header className=\"bg-slate-900 text-white p-6 flex justify-between items-center\">\r\n        <h1 className=\"text-2xl font-bold serif\">LexMedical Admin</h1>\r\n        <button onClick={onLogout} className=\"flex items-center gap-2 hover:text-red-400\">\r\n          <LogOut className=\"w-4 h-4\" /> יציאה\r\n        </button>\r\n      </header>\r\n      <main className=\"max-w-6xl mx-auto p-8 space-y-6\">\r\n        <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n          <div>\r\n            <p className=\"text-sm text-slate-600\">מחובר כ- {currentUserName}</p>\r\n            <p className=\"text-xs text-slate-400\">עודכן לאחרונה: {new Date(brain.lastUpdated).toLocaleString('he-IL')}</p>\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => setActiveTab('knowledge')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'knowledge' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Book className=\"w-4 h-4\" /> ידע\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('cases')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'cases' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Layout className=\"w-4 h-4\" /> תיקים\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('medical')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'medical' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Activity className=\"w-4 h-4\" /> Medical Analysis\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {activeTab === 'knowledge' && knowledgeView}\r\n        {activeTab === 'cases' && casesView}\r\n        {activeTab === 'medical' && medicalView}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}