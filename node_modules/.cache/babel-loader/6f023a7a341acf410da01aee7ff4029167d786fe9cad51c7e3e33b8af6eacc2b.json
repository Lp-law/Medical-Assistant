{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect,useCallback}from'react';import{saveBookChapter,saveGlobalPrecedent,getKnowledgeBase}from'../services/knowledgeBase';import{uploadChapterPdf,isApiConfigured,listCases as apiListCases,getCase as apiGetCase,renewCase as apiRenewCase,archiveCase as apiArchiveCase,deleteCase as apiDeleteCase,exportCaseFile as apiExportCaseFile,updateCaseMetadata as apiUpdateCaseMetadata,listNotifications as apiListNotifications,markNotificationRead as apiMarkNotificationRead}from'../services/api';import{listKnowledgeDocuments,getKnowledgeDocument}from'../services/knowledgeApi';import{Book,Gavel,LogOut,Save,Layout,UploadCloud,Loader2,Activity,AlertTriangle,Bell}from'lucide-react';import QualityBadge from'./QualityBadge';import KnowledgeClaimsPanel from'./KnowledgeClaimsPanel';import KnowledgeFlags from'./KnowledgeFlags';import MedicalTimeline from'./MedicalTimeline';import MedicalQualityBox from'./MedicalQualityBox';import LiteraturePanel from'./LiteraturePanel';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=_ref=>{var _medicalDetail$qualit,_medicalDetail$reason,_medicalDetail$litera;let{currentUserName,onEditCase:_onEditCase,onLogout}=_ref;const[activeTab,setActiveTab]=useState('knowledge');const[brain,setBrain]=useState(getKnowledgeBase());const[newChapter,setNewChapter]=useState({title:'',content:'',tags:[],rules:[]});const[newPrecedent,setNewPrecedent]=useState({caseName:'',keyTakeaway:'',tags:[]});const[importing,setImporting]=useState(false);const[importMessage,setImportMessage]=useState('');const[importInsights,setImportInsights]=useState([]);const[dragActive,setDragActive]=useState(false);const fileInputRef=useRef(null);const[medicalDocs,setMedicalDocs]=useState([]);const[selectedMedicalId,setSelectedMedicalId]=useState('');const[medicalDetail,setMedicalDetail]=useState(null);const[medicalInitialized,setMedicalInitialized]=useState(false);const[medicalListLoading,setMedicalListLoading]=useState(false);const[medicalDetailLoading,setMedicalDetailLoading]=useState(false);const[medicalError,setMedicalError]=useState(null);const[caseLists,setCaseLists]=useState({ownCases:[],otherCases:[]});const[caseListLoading,setCaseListLoading]=useState(false);const[caseListError,setCaseListError]=useState(null);const[selectedCase,setSelectedCase]=useState(null);const[subjectDraft,setSubjectDraft]=useState('');const[notifications,setNotifications]=useState([]);const[notificationsError,setNotificationsError]=useState(null);const handleSaveChapter=()=>{if(!newChapter.title||!newChapter.content){alert('חובה למלא כותרת ותוכן');return;}const chapter={id:Date.now().toString(),title:newChapter.title,content:newChapter.content,tags:newChapter.tags||[],rules:newChapter.rules||[]};saveBookChapter(chapter);setBrain(getKnowledgeBase());setNewChapter({title:'',content:'',tags:[],rules:[]});};const handleSavePrecedent=()=>{if(!newPrecedent.caseName||!newPrecedent.keyTakeaway){alert('חובה למלא שם ותובנה');return;}const precedent={id:Date.now().toString(),caseName:newPrecedent.caseName,keyTakeaway:newPrecedent.keyTakeaway,citation:newPrecedent.citation||'',tags:newPrecedent.tags||[],relevantIssues:[]};saveGlobalPrecedent(precedent);setBrain(getKnowledgeBase());setNewPrecedent({caseName:'',keyTakeaway:'',tags:[]});};const importChapterFile=async file=>{setImporting(true);setImportMessage(\"\\u05DE\\u05E2\\u05DC\\u05D4 \\u05D0\\u05EA \\\"\".concat(file.name,\"\\\" \\u05DC\\u05E2\\u05D9\\u05D1\\u05D5\\u05D3...\"));setImportInsights([]);try{if(!isApiConfigured()){setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');return;}const backendResult=await uploadChapterPdf(file,{docType:'chapter'});const chapter={id:backendResult.id,title:backendResult.title,content:backendResult.content||backendResult.summary,tags:backendResult.tags||[],rules:backendResult.rules||[]};saveBookChapter(chapter);setBrain(getKnowledgeBase());setNewChapter(chapter);setImportInsights(backendResult.insights||[]);setImportMessage(\"\\u05D4\\u05E4\\u05E8\\u05E7 \\\"\".concat(chapter.title,\"\\\" \\u05E2\\u05D5\\u05BC\\u05D1\\u05D3 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4 \\u05D3\\u05E8\\u05DA \\u05D4\\u05E9\\u05E8\\u05EA \\u05D5\\u05E0\\u05E9\\u05DE\\u05E8 \\u05D1\\u05DE\\u05D0\\u05D2\\u05E8.\"));}catch(error){console.error(error);setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');}finally{setImporting(false);if(fileInputRef.current)fileInputRef.current.value='';}};const handlePdfSelection=files=>{if(!files||!files.length)return;const file=files[0];if(file.type!=='application/pdf'){setImportMessage('נא לבחור קובץ PDF בלבד.');return;}importChapterFile(file);};const handleDrop=event=>{event.preventDefault();setDragActive(false);handlePdfSelection(event.dataTransfer.files);};const handleDrag=event=>{event.preventDefault();if(event.type==='dragover'){setDragActive(true);}else if(event.type==='dragleave'){setDragActive(false);}};const triggerFilePicker=()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const refreshCaseLists=useCallback(async()=>{setCaseListLoading(true);setCaseListError(null);try{const payload=await apiListCases();setCaseLists(payload);if(selectedCase&&!payload.ownCases.find(entry=>entry.id===selectedCase.id)){setSelectedCase(null);}if(!selectedCase&&payload.ownCases.length>0){var _payload$ownCases$0$t;setSelectedCase(payload.ownCases[0]);setSubjectDraft((_payload$ownCases$0$t=payload.ownCases[0].topicSummary)!==null&&_payload$ownCases$0$t!==void 0?_payload$ownCases$0$t:'');}}catch(error){console.error(error);setCaseListError('טעינת התיקים נכשלה.');}finally{setCaseListLoading(false);}},[selectedCase]);const refreshNotifications=useCallback(async()=>{try{const items=await apiListNotifications();setNotifications(items);setNotificationsError(null);}catch(error){console.error(error);setNotificationsError('טעינת ההתראות נכשלה.');}},[]);const handleSelectCaseDetail=useCallback(async caseId=>{setCaseListLoading(true);setCaseListError(null);try{var _detail$topicSummary;const detail=await apiGetCase(caseId);setSelectedCase(detail);setSubjectDraft((_detail$topicSummary=detail.topicSummary)!==null&&_detail$topicSummary!==void 0?_detail$topicSummary:'');}catch(error){console.error(error);setCaseListError('טעינת פרטי התיק נכשלה.');}finally{setCaseListLoading(false);}},[]);const handleExportCase=async(caseId,format)=>{try{const blob=await apiExportCaseFile(caseId,format);const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"case-\".concat(caseId,\".\").concat(format==='pdf'?'pdf':'json');document.body.appendChild(link);link.click();link.remove();URL.revokeObjectURL(url);}catch(error){console.error(error);setCaseListError('ייצוא התיק נכשל.');}};const handleRenewCase=async caseId=>{try{await apiRenewCase(caseId);await refreshCaseLists();if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseId){var _detail$topicSummary2;const detail=await apiGetCase(caseId);setSelectedCase(detail);setSubjectDraft((_detail$topicSummary2=detail.topicSummary)!==null&&_detail$topicSummary2!==void 0?_detail$topicSummary2:'');}}catch(error){console.error(error);setCaseListError('חידוש התיק נכשל.');}};const handleArchiveCase=async caseRecord=>{try{if(caseRecord.status==='ARCHIVED'){await apiRenewCase(caseRecord.id);}else{await apiArchiveCase(caseRecord.id);}await refreshCaseLists();if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseRecord.id){const detail=await apiGetCase(caseRecord.id);setSelectedCase(detail);}}catch(error){console.error(error);setCaseListError('עדכון מצב הארכיון נכשל.');}};const handleDeleteCase=async caseId=>{if(!window.confirm('האם למחוק את התיק באופן סופי? פעולה זו אינה ניתנת לשחזור.'))return;try{await apiDeleteCase(caseId);if((selectedCase===null||selectedCase===void 0?void 0:selectedCase.id)===caseId){setSelectedCase(null);}await refreshCaseLists();}catch(error){console.error(error);setCaseListError('מחיקת התיק נכשלה.');}};const handleSaveMetadata=async()=>{if(!selectedCase)return;try{const updated=await apiUpdateCaseMetadata(selectedCase.id,{topicSummary:subjectDraft.trim()||undefined});setSelectedCase(updated);await refreshCaseLists();}catch(error){console.error(error);setCaseListError('עדכון הנושא נכשל.');}};const handleMarkNotification=async notificationId=>{try{await apiMarkNotificationRead(notificationId);await refreshNotifications();}catch(error){console.error(error);setNotificationsError('סימון ההתראה נכשל.');}};useEffect(()=>{if(activeTab!=='medical'||medicalInitialized)return;let cancelled=false;const loadDocuments=async()=>{setMedicalListLoading(true);setMedicalError(null);try{const docs=await listKnowledgeDocuments({docType:'chapter',limit:25});if(!cancelled){var _docs$0$id,_docs$;setMedicalDocs(docs);setSelectedMedicalId((_docs$0$id=(_docs$=docs[0])===null||_docs$===void 0?void 0:_docs$.id)!==null&&_docs$0$id!==void 0?_docs$0$id:'');setMedicalInitialized(true);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');}}finally{if(!cancelled){setMedicalListLoading(false);}}};loadDocuments();return()=>{cancelled=true;};},[activeTab,medicalInitialized]);useEffect(()=>{if(activeTab!=='cases')return;refreshCaseLists();refreshNotifications();},[activeTab,refreshCaseLists,refreshNotifications]);useEffect(()=>{if(activeTab!=='medical')return;if(!selectedMedicalId){setMedicalDetail(null);return;}let cancelled=false;setMedicalDetailLoading(true);setMedicalError(null);const loadDetail=async()=>{try{const doc=await getKnowledgeDocument(selectedMedicalId);if(!cancelled){setMedicalDetail(doc);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת ניתוח רפואי נכשלה.');setMedicalDetail(null);}}finally{if(!cancelled){setMedicalDetailLoading(false);}}};loadDetail();return()=>{cancelled=true;};},[activeTab,selectedMedicalId]);const refreshMedicalDetail=useCallback(async()=>{if(!selectedMedicalId)return;try{const doc=await getKnowledgeDocument(selectedMedicalId);setMedicalDetail(doc);}catch(error){console.error(error);setMedicalError('טעינת הניתוח הרפואי נכשלה.');}},[selectedMedicalId]);const knowledgeView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-xl p-6 bg-slate-50 text-center transition \".concat(dragActive?'border-blue-500 bg-blue-50/40':'border-slate-200'),onDragOver:handleDrag,onDragLeave:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,className:\"hidden\",accept:\"application/pdf\",onChange:event=>handlePdfSelection(event.target.files)}),/*#__PURE__*/_jsx(UploadCloud,{className:\"w-10 h-10 text-slate-400 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-slate-800\",children:\"\\u05D2\\u05E8\\u05E8\\u05D5 \\u05E7\\u05D5\\u05D1\\u05E5 PDF \\u05E9\\u05DC \\u05E4\\u05E8\\u05E7 \\\"\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\\u05D9 \\u05E0\\u05D6\\u05E7\\\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500 mt-2\",children:\"\\u05D4\\u05E7\\u05D1\\u05E6\\u05D9\\u05DD \\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D9\\u05DD \\u05D5\\u05DE\\u05E0\\u05D5\\u05E1\\u05D7\\u05D9\\u05DD \\u05D1\\u05E9\\u05E8\\u05EA \\u05D4\\u05DE\\u05D0\\u05D5\\u05D1\\u05D8\\u05D7 \\u2013 \\u05DB\\u05D5\\u05DC\\u05DC \\u05E8\\u05D9\\u05E9\\u05D5\\u05DD Audit \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:triggerFilePicker,className:\"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition\",disabled:importing,children:\"\\u05D1\\u05D7\\u05E8 \\u05E7\\u05D5\\u05D1\\u05E5 PDF\"}),importing&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-600\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 animate-spin\"}),\"\\u05DE\\u05E2\\u05D1\\u05D3 \\u05E7\\u05D5\\u05D1\\u05E5...\"]})]}),importMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600 mt-3\",children:importMessage}),importInsights.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold text-slate-500 mb-2\",children:\"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D5\\u05EA \\u05E9\\u05D4\\u05D5\\u05E4\\u05E7\\u05D5:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1 text-sm text-slate-600\",children:importInsights.map(insight=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded px-3 py-2 bg-white\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[insight.title,\": \"]}),insight.content]},insight.title))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",onSubmit:e=>{e.preventDefault();handleSaveChapter();},children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-5 h-5 text-blue-600\"}),\" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05E4\\u05E8\\u05E7 \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA \\u05D4\\u05E4\\u05E8\\u05E7\",value:newChapter.title||'',onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-24\",placeholder:\"\\u05EA\\u05D5\\u05DB\\u05DF / \\u05EA\\u05E7\\u05E6\\u05D9\\u05E8\",value:newChapter.content||'',onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{content:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",value:(newChapter.tags||[]).join(', '),onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-20 text-sm\",placeholder:\"\\u05DB\\u05DC\\u05DC\\u05D9\\u05DD (\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4 \\u05DB\\u05DC\\u05DC \\u05D7\\u05D3\\u05E9)\",value:(newChapter.rules||[]).join('\\n'),onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{rules:e.target.value.split('\\n').map(rule=>rule.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05E4\\u05E8\\u05E7\"]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",onSubmit:e=>{e.preventDefault();handleSavePrecedent();},children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"w-5 h-5 text-purple-600\"}),\" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05E9\\u05DD \\u05D4\\u05D4\\u05DC\\u05D9\\u05DA / \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\",value:newPrecedent.caseName||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{caseName:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-24\",placeholder:\"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D4 \\u05DE\\u05E8\\u05DB\\u05D6\\u05D9\\u05EA\",value:newPrecedent.keyTakeaway||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{keyTakeaway:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05E6\\u05D9\\u05D5\\u05DF / \\u05DE\\u05E7\\u05D5\\u05E8\",value:newPrecedent.citation||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{citation:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",value:(newPrecedent.tags||[]).join(', '),onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded shadow border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-4 h-4 text-blue-600\"}),\" \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E7\\u05D9\\u05D9\\u05DE\\u05D9\\u05DD (\",brain.book.length,\")\"]}),brain.book.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:brain.book.slice(0,4).map(chapter=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-slate-800\",children:chapter.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\",children:chapter.content})]},chapter.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded shadow border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"w-4 h-4 text-purple-600\"}),\" \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD (\",brain.precedents.length,\")\"]}),brain.precedents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:brain.precedents.slice(0,4).map(precedent=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-slate-800\",children:precedent.caseName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\",children:precedent.keyTakeaway})]},precedent.id))})]})]})]});const caseStatusLabel={ACTIVE:'פעיל',ARCHIVED:'בארכיון',PENDING_DELETE:'ממתין למחיקה'};const caseStatusStyle={ACTIVE:'bg-emerald-50 text-emerald-700',ARCHIVED:'bg-slate-100 text-slate-600',PENDING_DELETE:'bg-rose-50 text-rose-700'};const renderStatusBadge=status=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center rounded px-2 py-0.5 text-xs font-semibold \".concat(caseStatusStyle[status]),children:caseStatusLabel[status]});const renderDaysIndicator=days=>{if(days===undefined)return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-500\",children:\"\\u05DC\\u05DC\\u05D0 \\u05DE\\u05D9\\u05D3\\u05E2\"});if(days===0){return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-rose-600 font-semibold\",children:\"\\u05E4\\u05D7\\u05D5\\u05EA \\u05DE-24 \\u05E9\\u05E2\\u05D5\\u05EA \\u05DC\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4\"});}const tone=days<=3?'text-rose-600 font-semibold':days<=15?'text-amber-600 font-semibold':'text-slate-500';return/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs \".concat(tone),children:[\"\\u05E0\\u05D5\\u05EA\\u05E8\\u05D5 \",days,\" \\u05D9\\u05DE\\u05D9\\u05DD\"]});};const CaseCard=_ref2=>{let{item,variant}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell transition hover:shadow-2xl \".concat(variant==='owner'?'cursor-pointer':''),onClick:variant==='owner'?()=>handleSelectCaseDetail(item.id):undefined,children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-base font-semibold\",children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-light truncate\",children:item.topicSummary})]}),/*#__PURE__*/_jsx(\"span\",{className:variant==='owner'?'badge-owner':'badge-readonly',children:variant==='owner'?'שלי':'קריאה בלבד'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body space-y-2 text-sm text-slate\",children:variant==='owner'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-2\",children:[renderStatusBadge(item.status),renderDaysIndicator(item.daysRemaining)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E0\\u05D5\\u05E6\\u05E8: \",new Date(item.createdAt).toLocaleDateString('he-IL')]}),item.lastAccessedAt&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF: \",new Date(item.lastAccessedAt).toLocaleDateString('he-IL')]})]})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-slate-light\",children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF: \",new Date(item.createdAt).toLocaleDateString('he-IL')]})})]});};const casesView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Layout,{className:\"w-5 h-5 text-gold\"}),\" \\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-light\",children:\"\\u05EA\\u05E6\\u05D5\\u05D2\\u05D4 \\u05DE\\u05E9\\u05E8\\u05D3\\u05D9\\u05EA \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9\\u05EA \\u2013 \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D0\\u05D9\\u05E9\\u05D9\\u05D9\\u05DD \\u05DC\\u05E6\\u05D3 \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05DC\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3 \\u05D5\\u05D4\\u05E9\\u05D5\\u05D5\\u05D0\\u05D4.\"})]}),/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-gold-light\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-sm text-slate\",children:\"\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4 \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9\\u05EA \\u05DE\\u05EA\\u05D1\\u05E6\\u05E2\\u05EA \\u05DC\\u05D0\\u05D7\\u05E8 90 \\u05D9\\u05D5\\u05DD. \\u05DE\\u05D5\\u05DE\\u05DC\\u05E5 \\u05DC\\u05EA\\u05D9\\u05D9\\u05E7 \\u05D0\\u05D5 \\u05DC\\u05D9\\u05D9\\u05E6\\u05D0 \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD \\u05D8\\u05E8\\u05DD \\u05D4\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4.\"})]}),caseListError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded-card border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700\",children:caseListError}),caseListLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin\"}),\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD...\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6 lg:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-slate\",children:[\"\\u05D4\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05E9\\u05DC\\u05D9 (\",caseLists.ownCases.length,\")\"]}),caseLists.ownCases.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-sm text-slate\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D1\\u05D1\\u05E2\\u05DC\\u05D5\\u05EA\\u05DA \\u05DB\\u05E8\\u05D2\\u05E2.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:caseLists.ownCases.map(item=>/*#__PURE__*/_jsx(CaseCard,{item:item,variant:\"owner\"},item.id))})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-slate\",children:[\"\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D9\\u05DD (\",caseLists.otherCases.length,\")\"]}),caseLists.otherCases.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-sm text-slate\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05D7\\u05D9\\u05E6\\u05D5\\u05E0\\u05D9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD \\u05DC\\u05E6\\u05E4\\u05D9\\u05D9\\u05D4.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:caseLists.otherCases.map(item=>/*#__PURE__*/_jsx(CaseCard,{item:item,variant:\"readonly\"},item.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6 lg:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell lg:col-span-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-base font-semibold\",children:\"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05EA\\u05D9\\u05E7 \\u05E0\\u05D1\\u05D7\\u05E8\"}),selectedCase&&/*#__PURE__*/_jsx(\"span\",{className:\"badge-status\",children:selectedCase.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-sm text-slate space-y-3\",children:selectedCase?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-2\",children:[renderStatusBadge(selectedCase.status),renderDaysIndicator(selectedCase.daysRemaining)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light mb-1\",children:\"\\u05E0\\u05D5\\u05E9\\u05D0 \\u05D1\\u05D8\\u05D5\\u05D7\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full rounded-2xl border border-pearl bg-pearl/60 p-3 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\",rows:3,value:subjectDraft,onChange:e=>setSubjectDraft(e.target.value),placeholder:\"\\u05EA\\u05D9\\u05D0\\u05D5\\u05E8 \\u05DE\\u05D9\\u05DC\\u05D5\\u05DC\\u05D9 \\u05E7\\u05E6\\u05E8 \\u05E9\\u05DC \\u05D4\\u05EA\\u05D9\\u05E7...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveMetadata,className:\"btn-primary text-xs px-4 py-1.5\",children:\"\\u05E9\\u05DE\\u05D5\\u05E8 \\u05E0\\u05D5\\u05E9\\u05D0\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-light flex flex-wrap gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E0\\u05D5\\u05E6\\u05E8: \",new Date(selectedCase.createdAt).toLocaleString('he-IL')]}),selectedCase.lastAccessedAt&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05D2\\u05D9\\u05E9\\u05D4 \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D4: \",new Date(selectedCase.lastAccessedAt).toLocaleString('he-IL')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 flex flex-wrap gap-2 border-t border-pearl/60\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary text-xs px-4 py-1.5\",onClick:()=>handleExportCase(selectedCase.id,'pdf'),children:\"\\u05D9\\u05D9\\u05E6\\u05D0 PDF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary text-xs px-4 py-1.5\",onClick:()=>handleExportCase(selectedCase.id,'json'),children:\"\\u05D9\\u05D9\\u05E6\\u05D0 JSON\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline text-xs px-4 py-1.5\",onClick:()=>handleRenewCase(selectedCase.id),children:\"\\u05D7\\u05D3\\u05E9 \\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline text-xs px-4 py-1.5\",onClick:()=>handleArchiveCase(selectedCase),children:selectedCase.status==='ARCHIVED'?'בטל ארכיון':'העבר לארכיון'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline text-xs px-4 py-1.5 border-danger text-danger hover:bg-danger/10\",onClick:()=>handleDeleteCase(selectedCase.id),children:\"\\u05DE\\u05D7\\u05D9\\u05E7\\u05D4\"})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate\",children:\"\\u05D1\\u05D7\\u05E8 \\u05EA\\u05D9\\u05E7 \\u05DE\\u05D4\\u05E8\\u05E9\\u05D9\\u05DE\\u05D4 \\u05DC\\u05D4\\u05E6\\u05D2\\u05EA \\u05E4\\u05E8\\u05D8\\u05D9\\u05DD.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-base font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Bell,{className:\"w-4 h-4 text-gold\"}),\"\\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA \\u05E9\\u05DE\\u05D9\\u05E8\\u05D4\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-2 text-sm text-slate\",children:[notificationsError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-rose-200 bg-rose-50 p-2 text-xs text-rose-700\",children:notificationsError}),notifications.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate\",children:\"\\u05D0\\u05D9\\u05DF \\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA \\u05E4\\u05E2\\u05D9\\u05DC\\u05D5\\u05EA.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:notifications.map(notification=>/*#__PURE__*/_jsxs(\"li\",{className:\"rounded-2xl border border-pearl bg-pearl/40 p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate\",children:notification.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[11px] text-slate-light mt-1\",children:new Date(notification.createdAt).toLocaleString('he-IL')}),!notification.readAt&&/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 text-xs text-gold hover:text-gold-light\",onClick:()=>handleMarkNotification(notification.id),children:\"\\u05E1\\u05DE\\u05DF \\u05DB\\u05E0\\u05E7\\u05E8\\u05D0\"})]},notification.id))})]})]})]})]});const medicalView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4 md:flex-row md:items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-500\",children:\"\\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\",value:selectedMedicalId,onChange:e=>setSelectedMedicalId(e.target.value),disabled:!medicalDocs.length||medicalListLoading,children:[medicalDocs.map(doc=>/*#__PURE__*/_jsx(\"option\",{value:doc.id,children:doc.title},doc.id)),!medicalDocs.length&&/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/3\",children:/*#__PURE__*/_jsx(QualityBadge,{score:medicalDetail===null||medicalDetail===void 0?void 0:medicalDetail.score})})]}),medicalError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\",children:medicalError}),(medicalListLoading||medicalDetailLoading)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-500\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin\"}),\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9...\"]}),!medicalListLoading&&!medicalDetail&&!medicalError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD \\u05DC\\u05D4\\u05E6\\u05D2\\u05D4.\"}),medicalDetail&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MedicalQualityBox,{score:medicalDetail.medicalQualityScore,findings:(_medicalDetail$qualit=medicalDetail.qualityFindings)!==null&&_medicalDetail$qualit!==void 0?_medicalDetail$qualit:[],reasoningFindings:(_medicalDetail$reason=medicalDetail.reasoningFindings)!==null&&_medicalDetail$reason!==void 0?_medicalDetail$reason:[]}),/*#__PURE__*/_jsx(KnowledgeFlags,{flags:medicalDetail.flags||[]}),/*#__PURE__*/_jsx(KnowledgeClaimsPanel,{claims:medicalDetail.claims||[],limit:5}),/*#__PURE__*/_jsx(MedicalTimeline,{events:medicalDetail.timeline||[]}),/*#__PURE__*/_jsx(LiteraturePanel,{knowledgeId:medicalDetail.id,resources:(_medicalDetail$litera=medicalDetail.literatureResources)!==null&&_medicalDetail$litera!==void 0?_medicalDetail$litera:[],onRefresh:refreshMedicalDetail})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-pearl text-navy\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-semibold brand-mark\",children:\"LexMedical Admin\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gold-light hidden md:inline\",children:\"\\u05E9\\u05DC\\u05D9\\u05D8\\u05D4 \\u05DE\\u05E9\\u05E8\\u05D3\\u05D9\\u05EA \\u05D1\\u05D7\\u05D5\\u05DE\\u05E8 \\u05D4\\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05BE\\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-pearl\",children:[\"\\u05DE\\u05D7\\u05D5\\u05D1\\u05E8: \",currentUserName]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onLogout,className:\"flex items-center gap-2 rounded-full border border-gold px-3 py-1 text-gold hover:bg-gold/10 transition\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\" \\u05D9\\u05E6\\u05D9\\u05D0\\u05D4\"]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-6xl mx-auto px-6 py-8 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-card border border-pearl bg-white p-6 shadow-card-xl flex flex-wrap items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate\",children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF \\u05DC\\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D4: \",new Date(brain.lastUpdated).toLocaleString('he-IL')]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light\",children:\"\\u05DE\\u05DE\\u05E9\\u05E7 \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9 \\u05DC\\u05E9\\u05D9\\u05DE\\u05D5\\u05E9 \\u05E2\\u05D5\\u05E8\\u05DB\\u05D9 \\u05D3\\u05D9\\u05DF \\u05D1\\u05DC\\u05D1\\u05D3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('knowledge'),className:\"rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 \".concat(activeTab==='knowledge'?'bg-navy text-gold':'bg-pearl border border-pearl text-slate'),children:[/*#__PURE__*/_jsx(Book,{className:\"w-4 h-4\"}),\" \\u05D9\\u05D3\\u05E2\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('cases'),className:\"rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 \".concat(activeTab==='cases'?'bg-navy text-gold':'bg-pearl border border-pearl text-slate'),children:[/*#__PURE__*/_jsx(Layout,{className:\"w-4 h-4\"}),\" \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('medical'),className:\"rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 \".concat(activeTab==='medical'?'bg-navy text-gold':'bg-pearl border border-pearl text-slate'),children:[/*#__PURE__*/_jsx(Activity,{className:\"w-4 h-4\"}),\" Medical Analysis\"]})]})]}),activeTab==='knowledge'&&knowledgeView,activeTab==='cases'&&casesView,activeTab==='medical'&&medicalView]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","saveBookChapter","saveGlobalPrecedent","getKnowledgeBase","uploadChapterPdf","isApiConfigured","listCases","apiListCases","getCase","apiGetCase","renewCase","apiRenewCase","archiveCase","apiArchiveCase","deleteCase","apiDeleteCase","exportCaseFile","apiExportCaseFile","updateCaseMetadata","apiUpdateCaseMetadata","listNotifications","apiListNotifications","markNotificationRead","apiMarkNotificationRead","listKnowledgeDocuments","getKnowledgeDocument","Book","Gavel","LogOut","Save","Layout","UploadCloud","Loader2","Activity","AlertTriangle","Bell","QualityBadge","KnowledgeClaimsPanel","KnowledgeFlags","MedicalTimeline","MedicalQualityBox","LiteraturePanel","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","_ref","_medicalDetail$qualit","_medicalDetail$reason","_medicalDetail$litera","currentUserName","onEditCase","_onEditCase","onLogout","activeTab","setActiveTab","brain","setBrain","newChapter","setNewChapter","title","content","tags","rules","newPrecedent","setNewPrecedent","caseName","keyTakeaway","importing","setImporting","importMessage","setImportMessage","importInsights","setImportInsights","dragActive","setDragActive","fileInputRef","medicalDocs","setMedicalDocs","selectedMedicalId","setSelectedMedicalId","medicalDetail","setMedicalDetail","medicalInitialized","setMedicalInitialized","medicalListLoading","setMedicalListLoading","medicalDetailLoading","setMedicalDetailLoading","medicalError","setMedicalError","caseLists","setCaseLists","ownCases","otherCases","caseListLoading","setCaseListLoading","caseListError","setCaseListError","selectedCase","setSelectedCase","subjectDraft","setSubjectDraft","notifications","setNotifications","notificationsError","setNotificationsError","handleSaveChapter","alert","chapter","id","Date","now","toString","handleSavePrecedent","precedent","citation","relevantIssues","importChapterFile","file","concat","name","backendResult","docType","summary","insights","error","console","current","value","handlePdfSelection","files","length","type","handleDrop","event","preventDefault","dataTransfer","handleDrag","triggerFilePicker","_fileInputRef$current","click","refreshCaseLists","payload","find","entry","_payload$ownCases$0$t","topicSummary","refreshNotifications","items","handleSelectCaseDetail","caseId","_detail$topicSummary","detail","handleExportCase","format","blob","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","remove","revokeObjectURL","handleRenewCase","_detail$topicSummary2","handleArchiveCase","caseRecord","status","handleDeleteCase","window","confirm","handleSaveMetadata","updated","trim","undefined","handleMarkNotification","notificationId","cancelled","loadDocuments","docs","limit","_docs$0$id","_docs$","loadDetail","doc","refreshMedicalDetail","knowledgeView","className","children","onDragOver","onDragLeave","onDrop","ref","accept","onChange","target","onClick","disabled","map","insight","onSubmit","e","placeholder","prev","_objectSpread","join","split","tag","filter","Boolean","rule","book","slice","precedents","caseStatusLabel","ACTIVE","ARCHIVED","PENDING_DELETE","caseStatusStyle","renderStatusBadge","renderDaysIndicator","days","tone","CaseCard","_ref2","item","variant","daysRemaining","createdAt","toLocaleDateString","lastAccessedAt","casesView","rows","toLocaleString","notification","message","readAt","medicalView","score","medicalQualityScore","findings","qualityFindings","reasoningFindings","flags","claims","events","timeline","knowledgeId","resources","literatureResources","onRefresh","dir","lastUpdated"],"sources":["C:/Office-Apps/LexMedical-App/src/components/AdminDashboard.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport {\r\n  BookChapter,\r\n  GlobalPrecedent,\r\n  CaseData,\r\n  CaseRecord,\r\n  CaseSummaryRecord,\r\n  NotificationRecord,\r\n  AIInsight,\r\n  KnowledgeDocumentSummary,\r\n  KnowledgeDocumentDetail,\r\n} from '../types';\r\nimport { saveBookChapter, saveGlobalPrecedent, getKnowledgeBase } from '../services/knowledgeBase';\r\nimport {\r\n  uploadChapterPdf,\r\n  isApiConfigured,\r\n  listCases as apiListCases,\r\n  getCase as apiGetCase,\r\n  renewCase as apiRenewCase,\r\n  archiveCase as apiArchiveCase,\r\n  deleteCase as apiDeleteCase,\r\n  exportCaseFile as apiExportCaseFile,\r\n  updateCaseMetadata as apiUpdateCaseMetadata,\r\n  listNotifications as apiListNotifications,\r\n  markNotificationRead as apiMarkNotificationRead,\r\n} from '../services/api';\r\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\r\nimport { Book, Gavel, LogOut, Save, Layout, UploadCloud, Loader2, Activity, AlertTriangle, Bell } from 'lucide-react';\r\nimport QualityBadge from './QualityBadge';\r\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\r\nimport KnowledgeFlags from './KnowledgeFlags';\r\nimport MedicalTimeline from './MedicalTimeline';\r\nimport MedicalQualityBox from './MedicalQualityBox';\r\nimport LiteraturePanel from './LiteraturePanel';\r\n\r\ninterface Props {\r\n  currentUserName: string;\r\n  onEditCase: (caseData: CaseData) => void;\r\n  onLogout: () => void;\r\n}\r\n\r\nconst AdminDashboard: React.FC<Props> = ({ currentUserName, onEditCase: _onEditCase, onLogout }) => {\r\n  const [activeTab, setActiveTab] = useState<'cases' | 'knowledge' | 'medical'>('knowledge');\r\n  const [brain, setBrain] = useState(getKnowledgeBase());\r\n  const [newChapter, setNewChapter] = useState<Partial<BookChapter>>({ title: '', content: '', tags: [], rules: [] });\r\n  const [newPrecedent, setNewPrecedent] = useState<Partial<GlobalPrecedent>>({ caseName: '', keyTakeaway: '', tags: [] });\r\n  const [importing, setImporting] = useState(false);\r\n  const [importMessage, setImportMessage] = useState('');\r\n  const [importInsights, setImportInsights] = useState<AIInsight[]>([]);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [medicalDocs, setMedicalDocs] = useState<KnowledgeDocumentSummary[]>([]);\r\n  const [selectedMedicalId, setSelectedMedicalId] = useState<string>('');\r\n  const [medicalDetail, setMedicalDetail] = useState<KnowledgeDocumentDetail | null>(null);\r\n  const [medicalInitialized, setMedicalInitialized] = useState(false);\r\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\r\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\r\n  const [medicalError, setMedicalError] = useState<string | null>(null);\r\n  const [caseLists, setCaseLists] = useState<{ ownCases: CaseRecord[]; otherCases: CaseSummaryRecord[] }>({\r\n    ownCases: [],\r\n    otherCases: [],\r\n  });\r\n  const [caseListLoading, setCaseListLoading] = useState(false);\r\n  const [caseListError, setCaseListError] = useState<string | null>(null);\r\n  const [selectedCase, setSelectedCase] = useState<CaseRecord | null>(null);\r\n  const [subjectDraft, setSubjectDraft] = useState('');\r\n  const [notifications, setNotifications] = useState<NotificationRecord[]>([]);\r\n  const [notificationsError, setNotificationsError] = useState<string | null>(null);\r\n\r\n  const handleSaveChapter = () => {\r\n    if (!newChapter.title || !newChapter.content) {\r\n      alert('חובה למלא כותרת ותוכן');\r\n      return;\r\n    }\r\n    const chapter: BookChapter = {\r\n      id: Date.now().toString(),\r\n      title: newChapter.title!,\r\n      content: newChapter.content!,\r\n      tags: newChapter.tags || [],\r\n      rules: newChapter.rules || [],\r\n    };\r\n    saveBookChapter(chapter);\r\n    setBrain(getKnowledgeBase());\r\n    setNewChapter({ title: '', content: '', tags: [], rules: [] });\r\n  };\r\n\r\n  const handleSavePrecedent = () => {\r\n    if (!newPrecedent.caseName || !newPrecedent.keyTakeaway) {\r\n      alert('חובה למלא שם ותובנה');\r\n      return;\r\n    }\r\n    const precedent: GlobalPrecedent = {\r\n      id: Date.now().toString(),\r\n      caseName: newPrecedent.caseName!,\r\n      keyTakeaway: newPrecedent.keyTakeaway!,\r\n      citation: newPrecedent.citation || '',\r\n      tags: newPrecedent.tags || [],\r\n      relevantIssues: [],\r\n    };\r\n    saveGlobalPrecedent(precedent);\r\n    setBrain(getKnowledgeBase());\r\n    setNewPrecedent({ caseName: '', keyTakeaway: '', tags: [] });\r\n  };\r\n\r\n  const importChapterFile = async (file: File) => {\r\n    setImporting(true);\r\n    setImportMessage(`מעלה את \"${file.name}\" לעיבוד...`);\r\n    setImportInsights([]);\r\n    try {\r\n      if (!isApiConfigured()) {\r\n        setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');\r\n        return;\r\n      }\r\n      const backendResult = await uploadChapterPdf(file, { docType: 'chapter' });\r\n      const chapter: BookChapter = {\r\n        id: backendResult.id,\r\n        title: backendResult.title,\r\n        content: backendResult.content || backendResult.summary,\r\n        tags: backendResult.tags || [],\r\n        rules: backendResult.rules || [],\r\n      };\r\n      saveBookChapter(chapter);\r\n      setBrain(getKnowledgeBase());\r\n      setNewChapter(chapter);\r\n      setImportInsights(backendResult.insights || []);\r\n      setImportMessage(`הפרק \"${chapter.title}\" עוּבד בהצלחה דרך השרת ונשמר במאגר.`);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');\r\n    } finally {\r\n      setImporting(false);\r\n      if (fileInputRef.current) fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handlePdfSelection = (files: FileList | null) => {\r\n    if (!files || !files.length) return;\r\n    const file = files[0];\r\n    if (file.type !== 'application/pdf') {\r\n      setImportMessage('נא לבחור קובץ PDF בלבד.');\r\n      return;\r\n    }\r\n    importChapterFile(file);\r\n  };\r\n\r\n  const handleDrop = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    setDragActive(false);\r\n    handlePdfSelection(event.dataTransfer.files);\r\n  };\r\n\r\n  const handleDrag = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    if (event.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (event.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const triggerFilePicker = () => fileInputRef.current?.click();\r\n\r\n  const refreshCaseLists = useCallback(async () => {\r\n    setCaseListLoading(true);\r\n    setCaseListError(null);\r\n    try {\r\n      const payload = await apiListCases();\r\n      setCaseLists(payload);\r\n      if (selectedCase && !payload.ownCases.find((entry) => entry.id === selectedCase.id)) {\r\n        setSelectedCase(null);\r\n      }\r\n      if (!selectedCase && payload.ownCases.length > 0) {\r\n        setSelectedCase(payload.ownCases[0]);\r\n        setSubjectDraft(payload.ownCases[0].topicSummary ?? '');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('טעינת התיקים נכשלה.');\r\n    } finally {\r\n      setCaseListLoading(false);\r\n    }\r\n  }, [selectedCase]);\r\n\r\n  const refreshNotifications = useCallback(async () => {\r\n    try {\r\n      const items = await apiListNotifications();\r\n      setNotifications(items);\r\n      setNotificationsError(null);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setNotificationsError('טעינת ההתראות נכשלה.');\r\n    }\r\n  }, []);\r\n\r\n  const handleSelectCaseDetail = useCallback(\r\n    async (caseId: string) => {\r\n      setCaseListLoading(true);\r\n      setCaseListError(null);\r\n      try {\r\n        const detail = await apiGetCase(caseId);\r\n        setSelectedCase(detail);\r\n        setSubjectDraft(detail.topicSummary ?? '');\r\n      } catch (error) {\r\n        console.error(error);\r\n        setCaseListError('טעינת פרטי התיק נכשלה.');\r\n      } finally {\r\n        setCaseListLoading(false);\r\n      }\r\n    },\r\n    [],\r\n  );\r\n\r\n  const handleExportCase = async (caseId: string, format: 'pdf' | 'json') => {\r\n    try {\r\n      const blob = await apiExportCaseFile(caseId, format);\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `case-${caseId}.${format === 'pdf' ? 'pdf' : 'json'}`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('ייצוא התיק נכשל.');\r\n    }\r\n  };\r\n\r\n  const handleRenewCase = async (caseId: string) => {\r\n    try {\r\n      await apiRenewCase(caseId);\r\n      await refreshCaseLists();\r\n      if (selectedCase?.id === caseId) {\r\n        const detail = await apiGetCase(caseId);\r\n        setSelectedCase(detail);\r\n        setSubjectDraft(detail.topicSummary ?? '');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('חידוש התיק נכשל.');\r\n    }\r\n  };\r\n\r\n  const handleArchiveCase = async (caseRecord: CaseRecord) => {\r\n    try {\r\n      if (caseRecord.status === 'ARCHIVED') {\r\n        await apiRenewCase(caseRecord.id);\r\n      } else {\r\n        await apiArchiveCase(caseRecord.id);\r\n      }\r\n      await refreshCaseLists();\r\n      if (selectedCase?.id === caseRecord.id) {\r\n        const detail = await apiGetCase(caseRecord.id);\r\n        setSelectedCase(detail);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('עדכון מצב הארכיון נכשל.');\r\n    }\r\n  };\r\n\r\n  const handleDeleteCase = async (caseId: string) => {\r\n    if (!window.confirm('האם למחוק את התיק באופן סופי? פעולה זו אינה ניתנת לשחזור.')) return;\r\n    try {\r\n      await apiDeleteCase(caseId);\r\n      if (selectedCase?.id === caseId) {\r\n        setSelectedCase(null);\r\n      }\r\n      await refreshCaseLists();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('מחיקת התיק נכשלה.');\r\n    }\r\n  };\r\n\r\n  const handleSaveMetadata = async () => {\r\n    if (!selectedCase) return;\r\n    try {\r\n      const updated = await apiUpdateCaseMetadata(selectedCase.id, { topicSummary: subjectDraft.trim() || undefined });\r\n      setSelectedCase(updated);\r\n      await refreshCaseLists();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setCaseListError('עדכון הנושא נכשל.');\r\n    }\r\n  };\r\n\r\n  const handleMarkNotification = async (notificationId: string) => {\r\n    try {\r\n      await apiMarkNotificationRead(notificationId);\r\n      await refreshNotifications();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setNotificationsError('סימון ההתראה נכשל.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical' || medicalInitialized) return;\r\n    let cancelled = false;\r\n    const loadDocuments = async () => {\r\n      setMedicalListLoading(true);\r\n      setMedicalError(null);\r\n      try {\r\n        const docs = await listKnowledgeDocuments({ docType: 'chapter', limit: 25 });\r\n        if (!cancelled) {\r\n          setMedicalDocs(docs);\r\n          setSelectedMedicalId(docs[0]?.id ?? '');\r\n          setMedicalInitialized(true);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalListLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDocuments();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, medicalInitialized]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'cases') return;\r\n    refreshCaseLists();\r\n    refreshNotifications();\r\n  }, [activeTab, refreshCaseLists, refreshNotifications]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical') return;\r\n    if (!selectedMedicalId) {\r\n      setMedicalDetail(null);\r\n      return;\r\n    }\r\n    let cancelled = false;\r\n    setMedicalDetailLoading(true);\r\n    setMedicalError(null);\r\n    const loadDetail = async () => {\r\n      try {\r\n        const doc = await getKnowledgeDocument(selectedMedicalId);\r\n        if (!cancelled) {\r\n          setMedicalDetail(doc);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת ניתוח רפואי נכשלה.');\r\n          setMedicalDetail(null);\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalDetailLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDetail();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, selectedMedicalId]);\r\n\r\n  const refreshMedicalDetail = useCallback(async () => {\r\n    if (!selectedMedicalId) return;\r\n    try {\r\n      const doc = await getKnowledgeDocument(selectedMedicalId);\r\n      setMedicalDetail(doc);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMedicalError('טעינת הניתוח הרפואי נכשלה.');\r\n    }\r\n  }, [selectedMedicalId]);\r\n\r\n  const knowledgeView = (\r\n    <div className=\"space-y-6\">\r\n      <div\r\n        className={`border-2 border-dashed rounded-xl p-6 bg-slate-50 text-center transition ${\r\n          dragActive ? 'border-blue-500 bg-blue-50/40' : 'border-slate-200'\r\n        }`}\r\n        onDragOver={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          className=\"hidden\"\r\n          accept=\"application/pdf\"\r\n          onChange={(event) => handlePdfSelection(event.target.files)}\r\n        />\r\n        <UploadCloud className=\"w-10 h-10 text-slate-400 mx-auto mb-3\" />\r\n        <p className=\"text-lg font-semibold text-slate-800\">גררו קובץ PDF של פרק \"תחשיבי נזק\"</p>\r\n        <p className=\"text-sm text-slate-500 mt-2\">הקבצים מעובדים ומנוסחים בשרת המאובטח – כולל רישום Audit אוטומטי.</p>\r\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={triggerFilePicker}\r\n            className=\"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition\"\r\n            disabled={importing}\r\n          >\r\n            בחר קובץ PDF\r\n          </button>\r\n          {importing && (\r\n            <div className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              מעבד קובץ...\r\n            </div>\r\n          )}\r\n        </div>\r\n        {importMessage && <p className=\"text-sm text-slate-600 mt-3\">{importMessage}</p>}\r\n        {importInsights.length > 0 && (\r\n          <div className=\"mt-4 text-left\">\r\n            <p className=\"text-xs font-bold text-slate-500 mb-2\">תובנות שהופקו:</p>\r\n            <ul className=\"space-y-1 text-sm text-slate-600\">\r\n              {importInsights.map((insight) => (\r\n                <li key={insight.title} className=\"border border-slate-100 rounded px-3 py-2 bg-white\">\r\n                  <span className=\"font-semibold\">{insight.title}: </span>\r\n                  {insight.content}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid lg:grid-cols-2 gap-6\">\r\n        <form\r\n          className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSaveChapter();\r\n          }}\r\n        >\r\n          <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n            <Book className=\"w-5 h-5 text-blue-600\" /> הוסף פרק חדש\r\n          </h2>\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"כותרת הפרק\"\r\n            value={newChapter.title || ''}\r\n            onChange={(e) => setNewChapter((prev) => ({ ...prev, title: e.target.value }))}\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-24\"\r\n            placeholder=\"תוכן / תקציר\"\r\n            value={newChapter.content || ''}\r\n            onChange={(e) => setNewChapter((prev) => ({ ...prev, content: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"תגיות (מופרדות בפסיק)\"\r\n            value={(newChapter.tags || []).join(', ')}\r\n            onChange={(e) =>\r\n              setNewChapter((prev) => ({\r\n                ...prev,\r\n                tags: e.target.value\r\n                  .split(',')\r\n                  .map((tag) => tag.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-20 text-sm\"\r\n            placeholder=\"כללים (כל שורה כלל חדש)\"\r\n            value={(newChapter.rules || []).join('\\n')}\r\n            onChange={(e) =>\r\n              setNewChapter((prev) => ({\r\n                ...prev,\r\n                rules: e.target.value\r\n                  .split('\\n')\r\n                  .map((rule) => rule.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <button type=\"submit\" className=\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\">\r\n            <Save className=\"w-4 h-4\" /> שמור פרק\r\n          </button>\r\n        </form>\r\n\r\n        <form\r\n          className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSavePrecedent();\r\n          }}\r\n        >\r\n          <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n            <Gavel className=\"w-5 h-5 text-purple-600\" /> הוסף תקדים חדש\r\n          </h2>\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"שם ההליך / תקדים\"\r\n            value={newPrecedent.caseName || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, caseName: e.target.value }))}\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-24\"\r\n            placeholder=\"תובנה מרכזית\"\r\n            value={newPrecedent.keyTakeaway || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, keyTakeaway: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"ציון / מקור\"\r\n            value={newPrecedent.citation || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, citation: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"תגיות (מופרדות בפסיק)\"\r\n            value={(newPrecedent.tags || []).join(', ')}\r\n            onChange={(e) =>\r\n              setNewPrecedent((prev) => ({\r\n                ...prev,\r\n                tags: e.target.value\r\n                  .split(',')\r\n                  .map((tag) => tag.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <button type=\"submit\" className=\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\">\r\n            <Save className=\"w-4 h-4\" /> שמור תקדים\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white p-5 rounded shadow border border-slate-200\">\r\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n            <Book className=\"w-4 h-4 text-blue-600\" /> פרקים קיימים ({brain.book.length})\r\n          </h3>\r\n          {brain.book.length === 0 ? (\r\n            <p className=\"text-sm text-slate-500\">אין פרקים שמורים.</p>\r\n          ) : (\r\n            <ul className=\"space-y-2\">\r\n              {brain.book.slice(0, 4).map((chapter) => (\r\n                <li key={chapter.id} className=\"border border-slate-100 rounded p-3\">\r\n                  <p className=\"font-semibold text-slate-800\">{chapter.title}</p>\r\n                  <p className=\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\">{chapter.content}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n        <div className=\"bg-white p-5 rounded shadow border border-slate-200\">\r\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n            <Gavel className=\"w-4 h-4 text-purple-600\" /> תקדימים ({brain.precedents.length})\r\n          </h3>\r\n          {brain.precedents.length === 0 ? (\r\n            <p className=\"text-sm text-slate-500\">אין תקדימים שמורים.</p>\r\n          ) : (\r\n            <ul className=\"space-y-2\">\r\n              {brain.precedents.slice(0, 4).map((precedent) => (\r\n                <li key={precedent.id} className=\"border border-slate-100 rounded p-3\">\r\n                  <p className=\"font-semibold text-slate-800\">{precedent.caseName}</p>\r\n                  <p className=\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\">{precedent.keyTakeaway}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const caseStatusLabel: Record<'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE', string> = {\r\n    ACTIVE: 'פעיל',\r\n    ARCHIVED: 'בארכיון',\r\n    PENDING_DELETE: 'ממתין למחיקה',\r\n  };\r\n\r\n  const caseStatusStyle: Record<'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE', string> = {\r\n    ACTIVE: 'bg-emerald-50 text-emerald-700',\r\n    ARCHIVED: 'bg-slate-100 text-slate-600',\r\n    PENDING_DELETE: 'bg-rose-50 text-rose-700',\r\n  };\r\n\r\n  const renderStatusBadge = (status: 'ACTIVE' | 'ARCHIVED' | 'PENDING_DELETE') => (\r\n    <span className={`inline-flex items-center rounded px-2 py-0.5 text-xs font-semibold ${caseStatusStyle[status]}`}>\r\n      {caseStatusLabel[status]}\r\n    </span>\r\n  );\r\n\r\n  const renderDaysIndicator = (days?: number) => {\r\n    if (days === undefined) return <span className=\"text-xs text-slate-500\">ללא מידע</span>;\r\n    if (days === 0) {\r\n      return <span className=\"text-xs text-rose-600 font-semibold\">פחות מ-24 שעות למחיקה</span>;\r\n    }\r\n    const tone =\r\n      days <= 3 ? 'text-rose-600 font-semibold' : days <= 15 ? 'text-amber-600 font-semibold' : 'text-slate-500';\r\n    return <span className={`text-xs ${tone}`}>נותרו {days} ימים</span>;\r\n  };\r\n\r\n  const CaseCard = ({\r\n    item,\r\n    variant,\r\n  }: {\r\n    item: CaseSummaryRecord;\r\n    variant: 'owner' | 'readonly';\r\n  }) => (\r\n    <div\r\n      className={`card-shell transition hover:shadow-2xl ${variant === 'owner' ? 'cursor-pointer' : ''}`}\r\n      onClick={variant === 'owner' ? () => handleSelectCaseDetail(item.id) : undefined}\r\n    >\r\n      <div className=\"card-accent\" />\r\n      <div className=\"card-head\">\r\n        <div className=\"space-y-1\">\r\n          <p className=\"text-base font-semibold\">{item.title}</p>\r\n          <p className=\"text-sm text-slate-light truncate\">{item.topicSummary}</p>\r\n        </div>\r\n        <span className={variant === 'owner' ? 'badge-owner' : 'badge-readonly'}>\r\n          {variant === 'owner' ? 'שלי' : 'קריאה בלבד'}\r\n        </span>\r\n      </div>\r\n      <div className=\"card-underline\" />\r\n      <div className=\"card-body space-y-2 text-sm text-slate\">\r\n        {variant === 'owner' ? (\r\n          <>\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              {renderStatusBadge(item.status as any)}\r\n              {renderDaysIndicator(item.daysRemaining)}\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-4 text-xs\">\r\n              <span>נוצר: {new Date(item.createdAt).toLocaleDateString('he-IL')}</span>\r\n              {item.lastAccessedAt && <span>עודכן: {new Date(item.lastAccessedAt).toLocaleDateString('he-IL')}</span>}\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <span className=\"text-xs text-slate-light\">\r\n            עודכן: {new Date(item.createdAt).toLocaleDateString('he-IL')}\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const casesView = (\r\n    <div className=\"space-y-6\">\r\n      <section className=\"card-shell\">\r\n        <div className=\"card-accent\" />\r\n        <div className=\"card-head\">\r\n          <div>\r\n            <p className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <Layout className=\"w-5 h-5 text-gold\" /> ניהול תיקים\r\n            </p>\r\n            <p className=\"text-sm text-slate-light\">\r\n              תצוגה משרדית פנימית – תיקים אישיים לצד תיקים ללימוד והשוואה.\r\n            </p>\r\n          </div>\r\n          <AlertTriangle className=\"w-5 h-5 text-gold-light\" />\r\n        </div>\r\n        <div className=\"card-underline\" />\r\n        <div className=\"card-body text-sm text-slate\">\r\n          מחיקה אוטומטית מתבצעת לאחר 90 יום. מומלץ לתייק או לייצא מסמכים טרם המחיקה.\r\n        </div>\r\n      </section>\r\n\r\n      {caseListError && (\r\n        <div className=\"rounded-card border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700\">{caseListError}</div>\r\n      )}\r\n      {caseListLoading && (\r\n        <div className=\"flex items-center gap-2 text-sm text-slate\">\r\n          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          טוען נתוני תיקים...\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid gap-6 lg:grid-cols-2\">\r\n        <section className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-semibold text-slate\">התיקים שלי ({caseLists.ownCases.length})</h3>\r\n          {caseLists.ownCases.length === 0 ? (\r\n            <div className=\"card-shell\">\r\n              <div className=\"card-accent\" />\r\n              <div className=\"card-body text-sm text-slate\">אין תיקים בבעלותך כרגע.</div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {caseLists.ownCases.map((item) => (\r\n                <CaseCard key={item.id} item={item} variant=\"owner\" />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </section>\r\n\r\n        <section className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-semibold text-slate\">תיקים אחרים ({caseLists.otherCases.length})</h3>\r\n          {caseLists.otherCases.length === 0 ? (\r\n            <div className=\"card-shell\">\r\n              <div className=\"card-accent\" />\r\n              <div className=\"card-body text-sm text-slate\">אין תיקים חיצוניים זמינים לצפייה.</div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {caseLists.otherCases.map((item) => (\r\n                <CaseCard key={item.id} item={item} variant=\"readonly\" />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </section>\r\n      </div>\r\n\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        <div className=\"card-shell lg:col-span-2\">\r\n          <div className=\"card-accent\" />\r\n          <div className=\"card-head\">\r\n            <p className=\"text-base font-semibold\">פרטי תיק נבחר</p>\r\n            {selectedCase && <span className=\"badge-status\">{selectedCase.title}</span>}\r\n          </div>\r\n          <div className=\"card-underline\" />\r\n          <div className=\"card-body text-sm text-slate space-y-3\">\r\n            {selectedCase ? (\r\n              <>\r\n                <div className=\"flex flex-wrap items-center gap-2\">\r\n                  {renderStatusBadge(selectedCase.status)}\r\n                  {renderDaysIndicator(selectedCase.daysRemaining)}\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-slate-light mb-1\">נושא בטוח</p>\r\n                  <textarea\r\n                    className=\"w-full rounded-2xl border border-pearl bg-pearl/60 p-3 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\"\r\n                    rows={3}\r\n                    value={subjectDraft}\r\n                    onChange={(e) => setSubjectDraft(e.target.value)}\r\n                    placeholder=\"תיאור מילולי קצר של התיק...\"\r\n                  />\r\n                  <div className=\"mt-2 flex justify-end\">\r\n                    <button onClick={handleSaveMetadata} className=\"btn-primary text-xs px-4 py-1.5\">\r\n                      שמור נושא\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-xs text-slate-light flex flex-wrap gap-4\">\r\n                  <span>נוצר: {new Date(selectedCase.createdAt).toLocaleString('he-IL')}</span>\r\n                  {selectedCase.lastAccessedAt && (\r\n                    <span>גישה אחרונה: {new Date(selectedCase.lastAccessedAt).toLocaleString('he-IL')}</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"pt-4 flex flex-wrap gap-2 border-t border-pearl/60\">\r\n                  <button\r\n                    className=\"btn-primary text-xs px-4 py-1.5\"\r\n                    onClick={() => handleExportCase(selectedCase.id, 'pdf')}\r\n                  >\r\n                    ייצא PDF\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-secondary text-xs px-4 py-1.5\"\r\n                    onClick={() => handleExportCase(selectedCase.id, 'json')}\r\n                  >\r\n                    ייצא JSON\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-outline text-xs px-4 py-1.5\"\r\n                    onClick={() => handleRenewCase(selectedCase.id)}\r\n                  >\r\n                    חדש תיק\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-outline text-xs px-4 py-1.5\"\r\n                    onClick={() => handleArchiveCase(selectedCase)}\r\n                  >\r\n                    {selectedCase.status === 'ARCHIVED' ? 'בטל ארכיון' : 'העבר לארכיון'}\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-outline text-xs px-4 py-1.5 border-danger text-danger hover:bg-danger/10\"\r\n                    onClick={() => handleDeleteCase(selectedCase.id)}\r\n                  >\r\n                    מחיקה\r\n                  </button>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <p className=\"text-sm text-slate\">בחר תיק מהרשימה להצגת פרטים.</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card-shell\">\r\n          <div className=\"card-accent\" />\r\n          <div className=\"card-head\">\r\n            <p className=\"text-base font-semibold flex items-center gap-2\">\r\n              <Bell className=\"w-4 h-4 text-gold\" />\r\n              התראות שמירה\r\n            </p>\r\n          </div>\r\n          <div className=\"card-underline\" />\r\n          <div className=\"card-body space-y-2 text-sm text-slate\">\r\n            {notificationsError && (\r\n              <div className=\"rounded border border-rose-200 bg-rose-50 p-2 text-xs text-rose-700\">{notificationsError}</div>\r\n            )}\r\n            {notifications.length === 0 ? (\r\n              <p className=\"text-sm text-slate\">אין התראות פעילות.</p>\r\n            ) : (\r\n              <ul className=\"space-y-2\">\r\n                {notifications.map((notification) => (\r\n                  <li key={notification.id} className=\"rounded-2xl border border-pearl bg-pearl/40 p-3\">\r\n                    <p className=\"text-slate\">{notification.message}</p>\r\n                    <p className=\"text-[11px] text-slate-light mt-1\">\r\n                      {new Date(notification.createdAt).toLocaleString('he-IL')}\r\n                    </p>\r\n                    {!notification.readAt && (\r\n                      <button\r\n                        className=\"mt-2 text-xs text-gold hover:text-gold-light\"\r\n                        onClick={() => handleMarkNotification(notification.id)}\r\n                      >\r\n                        סמן כנקרא\r\n                      </button>\r\n                    )}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const medicalView = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-end\">\r\n        <div className=\"flex-1\">\r\n          <label className=\"text-xs font-semibold text-slate-500\">בחר מסמך רפואי</label>\r\n          <select\r\n            className=\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\"\r\n            value={selectedMedicalId}\r\n            onChange={(e) => setSelectedMedicalId(e.target.value)}\r\n            disabled={!medicalDocs.length || medicalListLoading}\r\n          >\r\n            {medicalDocs.map((doc) => (\r\n              <option key={doc.id} value={doc.id}>\r\n                {doc.title}\r\n              </option>\r\n            ))}\r\n            {!medicalDocs.length && <option value=\"\">אין מסמכים</option>}\r\n          </select>\r\n        </div>\r\n        <div className=\"md:w-1/3\">\r\n          <QualityBadge score={medicalDetail?.score} />\r\n        </div>\r\n      </div>\r\n\r\n      {medicalError && (\r\n        <div className=\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\">{medicalError}</div>\r\n      )}\r\n\r\n      {(medicalListLoading || medicalDetailLoading) && (\r\n        <div className=\"flex items-center gap-2 text-sm text-slate-500\">\r\n          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          טוען נתוני ניתוח רפואי...\r\n        </div>\r\n      )}\r\n\r\n      {!medicalListLoading && !medicalDetail && !medicalError && (\r\n        <div className=\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\">\r\n          אין ניתוחים רפואיים זמינים להצגה.\r\n        </div>\r\n      )}\r\n\r\n      {medicalDetail && (\r\n        <>\r\n          <MedicalQualityBox\r\n            score={medicalDetail.medicalQualityScore}\r\n            findings={medicalDetail.qualityFindings ?? []}\r\n            reasoningFindings={medicalDetail.reasoningFindings ?? []}\r\n          />\r\n          <KnowledgeFlags flags={medicalDetail.flags || []} />\r\n          <KnowledgeClaimsPanel claims={medicalDetail.claims || []} limit={5} />\r\n          <MedicalTimeline events={medicalDetail.timeline || []} />\r\n          <LiteraturePanel\r\n            knowledgeId={medicalDetail.id}\r\n            resources={medicalDetail.literatureResources ?? []}\r\n            onRefresh={refreshMedicalDetail}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-pearl text-navy\" dir=\"rtl\">\r\n      <header className=\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <span className=\"text-xl font-semibold brand-mark\">LexMedical Admin</span>\r\n          <span className=\"text-xs text-gold-light hidden md:inline\">\r\n            שליטה משרדית בחומר הרפואי־משפטי\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-4 text-sm\">\r\n          <span className=\"text-pearl\">מחובר: {currentUserName}</span>\r\n          <button onClick={onLogout} className=\"flex items-center gap-2 rounded-full border border-gold px-3 py-1 text-gold hover:bg-gold/10 transition\">\r\n            <LogOut className=\"w-4 h-4\" /> יציאה\r\n          </button>\r\n        </div>\r\n      </header>\r\n      <main className=\"max-w-6xl mx-auto px-6 py-8 space-y-6\">\r\n        <div className=\"rounded-card border border-pearl bg-white p-6 shadow-card-xl flex flex-wrap items-center justify-between gap-4\">\r\n          <div>\r\n            <p className=\"text-sm text-slate\">עודכן לאחרונה: {new Date(brain.lastUpdated).toLocaleString('he-IL')}</p>\r\n            <p className=\"text-xs text-slate-light\">ממשק פנימי לשימוש עורכי דין בלבד</p>\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-3\">\r\n            <button\r\n              onClick={() => setActiveTab('knowledge')}\r\n              className={`rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 ${\r\n                activeTab === 'knowledge' ? 'bg-navy text-gold' : 'bg-pearl border border-pearl text-slate'\r\n              }`}\r\n            >\r\n              <Book className=\"w-4 h-4\" /> ידע\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('cases')}\r\n              className={`rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 ${\r\n                activeTab === 'cases' ? 'bg-navy text-gold' : 'bg-pearl border border-pearl text-slate'\r\n              }`}\r\n            >\r\n              <Layout className=\"w-4 h-4\" /> תיקים\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('medical')}\r\n              className={`rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 ${\r\n                activeTab === 'medical' ? 'bg-navy text-gold' : 'bg-pearl border border-pearl text-slate'\r\n              }`}\r\n            >\r\n              <Activity className=\"w-4 h-4\" /> Medical Analysis\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {activeTab === 'knowledge' && knowledgeView}\r\n        {activeTab === 'cases' && casesView}\r\n        {activeTab === 'medical' && medicalView}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}