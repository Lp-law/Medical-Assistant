{"ast":null,"code":"var _jsxFileName = \"C:\\\\Office-Apps\\\\LexMedical-App\\\\src\\\\components\\\\LiabilityStep.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { calculateLiabilityScore } from '../services/calculations';\nimport { Scale, Loader2, AlertTriangle, Book } from 'lucide-react';\nimport LegalDisclaimer from './LegalDisclaimer';\nimport SmartAssistant from './SmartAssistant';\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\nimport QualityBadge from './QualityBadge';\nimport KnowledgeFlags from './KnowledgeFlags';\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\nimport MedicalTimeline from './MedicalTimeline';\nimport MedicalQualityBox from './MedicalQualityBox';\nimport LiteraturePanel from './LiteraturePanel';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LiabilityStep = ({\n  caseData,\n  updateCaseData\n}) => {\n  _s();\n  var _medicalDetail$flags, _medicalDetail$claims, _medicalDetail$flags2, _medicalDetail$qualit, _medicalDetail$reason, _medicalDetail$litera;\n  const [localAnalysis, setLocalAnalysis] = useState(caseData.liability);\n  const [assistantOpen, setAssistantOpen] = useState(false);\n  const [evidenceOpen, setEvidenceOpen] = useState(false);\n  const [evidenceInitialized, setEvidenceInitialized] = useState(false);\n  const [medicalDocs, setMedicalDocs] = useState([]);\n  const [selectedMedicalId, setSelectedMedicalId] = useState('');\n  const [medicalDetail, setMedicalDetail] = useState(null);\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\n  const [medicalError, setMedicalError] = useState(null);\n  useEffect(() => {\n    const result = calculateLiabilityScore(50, localAnalysis.aggravatingFactors, localAnalysis.mitigatingFactors, localAnalysis.medicalRecordQuality, localAnalysis.expertCourtStance);\n    setLocalAnalysis(prev => ({\n      ...prev,\n      probability: result.probability,\n      probabilityRange: result.range,\n      uncertainty: result.uncertainty\n    }));\n  }, [localAnalysis.aggravatingFactors, localAnalysis.mitigatingFactors, localAnalysis.medicalRecordQuality, localAnalysis.expertCourtStance]);\n  useEffect(() => {\n    if (caseData.liability === localAnalysis) return;\n    setLocalAnalysis(caseData.liability);\n  }, [caseData.liability, localAnalysis]);\n  useEffect(() => {\n    updateCaseData(prev => {\n      if (!prev) return prev;\n      if (prev.liability === localAnalysis) return prev;\n      return {\n        ...prev,\n        liability: localAnalysis\n      };\n    });\n  }, [localAnalysis, updateCaseData]);\n  useEffect(() => {\n    if (!evidenceOpen || evidenceInitialized) return;\n    let cancelled = false;\n    const loadDocuments = async () => {\n      setMedicalListLoading(true);\n      setMedicalError(null);\n      try {\n        const docs = await listKnowledgeDocuments({\n          docType: 'chapter',\n          limit: 10\n        });\n        if (!cancelled) {\n          var _docs$0$id, _docs$;\n          setMedicalDocs(docs);\n          setSelectedMedicalId((_docs$0$id = (_docs$ = docs[0]) === null || _docs$ === void 0 ? void 0 : _docs$.id) !== null && _docs$0$id !== void 0 ? _docs$0$id : '');\n          setEvidenceInitialized(true);\n        }\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setMedicalError('טעינת ניתוחים רפואיים נכשלה.');\n        }\n      } finally {\n        if (!cancelled) {\n          setMedicalListLoading(false);\n        }\n      }\n    };\n    loadDocuments();\n    return () => {\n      cancelled = true;\n    };\n  }, [evidenceOpen, evidenceInitialized]);\n  useEffect(() => {\n    if (!evidenceOpen || !selectedMedicalId) {\n      setMedicalDetail(null);\n      return;\n    }\n    let cancelled = false;\n    setMedicalDetailLoading(true);\n    setMedicalError(null);\n    const loadDetail = async () => {\n      try {\n        const doc = await getKnowledgeDocument(selectedMedicalId);\n        if (!cancelled) {\n          setMedicalDetail(doc);\n        }\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setMedicalError('טעינת המסמך הרפואי נכשלה.');\n          setMedicalDetail(null);\n        }\n      } finally {\n        if (!cancelled) {\n          setMedicalDetailLoading(false);\n        }\n      }\n    };\n    loadDetail();\n    return () => {\n      cancelled = true;\n    };\n  }, [evidenceOpen, selectedMedicalId]);\n  const refreshEvidenceDetail = useCallback(async () => {\n    if (!selectedMedicalId) return;\n    try {\n      const doc = await getKnowledgeDocument(selectedMedicalId);\n      setMedicalDetail(doc);\n    } catch (error) {\n      console.error(error);\n      setMedicalError('טעינת המסמך הרפואי נכשלה.');\n    }\n  }, [selectedMedicalId]);\n  const requiresHumanExpert = medicalDetail === null || medicalDetail === void 0 ? void 0 : (_medicalDetail$flags = medicalDetail.flags) === null || _medicalDetail$flags === void 0 ? void 0 : _medicalDetail$flags.some(flag => flag.code === 'HUMAN_EXPERT_REQUIRED');\n  const hasAssertionConflict = Boolean(medicalDetail === null || medicalDetail === void 0 ? void 0 : (_medicalDetail$claims = medicalDetail.claims) === null || _medicalDetail$claims === void 0 ? void 0 : _medicalDetail$claims.some(claim => claim.assertionType === 'FACT')) && Boolean(medicalDetail === null || medicalDetail === void 0 ? void 0 : (_medicalDetail$flags2 = medicalDetail.flags) === null || _medicalDetail$flags2 === void 0 ? void 0 : _medicalDetail$flags2.some(flag => flag.severity === 'critical'));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex relative\",\n    children: [/*#__PURE__*/_jsxDEV(SmartAssistant, {\n      isOpen: assistantOpen,\n      onClose: () => setAssistantOpen(false),\n      contextQuery: \"\",\n      onImportPrecedent: () => {},\n      onImportRule: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 space-y-8 pb-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-shell\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-accent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-head\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Scale, {\n              className: \"w-5 h-5 text-gold\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this), \" \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05D7\\u05D1\\u05D5\\u05EA\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-underline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-card border border-pearl bg-pearl/40 p-4 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-4xl font-bold text-navy\",\n              dir: \"ltr\",\n              children: [localAnalysis.probability, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-slate-light\",\n              children: \"\\u05E1\\u05D9\\u05DB\\u05D5\\u05D9 \\u05DC\\u05EA\\u05D1\\u05D9\\u05E2\\u05D4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-4 border-t border-pearl/60\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-outline w-full justify-between px-4 py-3\",\n              onClick: () => setEvidenceOpen(prev => !prev),\n              \"aria-expanded\": evidenceOpen,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Medical Evidence\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: evidenceOpen ? 'הסתר' : 'הצג'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), (requiresHumanExpert || hasAssertionConflict) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 state-block state-block--error text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                className: \"state-block__icon\",\n                \"aria-hidden\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"state-block__title\",\n                children: requiresHumanExpert ? 'נדרש מומחה אנושי' : 'זוהתה סתירה בין הטענות לדגלים'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"state-block__description\",\n                children: requiresHumanExpert ? 'קיים דגל HUMAN_EXPERT_REQUIRED בתיק. מומלץ לערב מומחה רפואי לפני המשך טיפול.' : 'יש דגלים קריטיים לצד טענות המסומנות כעובדה. ודא את הממצאים לפני הסתמכות.'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this), evidenceOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 space-y-4\",\n              children: [medicalError && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"state-block state-block--error text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                  className: \"state-block__icon\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"state-block__title\",\n                  children: \"\\u05D8\\u05E2\\u05D9\\u05E0\\u05EA \\u05D4\\u05DE\\u05E1\\u05DE\\u05DA \\u05E0\\u05DB\\u05E9\\u05DC\\u05D4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"state-block__description\",\n                  children: medicalError\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 21\n              }, this), medicalListLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loader-inline\",\n                children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                  className: \"loader-inline__icon\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 23\n                }, this), \"\\u05D8\\u05D5\\u05E2\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 21\n              }, this), !medicalListLoading && medicalDocs.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"state-block text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(Book, {\n                  className: \"state-block__icon\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"state-block__title\",\n                  children: \"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"state-block__description\",\n                  children: \"\\u05D9\\u05D9\\u05D1\\u05D0 \\u05D0\\u05D5 \\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9 \\u05DB\\u05D3\\u05D9 \\u05DC\\u05E6\\u05E4\\u05D5\\u05EA \\u05D1\\u05E0\\u05D9\\u05EA\\u05D5\\u05D7.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 21\n              }, this), medicalDocs.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"text-xs font-semibold text-slate-light\",\n                  children: \"\\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",\n                  value: selectedMedicalId,\n                  onChange: e => setSelectedMedicalId(e.target.value),\n                  disabled: medicalListLoading,\n                  children: medicalDocs.map(doc => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: doc.id,\n                    children: doc.title\n                  }, doc.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 21\n              }, this), medicalDetailLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loader-inline\",\n                children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                  className: \"loader-inline__icon\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 23\n                }, this), \"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this), medicalDetail && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(QualityBadge, {\n                  score: medicalDetail.score,\n                  label: \"\\u05DE\\u05D3\\u05D3 \\u05D0\\u05D9\\u05DB\\u05D5\\u05EA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(MedicalQualityBox, {\n                  score: medicalDetail.medicalQualityScore,\n                  findings: (_medicalDetail$qualit = medicalDetail.qualityFindings) !== null && _medicalDetail$qualit !== void 0 ? _medicalDetail$qualit : [],\n                  reasoningFindings: (_medicalDetail$reason = medicalDetail.reasoningFindings) !== null && _medicalDetail$reason !== void 0 ? _medicalDetail$reason : []\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(KnowledgeFlags, {\n                  flags: medicalDetail.flags || []\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(KnowledgeClaimsPanel, {\n                  claims: medicalDetail.claims || [],\n                  limit: 5\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(MedicalTimeline, {\n                  events: medicalDetail.timeline || []\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(LiteraturePanel, {\n                  knowledgeId: medicalDetail.id,\n                  resources: (_medicalDetail$litera = medicalDetail.literatureResources) !== null && _medicalDetail$litera !== void 0 ? _medicalDetail$litera : [],\n                  onRefresh: refreshEvidenceDetail\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true), /*#__PURE__*/_jsxDEV(LegalDisclaimer, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n};\n_s(LiabilityStep, \"bimv1hRfmCnwz3n/cEUkWAEM9is=\");\n_c = LiabilityStep;\nexport default LiabilityStep;\nvar _c;\n$RefreshReg$(_c, \"LiabilityStep\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","calculateLiabilityScore","Scale","Loader2","AlertTriangle","Book","LegalDisclaimer","SmartAssistant","listKnowledgeDocuments","getKnowledgeDocument","QualityBadge","KnowledgeFlags","KnowledgeClaimsPanel","MedicalTimeline","MedicalQualityBox","LiteraturePanel","jsxDEV","_jsxDEV","Fragment","_Fragment","LiabilityStep","caseData","updateCaseData","_s","_medicalDetail$flags","_medicalDetail$claims","_medicalDetail$flags2","_medicalDetail$qualit","_medicalDetail$reason","_medicalDetail$litera","localAnalysis","setLocalAnalysis","liability","assistantOpen","setAssistantOpen","evidenceOpen","setEvidenceOpen","evidenceInitialized","setEvidenceInitialized","medicalDocs","setMedicalDocs","selectedMedicalId","setSelectedMedicalId","medicalDetail","setMedicalDetail","medicalListLoading","setMedicalListLoading","medicalDetailLoading","setMedicalDetailLoading","medicalError","setMedicalError","result","aggravatingFactors","mitigatingFactors","medicalRecordQuality","expertCourtStance","prev","probability","probabilityRange","range","uncertainty","cancelled","loadDocuments","docs","docType","limit","_docs$0$id","_docs$","id","error","console","loadDetail","doc","refreshEvidenceDetail","requiresHumanExpert","flags","some","flag","code","hasAssertionConflict","Boolean","claims","claim","assertionType","severity","className","children","isOpen","onClose","contextQuery","onImportPrecedent","onImportRule","fileName","_jsxFileName","lineNumber","columnNumber","dir","type","onClick","length","value","onChange","e","target","disabled","map","title","score","label","medicalQualityScore","findings","qualityFindings","reasoningFindings","events","timeline","knowledgeId","resources","literatureResources","onRefresh","_c","$RefreshReg$"],"sources":["C:/Office-Apps/LexMedical-App/src/components/LiabilityStep.tsx"],"sourcesContent":["import React, { useState, useEffect, Dispatch, SetStateAction, useCallback } from 'react';\nimport {\n  CaseData,\n  LiabilityAnalysis,\n  KnowledgeDocumentSummary,\n  KnowledgeDocumentDetail,\n} from '../types';\nimport { calculateLiabilityScore } from '../services/calculations';\nimport { Scale, Loader2, AlertTriangle, Book } from 'lucide-react';\nimport LegalDisclaimer from './LegalDisclaimer';\nimport SmartAssistant from './SmartAssistant';\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\nimport QualityBadge from './QualityBadge';\nimport KnowledgeFlags from './KnowledgeFlags';\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\nimport MedicalTimeline from './MedicalTimeline';\nimport MedicalQualityBox from './MedicalQualityBox';\nimport LiteraturePanel from './LiteraturePanel';\n\ninterface Props {\n  caseData: CaseData;\n  updateCaseData: Dispatch<SetStateAction<CaseData | null>>;\n}\n\nconst LiabilityStep: React.FC<Props> = ({ caseData, updateCaseData }) => {\n  const [localAnalysis, setLocalAnalysis] = useState<LiabilityAnalysis>(caseData.liability);\n  const [assistantOpen, setAssistantOpen] = useState(false);\n  const [evidenceOpen, setEvidenceOpen] = useState(false);\n  const [evidenceInitialized, setEvidenceInitialized] = useState(false);\n  const [medicalDocs, setMedicalDocs] = useState<KnowledgeDocumentSummary[]>([]);\n  const [selectedMedicalId, setSelectedMedicalId] = useState<string>('');\n  const [medicalDetail, setMedicalDetail] = useState<KnowledgeDocumentDetail | null>(null);\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\n  const [medicalError, setMedicalError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const result = calculateLiabilityScore(\n      50,\n      localAnalysis.aggravatingFactors,\n      localAnalysis.mitigatingFactors,\n      localAnalysis.medicalRecordQuality,\n      localAnalysis.expertCourtStance\n    );\n    setLocalAnalysis((prev: LiabilityAnalysis) => ({\n      ...prev,\n      probability: result.probability,\n      probabilityRange: result.range,\n      uncertainty: result.uncertainty,\n    }));\n  }, [localAnalysis.aggravatingFactors, localAnalysis.mitigatingFactors, localAnalysis.medicalRecordQuality, localAnalysis.expertCourtStance]);\n\n  useEffect(() => {\n    if (caseData.liability === localAnalysis) return;\n    setLocalAnalysis(caseData.liability);\n  }, [caseData.liability, localAnalysis]);\n\n  useEffect(() => {\n    updateCaseData((prev) => {\n      if (!prev) return prev;\n      if (prev.liability === localAnalysis) return prev;\n      return { ...prev, liability: localAnalysis };\n    });\n  }, [localAnalysis, updateCaseData]);\n\n  useEffect(() => {\n    if (!evidenceOpen || evidenceInitialized) return;\n    let cancelled = false;\n    const loadDocuments = async () => {\n      setMedicalListLoading(true);\n      setMedicalError(null);\n      try {\n        const docs = await listKnowledgeDocuments({ docType: 'chapter', limit: 10 });\n        if (!cancelled) {\n          setMedicalDocs(docs);\n          setSelectedMedicalId(docs[0]?.id ?? '');\n          setEvidenceInitialized(true);\n        }\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setMedicalError('טעינת ניתוחים רפואיים נכשלה.');\n        }\n      } finally {\n        if (!cancelled) {\n          setMedicalListLoading(false);\n        }\n      }\n    };\n    loadDocuments();\n    return () => {\n      cancelled = true;\n    };\n  }, [evidenceOpen, evidenceInitialized]);\n\n  useEffect(() => {\n    if (!evidenceOpen || !selectedMedicalId) {\n      setMedicalDetail(null);\n      return;\n    }\n    let cancelled = false;\n    setMedicalDetailLoading(true);\n    setMedicalError(null);\n    const loadDetail = async () => {\n      try {\n        const doc = await getKnowledgeDocument(selectedMedicalId);\n        if (!cancelled) {\n          setMedicalDetail(doc);\n        }\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setMedicalError('טעינת המסמך הרפואי נכשלה.');\n          setMedicalDetail(null);\n        }\n      } finally {\n        if (!cancelled) {\n          setMedicalDetailLoading(false);\n        }\n      }\n    };\n    loadDetail();\n    return () => {\n      cancelled = true;\n    };\n  }, [evidenceOpen, selectedMedicalId]);\n\n  const refreshEvidenceDetail = useCallback(async () => {\n    if (!selectedMedicalId) return;\n    try {\n      const doc = await getKnowledgeDocument(selectedMedicalId);\n      setMedicalDetail(doc);\n    } catch (error) {\n      console.error(error);\n      setMedicalError('טעינת המסמך הרפואי נכשלה.');\n    }\n  }, [selectedMedicalId]);\n\n  const requiresHumanExpert = medicalDetail?.flags?.some((flag) => flag.code === 'HUMAN_EXPERT_REQUIRED');\n  const hasAssertionConflict =\n    Boolean(medicalDetail?.claims?.some((claim) => claim.assertionType === 'FACT')) &&\n    Boolean(medicalDetail?.flags?.some((flag) => flag.severity === 'critical'));\n\n  return (\n    <div className=\"flex relative\">\n      <SmartAssistant\n        isOpen={assistantOpen}\n        onClose={() => setAssistantOpen(false)}\n        contextQuery=\"\"\n        onImportPrecedent={() => {}}\n        onImportRule={() => {}}\n      />\n      <div className=\"flex-1 space-y-8 pb-12\">\n        <div className=\"card-shell\">\n          <div className=\"card-accent\" />\n          <div className=\"card-head\">\n            <h2 className=\"text-xl font-bold flex items-center gap-2\">\n              <Scale className=\"w-5 h-5 text-gold\" /> ניתוח חבות\n            </h2>\n          </div>\n          <div className=\"card-underline\" />\n          <div className=\"card-body space-y-6\">\n            <div className=\"rounded-card border border-pearl bg-pearl/40 p-4 text-center\">\n              <div className=\"text-4xl font-bold text-navy\" dir=\"ltr\">\n                {localAnalysis.probability}%\n              </div>\n              <div className=\"text-sm text-slate-light\">סיכוי לתביעה</div>\n            </div>\n            <div className=\"pt-4 border-t border-pearl/60\">\n              <button\n                type=\"button\"\n                className=\"btn-outline w-full justify-between px-4 py-3\"\n                onClick={() => setEvidenceOpen((prev) => !prev)}\n                aria-expanded={evidenceOpen}\n              >\n                <span>Medical Evidence</span>\n                <span>{evidenceOpen ? 'הסתר' : 'הצג'}</span>\n              </button>\n            {(requiresHumanExpert || hasAssertionConflict) && (\n              <div className=\"mt-4 state-block state-block--error text-sm\">\n                <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\n                <p className=\"state-block__title\">\n                  {requiresHumanExpert ? 'נדרש מומחה אנושי' : 'זוהתה סתירה בין הטענות לדגלים'}\n                </p>\n                <p className=\"state-block__description\">\n                  {requiresHumanExpert\n                    ? 'קיים דגל HUMAN_EXPERT_REQUIRED בתיק. מומלץ לערב מומחה רפואי לפני המשך טיפול.'\n                    : 'יש דגלים קריטיים לצד טענות המסומנות כעובדה. ודא את הממצאים לפני הסתמכות.'}\n                </p>\n              </div>\n            )}\n              {evidenceOpen && (\n                <div className=\"mt-4 space-y-4\">\n                  {medicalError && (\n                    <div className=\"state-block state-block--error text-sm\">\n                      <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\n                      <p className=\"state-block__title\">טעינת המסמך נכשלה</p>\n                      <p className=\"state-block__description\">{medicalError}</p>\n                    </div>\n                  )}\n                  {medicalListLoading && (\n                    <div className=\"loader-inline\">\n                      <Loader2 className=\"loader-inline__icon\" aria-hidden=\"true\" />\n                      טוען מסמכים רפואיים...\n                    </div>\n                  )}\n                  {!medicalListLoading && medicalDocs.length === 0 && (\n                    <div className=\"state-block text-sm\">\n                      <Book className=\"state-block__icon\" aria-hidden=\"true\" />\n                      <p className=\"state-block__title\">אין מסמכים רפואיים זמינים</p>\n                      <p className=\"state-block__description\">ייבא או בחר מסמך רפואי כדי לצפות בניתוח.</p>\n                    </div>\n                  )}\n                  {medicalDocs.length > 0 && (\n                    <div>\n                      <label className=\"text-xs font-semibold text-slate-light\">בחר מסמך</label>\n                      <select\n                        className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\n                        value={selectedMedicalId}\n                        onChange={(e) => setSelectedMedicalId(e.target.value)}\n                        disabled={medicalListLoading}\n                      >\n                        {medicalDocs.map((doc) => (\n                          <option key={doc.id} value={doc.id}>\n                            {doc.title}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  )}\n                  {medicalDetailLoading && (\n                    <div className=\"loader-inline\">\n                      <Loader2 className=\"loader-inline__icon\" aria-hidden=\"true\" />\n                      טוען ניתוח רפואי...\n                    </div>\n                  )}\n                  {medicalDetail && (\n                    <>\n                      <QualityBadge score={medicalDetail.score} label=\"מדד איכות רפואית\" />\n                      <MedicalQualityBox\n                        score={medicalDetail.medicalQualityScore}\n                        findings={medicalDetail.qualityFindings ?? []}\n                        reasoningFindings={medicalDetail.reasoningFindings ?? []}\n                      />\n                      <KnowledgeFlags flags={medicalDetail.flags || []} />\n                      <KnowledgeClaimsPanel claims={medicalDetail.claims || []} limit={5} />\n                      <MedicalTimeline events={medicalDetail.timeline || []} />\n                      <LiteraturePanel\n                        knowledgeId={medicalDetail.id}\n                        resources={medicalDetail.literatureResources ?? []}\n                        onRefresh={refreshEvidenceDetail}\n                      />\n                    </>\n                  )}\n                <LegalDisclaimer />\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default LiabilityStep;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}