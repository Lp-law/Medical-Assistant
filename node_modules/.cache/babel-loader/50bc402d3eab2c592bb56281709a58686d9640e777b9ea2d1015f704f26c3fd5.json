{"ast":null,"code":"import React from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getStatusLabel=value=>{if(value>=0.75)return'איכות גבוהה';if(value>=0.45)return'איכות בינונית';return'איכות נמוכה';};const formatBreakdownValue=value=>{var _value$reasons;if(value===undefined||value===null)return'N/A';if(typeof value==='number'){return\"\".concat((value*100).toFixed(0),\"%\");}const base=value.value!==undefined?\"\".concat((value.value*100).toFixed(0),\"%\"):'N/A';const reasons=(_value$reasons=value.reasons)!==null&&_value$reasons!==void 0&&_value$reasons.length?\" (\".concat(value.reasons.join('; '),\")\"):'';return\"\".concat(base).concat(reasons);};const buildTooltip=score=>{var _score$breakdown;if(!score)return'אין מדד איכות';const rows=[\"\\u05E6\\u05D9\\u05D5\\u05DF \\u05DB\\u05D5\\u05DC\\u05DC: \".concat((score.value*100).toFixed(0),\"%\")];Object.entries((_score$breakdown=score.breakdown)!==null&&_score$breakdown!==void 0?_score$breakdown:{}).forEach(_ref=>{let[key,value]=_ref;return rows.push(\"\".concat(key,\": \").concat(formatBreakdownValue(value)));});return rows.join(' | ');};const QualityBadge=_ref2=>{var _score$value,_score$value2,_score$breakdown2;let{score,label}=_ref2;if(!score){return/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-slate\",children:\"\\u05D0\\u05D9\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05D0\\u05D9\\u05DB\\u05D5\\u05EA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD\"})})]});}const percent=Math.round(((_score$value=score.value)!==null&&_score$value!==void 0?_score$value:0)*100);const statusText=getStatusLabel((_score$value2=score.value)!==null&&_score$value2!==void 0?_score$value2:0);const breakdownEntries=Object.entries((_score$breakdown2=score.breakdown)!==null&&_score$breakdown2!==void 0?_score$breakdown2:{});return/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",title:buildTooltip(score),children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold\",children:label!==null&&label!==void 0?label:'מדד איכות רפואית'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light\",children:statusText})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quality-seal\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"quality-seal__value\",children:percent}),/*#__PURE__*/_jsx(\"span\",{className:\"quality-seal__label\",children:\"% \\u05D0\\u05D9\\u05DB\\u05D5\\u05EA\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-xs text-slate space-y-2\",children:breakdownEntries.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u05DC\\u05D0 \\u05E1\\u05D5\\u05E4\\u05E7\\u05D4 \\u05D7\\u05DC\\u05D5\\u05E7\\u05EA \\u05DE\\u05E9\\u05E0\\u05D4 \\u05E9\\u05DC \\u05D4\\u05DE\\u05D3\\u05D3.\"}):/*#__PURE__*/_jsx(\"dl\",{className:\"grid gap-2\",children:breakdownEntries.map(_ref3=>{let[key,value]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-3\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-slate-light capitalize\",children:key}),/*#__PURE__*/_jsx(\"dd\",{className:\"font-semibold text-navy\",children:formatBreakdownValue(value)})]},key);})})})]});};export default QualityBadge;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","getStatusLabel","value","formatBreakdownValue","_value$reasons","undefined","concat","toFixed","base","reasons","length","join","buildTooltip","score","_score$breakdown","rows","Object","entries","breakdown","forEach","_ref","key","push","QualityBadge","_ref2","_score$value","_score$value2","_score$breakdown2","label","className","children","percent","Math","round","statusText","breakdownEntries","title","map","_ref3"],"sources":["C:/Office-Apps/LexMedical-App/src/components/QualityBadge.tsx"],"sourcesContent":["import React from 'react';\r\nimport { KnowledgeScore } from '../types';\r\n\r\ninterface Props {\r\n  score?: KnowledgeScore;\r\n  label?: string;\r\n}\r\n\r\nconst getStatusLabel = (value: number) => {\r\n  if (value >= 0.75) return 'איכות גבוהה';\r\n  if (value >= 0.45) return 'איכות בינונית';\r\n  return 'איכות נמוכה';\r\n};\r\n\r\nconst formatBreakdownValue = (value?: number | { value?: number; reasons?: string[] }): string => {\r\n  if (value === undefined || value === null) return 'N/A';\r\n  if (typeof value === 'number') {\r\n    return `${(value * 100).toFixed(0)}%`;\r\n  }\r\n  const base = value.value !== undefined ? `${(value.value * 100).toFixed(0)}%` : 'N/A';\r\n  const reasons = value.reasons?.length ? ` (${value.reasons.join('; ')})` : '';\r\n  return `${base}${reasons}`;\r\n};\r\n\r\nconst buildTooltip = (score?: KnowledgeScore): string => {\r\n  if (!score) return 'אין מדד איכות';\r\n  const rows: string[] = [`ציון כולל: ${(score.value * 100).toFixed(0)}%`];\r\n  Object.entries(score.breakdown ?? {}).forEach(([key, value]) => rows.push(`${key}: ${formatBreakdownValue(value as any)}`));\r\n  return rows.join(' | ');\r\n};\r\n\r\nconst QualityBadge: React.FC<Props> = ({ score, label }) => {\r\n  if (!score) {\r\n    return (\r\n      <div className=\"card-shell\">\r\n        <div className=\"card-accent\" />\r\n        <div className=\"card-head\">\r\n          <p className=\"text-sm font-semibold text-slate\">אין נתוני איכות רפואית זמינים</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  const percent = Math.round((score.value ?? 0) * 100);\r\n  const statusText = getStatusLabel(score.value ?? 0);\r\n  const breakdownEntries = Object.entries(score.breakdown ?? {});\r\n\r\n  return (\r\n    <div className=\"card-shell\" title={buildTooltip(score)}>\r\n      <div className=\"card-accent\" />\r\n      <div className=\"card-head\">\r\n        <div>\r\n          <p className=\"text-sm font-semibold\">{label ?? 'מדד איכות רפואית'}</p>\r\n          <p className=\"text-xs text-slate-light\">{statusText}</p>\r\n        </div>\r\n        <div className=\"quality-seal\">\r\n          <span className=\"quality-seal__value\">{percent}</span>\r\n          <span className=\"quality-seal__label\">% איכות</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"card-underline\" />\r\n      <div className=\"card-body text-xs text-slate space-y-2\">\r\n        {breakdownEntries.length === 0 ? (\r\n          <p>לא סופקה חלוקת משנה של המדד.</p>\r\n        ) : (\r\n          <dl className=\"grid gap-2\">\r\n            {breakdownEntries.map(([key, value]) => (\r\n              <div key={key} className=\"flex items-center justify-between gap-3\">\r\n                <dt className=\"text-slate-light capitalize\">{key}</dt>\r\n                <dd className=\"font-semibold text-navy\">{formatBreakdownValue(value as any)}</dd>\r\n              </div>\r\n            ))}\r\n          </dl>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QualityBadge;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}