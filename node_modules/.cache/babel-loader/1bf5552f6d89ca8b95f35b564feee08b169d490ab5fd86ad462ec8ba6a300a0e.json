{"ast":null,"code":"import React,{useMemo,useState}from'react';import{AlertTriangle,BookOpenCheck}from'lucide-react';import{downloadLiterature,searchLiterature,summarizeLiterature}from'../services/literatureApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const oaLabel=status=>{if(status==='open')return'Open Access';if(status==='no_oa')return'No OA';if(status==='closed')return'Closed';return status||'unknown';};const summaryQualityLabel={good:'סיכום מלא',partial:'סיכום חלקי',failed:'סיכום נכשל',unknown:'לא זמין'};const summaryTone={good:'badge-strong',partial:'badge-warning',failed:'badge-critical'};const LiteraturePanel=_ref=>{let{knowledgeId,resources,onRefresh}=_ref;const[loadingAction,setLoadingAction]=useState(null);const[error,setError]=useState(null);const[openResource,setOpenResource]=useState(null);const sortedResources=useMemo(()=>[...(resources!==null&&resources!==void 0?resources:[])].sort((a,b)=>{var _b$fetchedAt,_a$fetchedAt;return((_b$fetchedAt=b.fetchedAt)!==null&&_b$fetchedAt!==void 0?_b$fetchedAt:'').localeCompare((_a$fetchedAt=a.fetchedAt)!==null&&_a$fetchedAt!==void 0?_a$fetchedAt:'');}),[resources]);const handleAction=async(action,targetId)=>{try{setLoadingAction(action);setError(null);if(action==='search'){await searchLiterature(knowledgeId);}else if(action==='download'){await downloadLiterature(knowledgeId,targetId?[targetId]:undefined);}else if(action==='summarize'){await summarizeLiterature(knowledgeId,targetId?[targetId]:undefined);}await onRefresh();}catch(err){var _err$message;setError((_err$message=err===null||err===void 0?void 0:err.message)!==null&&_err$message!==void 0?_err$message:'literature_action_failed');}finally{setLoadingAction(null);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold\",children:\"\\u05E0\\u05E1\\u05E4\\u05D7\\u05D9 \\u05E1\\u05E4\\u05E8\\u05D5\\u05EA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light\",children:\"\\u05DE\\u05E7\\u05D5\\u05E8\\u05D5\\u05EA \\u05EA\\u05D5\\u05DE\\u05DB\\u05D9\\u05DD \\u05DC\\u05D7\\u05D9\\u05D6\\u05D5\\u05E7 \\u05D4\\u05EA\\u05D9\\u05E7\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary text-[11px] px-4 py-1.5\",onClick:()=>handleAction('search'),disabled:loadingAction==='search',children:loadingAction==='search'?'מחפש...':'סרוק מאמרים'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"state-block state-block--error text-sm\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D0\\u05D9\\u05E8\\u05E2\\u05D4 \\u05EA\\u05E7\\u05DC\\u05D4 \\u05D1\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:error})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body space-y-3 text-sm text-navy\",children:!sortedResources.length?/*#__PURE__*/_jsxs(\"div\",{className:\"state-block\",children:[/*#__PURE__*/_jsx(BookOpenCheck,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05E2\\u05D3\\u05D9\\u05D9\\u05DF \\u05D0\\u05D9\\u05DF \\u05E0\\u05E1\\u05E4\\u05D7\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:\"\\u05D4\\u05EA\\u05D7\\u05DC\\u05EA \\u05E1\\u05E8\\u05D9\\u05E7\\u05D4 \\u05EA\\u05D0\\u05E1\\u05D5\\u05E3 \\u05DE\\u05D0\\u05DE\\u05E8\\u05D9\\u05DD \\u05D5\\u05EA\\u05D5\\u05E1\\u05D9\\u05E3 \\u05D0\\u05D5\\u05EA\\u05DD \\u05DC\\u05E8\\u05E9\\u05D9\\u05DE\\u05D4.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:sortedResources.map(resource=>{var _resource$year,_summaryTone$resource,_summaryQualityLabel$,_resource$summaryJson,_resource$summaryJson2,_resource$summaryJson3,_resource$summaryJson4,_resource$summaryJson5,_resource$summaryJson6,_resource$summaryJson7;const isOpen=openResource===resource.id;return/*#__PURE__*/_jsxs(\"article\",{className:\"mini-card\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-base font-semibold \".concat(isOpen?'':'truncate'),title:resource.title,children:resource.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-light\",children:[resource.journal||'כתב עת לא ידוע',\" \\xB7 \",(_resource$year=resource.year)!==null&&_resource$year!==void 0?_resource$year:'—']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-2 text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge-muted\",children:oaLabel(resource.oaStatus)}),resource.summaryQuality&&resource.summaryQuality!=='unknown'&&/*#__PURE__*/_jsx(\"span\",{className:(_summaryTone$resource=summaryTone[resource.summaryQuality])!==null&&_summaryTone$resource!==void 0?_summaryTone$resource:'badge-info',children:(_summaryQualityLabel$=summaryQualityLabel[resource.summaryQuality])!==null&&_summaryQualityLabel$!==void 0?_summaryQualityLabel$:resource.summaryQuality})]})]}),resource.linkedClaimIds&&resource.linkedClaimIds.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 text-[11px] text-slate-light\",children:resource.linkedClaimIds.map(claimId=>/*#__PURE__*/_jsxs(\"span\",{className:\"rounded-full bg-pearl px-2 py-0.5\",children:[\"\\u05D8\\u05E2\\u05E0\\u05D4 #\",claimId]},claimId))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 text-xs\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary text-[11px] px-4 py-1.5\",\"aria-expanded\":isOpen,onClick:()=>setOpenResource(prev=>prev===resource.id?null:resource.id),children:isOpen?'הסתר נספח':'פתח נספח'}),resource.oaStatus==='open'&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-outline text-[11px] px-4 py-1.5\",onClick:()=>handleAction('download',resource.id),disabled:loadingAction==='download',children:resource.downloadStatus==='downloaded'?'PDF קיים':'הורד PDF'}),resource.downloadStatus==='downloaded'&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-outline text-[11px] px-4 py-1.5\",onClick:()=>handleAction('summarize',resource.id),disabled:loadingAction==='summarize',children:resource.summaryJson?'סיכום מוכן':'בצע סיכום'}),resource.url&&/*#__PURE__*/_jsx(\"a\",{href:resource.url,target:\"_blank\",rel:\"noreferrer\",className:\"btn-outline text-[11px] px-4 py-1.5\",\"aria-label\":\"\\u05E4\\u05EA\\u05D7 \\u05DE\\u05E7\\u05D5\\u05E8 \\u05D7\\u05D9\\u05E6\\u05D5\\u05E0\\u05D9 \\u05E2\\u05D1\\u05D5\\u05E8 \".concat(resource.title),children:\"\\u05E4\\u05EA\\u05D7 \\u05DE\\u05E7\\u05D5\\u05E8\"})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 pt-3 border-t border-pearl/60\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-slate-light tracking-wide uppercase\",children:\"\\u05EA\\u05E7\\u05E6\\u05D9\\u05E8 \\u05D7\\u05D5\\u05E4\\u05E9\\u05D9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-navy leading-relaxed\",children:(_resource$summaryJson=(_resource$summaryJson2=resource.summaryJson)===null||_resource$summaryJson2===void 0?void 0:_resource$summaryJson2.summary)!==null&&_resource$summaryJson!==void 0?_resource$summaryJson:'לא זמין'})]}),!!((_resource$summaryJson3=resource.summaryJson)!==null&&_resource$summaryJson3!==void 0&&(_resource$summaryJson4=_resource$summaryJson3.keyFindings)!==null&&_resource$summaryJson4!==void 0&&_resource$summaryJson4.length)&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-slate-light tracking-wide uppercase\",children:\"\\u05DE\\u05E1\\u05E7\\u05E0\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc space-y-1 pr-5 text-sm text-navy leading-relaxed\",children:resource.summaryJson.keyFindings.map((finding,index)=>/*#__PURE__*/_jsx(\"li\",{children:finding},\"\".concat(resource.id,\"-finding-\").concat(index)))})]}),!!((_resource$summaryJson5=resource.summaryJson)!==null&&_resource$summaryJson5!==void 0&&(_resource$summaryJson6=_resource$summaryJson5.limitations)!==null&&_resource$summaryJson6!==void 0&&_resource$summaryJson6.length)&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-slate-light tracking-wide uppercase\",children:\"\\u05DE\\u05D2\\u05D1\\u05DC\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc space-y-1 pr-5 text-sm text-navy leading-relaxed\",children:resource.summaryJson.limitations.map((limitation,index)=>/*#__PURE__*/_jsx(\"li\",{children:limitation},\"\".concat(resource.id,\"-limitation-\").concat(index)))})]}),((_resource$summaryJson7=resource.summaryJson)===null||_resource$summaryJson7===void 0?void 0:_resource$summaryJson7.bottomLine)&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-slate-light tracking-wide uppercase\",children:\"Bottom line\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-navy leading-relaxed\",children:resource.summaryJson.bottomLine})]})]})]},resource.id);})})})]});};export default LiteraturePanel;","map":{"version":3,"names":["React","useMemo","useState","AlertTriangle","BookOpenCheck","downloadLiterature","searchLiterature","summarizeLiterature","jsx","_jsx","jsxs","_jsxs","oaLabel","status","summaryQualityLabel","good","partial","failed","unknown","summaryTone","LiteraturePanel","_ref","knowledgeId","resources","onRefresh","loadingAction","setLoadingAction","error","setError","openResource","setOpenResource","sortedResources","sort","a","b","_b$fetchedAt","_a$fetchedAt","fetchedAt","localeCompare","handleAction","action","targetId","undefined","err","_err$message","message","className","children","type","onClick","disabled","length","map","resource","_resource$year","_summaryTone$resource","_summaryQualityLabel$","_resource$summaryJson","_resource$summaryJson2","_resource$summaryJson3","_resource$summaryJson4","_resource$summaryJson5","_resource$summaryJson6","_resource$summaryJson7","isOpen","id","concat","title","journal","year","oaStatus","summaryQuality","linkedClaimIds","claimId","prev","downloadStatus","summaryJson","url","href","target","rel","summary","keyFindings","finding","index","limitations","limitation","bottomLine"],"sources":["C:/Office-Apps/LexMedical-App/src/components/LiteraturePanel.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport { AlertTriangle, BookOpenCheck } from 'lucide-react';\r\nimport { LiteratureResource } from '../types';\r\nimport { downloadLiterature, searchLiterature, summarizeLiterature } from '../services/literatureApi';\r\n\r\ninterface Props {\r\n  knowledgeId: string;\r\n  resources: LiteratureResource[];\r\n  onRefresh: () => Promise<void>;\r\n}\r\n\r\nconst oaLabel = (status?: string): string => {\r\n  if (status === 'open') return 'Open Access';\r\n  if (status === 'no_oa') return 'No OA';\r\n  if (status === 'closed') return 'Closed';\r\n  return status || 'unknown';\r\n};\r\n\r\nconst summaryQualityLabel: Record<string, string> = {\r\n  good: 'סיכום מלא',\r\n  partial: 'סיכום חלקי',\r\n  failed: 'סיכום נכשל',\r\n  unknown: 'לא זמין',\r\n};\r\n\r\nconst summaryTone: Record<string, string> = {\r\n  good: 'badge-strong',\r\n  partial: 'badge-warning',\r\n  failed: 'badge-critical',\r\n};\r\n\r\nconst LiteraturePanel: React.FC<Props> = ({ knowledgeId, resources, onRefresh }) => {\r\n  const [loadingAction, setLoadingAction] = useState<'search' | 'download' | 'summarize' | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [openResource, setOpenResource] = useState<string | null>(null);\r\n\r\n  const sortedResources = useMemo(\r\n    () =>\r\n      [...(resources ?? [])].sort((a, b) => (b.fetchedAt ?? '').localeCompare(a.fetchedAt ?? '')),\r\n    [resources],\r\n  );\r\n\r\n  const handleAction = async (action: 'search' | 'download' | 'summarize', targetId?: string) => {\r\n    try {\r\n      setLoadingAction(action);\r\n      setError(null);\r\n      if (action === 'search') {\r\n        await searchLiterature(knowledgeId);\r\n      } else if (action === 'download') {\r\n        await downloadLiterature(knowledgeId, targetId ? [targetId] : undefined);\r\n      } else if (action === 'summarize') {\r\n        await summarizeLiterature(knowledgeId, targetId ? [targetId] : undefined);\r\n      }\r\n      await onRefresh();\r\n    } catch (err: any) {\r\n      setError(err?.message ?? 'literature_action_failed');\r\n    } finally {\r\n      setLoadingAction(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card-shell\">\r\n      <div className=\"card-accent\" />\r\n      <div className=\"card-head\">\r\n        <div>\r\n          <h3 className=\"text-sm font-semibold\">נספחי ספרות רפואית</h3>\r\n          <p className=\"text-xs text-slate-light\">מקורות תומכים לחיזוק התיק</p>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn-primary text-[11px] px-4 py-1.5\"\r\n          onClick={() => handleAction('search')}\r\n          disabled={loadingAction === 'search'}\r\n        >\r\n          {loadingAction === 'search' ? 'מחפש...' : 'סרוק מאמרים'}\r\n        </button>\r\n      </div>\r\n      <div className=\"card-underline\" />\r\n      {error && (\r\n        <div className=\"px-6\">\r\n          <div className=\"state-block state-block--error text-sm\">\r\n            <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\r\n            <p className=\"state-block__title\">אירעה תקלה בחיפוש</p>\r\n            <p className=\"state-block__description\">{error}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"card-body space-y-3 text-sm text-navy\">\r\n        {!sortedResources.length ? (\r\n          <div className=\"state-block\">\r\n            <BookOpenCheck className=\"state-block__icon\" aria-hidden=\"true\" />\r\n            <p className=\"state-block__title\">עדיין אין נספחים רפואיים</p>\r\n            <p className=\"state-block__description\">התחלת סריקה תאסוף מאמרים ותוסיף אותם לרשימה.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {sortedResources.map((resource) => {\r\n              const isOpen = openResource === resource.id;\r\n              return (\r\n                <article key={resource.id} className=\"mini-card\">\r\n                  <header className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\r\n                    <div>\r\n                      <p\r\n                        className={`text-base font-semibold ${isOpen ? '' : 'truncate'}`}\r\n                        title={resource.title}\r\n                      >\r\n                        {resource.title}\r\n                      </p>\r\n                      <p className=\"text-xs text-slate-light\">\r\n                        {resource.journal || 'כתב עת לא ידוע'} · {resource.year ?? '—'}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap items-center gap-2 text-xs\">\r\n                      <span className=\"badge-muted\">{oaLabel(resource.oaStatus)}</span>\r\n                      {resource.summaryQuality && resource.summaryQuality !== 'unknown' && (\r\n                        <span className={summaryTone[resource.summaryQuality] ?? 'badge-info'}>\r\n                          {summaryQualityLabel[resource.summaryQuality] ?? resource.summaryQuality}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </header>\r\n                  {resource.linkedClaimIds && resource.linkedClaimIds.length > 0 && (\r\n                    <div className=\"flex flex-wrap gap-1 text-[11px] text-slate-light\">\r\n                      {resource.linkedClaimIds.map((claimId) => (\r\n                        <span key={claimId} className=\"rounded-full bg-pearl px-2 py-0.5\">\r\n                          טענה #{claimId}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  <div className=\"flex flex-wrap gap-2 text-xs\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn-secondary text-[11px] px-4 py-1.5\"\r\n                      aria-expanded={isOpen}\r\n                      onClick={() => setOpenResource((prev) => (prev === resource.id ? null : resource.id))}\r\n                    >\r\n                      {isOpen ? 'הסתר נספח' : 'פתח נספח'}\r\n                    </button>\r\n                    {resource.oaStatus === 'open' && (\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn-outline text-[11px] px-4 py-1.5\"\r\n                        onClick={() => handleAction('download', resource.id)}\r\n                        disabled={loadingAction === 'download'}\r\n                      >\r\n                        {resource.downloadStatus === 'downloaded' ? 'PDF קיים' : 'הורד PDF'}\r\n                      </button>\r\n                    )}\r\n                    {resource.downloadStatus === 'downloaded' && (\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn-outline text-[11px] px-4 py-1.5\"\r\n                        onClick={() => handleAction('summarize', resource.id)}\r\n                        disabled={loadingAction === 'summarize'}\r\n                      >\r\n                        {resource.summaryJson ? 'סיכום מוכן' : 'בצע סיכום'}\r\n                      </button>\r\n                    )}\r\n                    {resource.url && (\r\n                      <a\r\n                        href={resource.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                        className=\"btn-outline text-[11px] px-4 py-1.5\"\r\n                        aria-label={`פתח מקור חיצוני עבור ${resource.title}`}\r\n                      >\r\n                        פתח מקור\r\n                      </a>\r\n                    )}\r\n                  </div>\r\n                  {isOpen && (\r\n                    <div className=\"space-y-3 pt-3 border-t border-pearl/60\">\r\n                      <div className=\"space-y-1\">\r\n                        <p className=\"text-xs font-semibold text-slate-light tracking-wide uppercase\">תקציר חופשי</p>\r\n                        <p className=\"text-sm text-navy leading-relaxed\">\r\n                          {resource.summaryJson?.summary ?? 'לא זמין'}\r\n                        </p>\r\n                      </div>\r\n                      {!!resource.summaryJson?.keyFindings?.length && (\r\n                        <div className=\"space-y-1\">\r\n                          <p className=\"text-xs font-semibold text-slate-light tracking-wide uppercase\">מסקנות</p>\r\n                          <ul className=\"list-disc space-y-1 pr-5 text-sm text-navy leading-relaxed\">\r\n                            {resource.summaryJson.keyFindings.map((finding: string, index: number) => (\r\n                              <li key={`${resource.id}-finding-${index}`}>{finding}</li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                      {!!resource.summaryJson?.limitations?.length && (\r\n                        <div className=\"space-y-1\">\r\n                          <p className=\"text-xs font-semibold text-slate-light tracking-wide uppercase\">מגבלות</p>\r\n                          <ul className=\"list-disc space-y-1 pr-5 text-sm text-navy leading-relaxed\">\r\n                            {resource.summaryJson.limitations.map((limitation: string, index: number) => (\r\n                              <li key={`${resource.id}-limitation-${index}`}>{limitation}</li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                      {resource.summaryJson?.bottomLine && (\r\n                        <div className=\"space-y-1\">\r\n                          <p className=\"text-xs font-semibold text-slate-light tracking-wide uppercase\">Bottom line</p>\r\n                          <p className=\"text-sm text-navy leading-relaxed\">{resource.summaryJson.bottomLine}</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </article>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiteraturePanel;\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CAChD,OAASC,aAAa,CAAEC,aAAa,KAAQ,cAAc,CAE3D,OAASC,kBAAkB,CAAEC,gBAAgB,CAAEC,mBAAmB,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAQtG,KAAM,CAAAC,OAAO,CAAIC,MAAe,EAAa,CAC3C,GAAIA,MAAM,GAAK,MAAM,CAAE,MAAO,aAAa,CAC3C,GAAIA,MAAM,GAAK,OAAO,CAAE,MAAO,OAAO,CACtC,GAAIA,MAAM,GAAK,QAAQ,CAAE,MAAO,QAAQ,CACxC,MAAO,CAAAA,MAAM,EAAI,SAAS,CAC5B,CAAC,CAED,KAAM,CAAAC,mBAA2C,CAAG,CAClDC,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,YAAY,CACrBC,MAAM,CAAE,YAAY,CACpBC,OAAO,CAAE,SACX,CAAC,CAED,KAAM,CAAAC,WAAmC,CAAG,CAC1CJ,IAAI,CAAE,cAAc,CACpBC,OAAO,CAAE,eAAe,CACxBC,MAAM,CAAE,gBACV,CAAC,CAED,KAAM,CAAAG,eAAgC,CAAGC,IAAA,EAA2C,IAA1C,CAAEC,WAAW,CAAEC,SAAS,CAAEC,SAAU,CAAC,CAAAH,IAAA,CAC7E,KAAM,CAACI,aAAa,CAAEC,gBAAgB,CAAC,CAAGxB,QAAQ,CAA6C,IAAI,CAAC,CACpG,KAAM,CAACyB,KAAK,CAAEC,QAAQ,CAAC,CAAG1B,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAAC2B,YAAY,CAAEC,eAAe,CAAC,CAAG5B,QAAQ,CAAgB,IAAI,CAAC,CAErE,KAAM,CAAA6B,eAAe,CAAG9B,OAAO,CAC7B,IACE,CAAC,IAAIsB,SAAS,SAATA,SAAS,UAATA,SAAS,CAAI,EAAE,CAAC,CAAC,CAACS,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,QAAAC,YAAA,CAAAC,YAAA,OAAK,EAAAD,YAAA,CAACD,CAAC,CAACG,SAAS,UAAAF,YAAA,UAAAA,YAAA,CAAI,EAAE,EAAEG,aAAa,EAAAF,YAAA,CAACH,CAAC,CAACI,SAAS,UAAAD,YAAA,UAAAA,YAAA,CAAI,EAAE,CAAC,GAAC,CAC7F,CAACb,SAAS,CACZ,CAAC,CAED,KAAM,CAAAgB,YAAY,CAAG,KAAAA,CAAOC,MAA2C,CAAEC,QAAiB,GAAK,CAC7F,GAAI,CACFf,gBAAgB,CAACc,MAAM,CAAC,CACxBZ,QAAQ,CAAC,IAAI,CAAC,CACd,GAAIY,MAAM,GAAK,QAAQ,CAAE,CACvB,KAAM,CAAAlC,gBAAgB,CAACgB,WAAW,CAAC,CACrC,CAAC,IAAM,IAAIkB,MAAM,GAAK,UAAU,CAAE,CAChC,KAAM,CAAAnC,kBAAkB,CAACiB,WAAW,CAAEmB,QAAQ,CAAG,CAACA,QAAQ,CAAC,CAAGC,SAAS,CAAC,CAC1E,CAAC,IAAM,IAAIF,MAAM,GAAK,WAAW,CAAE,CACjC,KAAM,CAAAjC,mBAAmB,CAACe,WAAW,CAAEmB,QAAQ,CAAG,CAACA,QAAQ,CAAC,CAAGC,SAAS,CAAC,CAC3E,CACA,KAAM,CAAAlB,SAAS,CAAC,CAAC,CACnB,CAAE,MAAOmB,GAAQ,CAAE,KAAAC,YAAA,CACjBhB,QAAQ,EAAAgB,YAAA,CAACD,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEE,OAAO,UAAAD,YAAA,UAAAA,YAAA,CAAI,0BAA0B,CAAC,CACtD,CAAC,OAAS,CACRlB,gBAAgB,CAAC,IAAI,CAAC,CACxB,CACF,CAAC,CAED,mBACEf,KAAA,QAAKmC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBtC,IAAA,QAAKqC,SAAS,CAAC,aAAa,CAAE,CAAC,cAC/BnC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBpC,KAAA,QAAAoC,QAAA,eACEtC,IAAA,OAAIqC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,oGAAkB,CAAI,CAAC,cAC7DtC,IAAA,MAAGqC,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,yIAAyB,CAAG,CAAC,EAClE,CAAC,cACNtC,IAAA,WACEuC,IAAI,CAAC,QAAQ,CACbF,SAAS,CAAC,qCAAqC,CAC/CG,OAAO,CAAEA,CAAA,GAAMV,YAAY,CAAC,QAAQ,CAAE,CACtCW,QAAQ,CAAEzB,aAAa,GAAK,QAAS,CAAAsB,QAAA,CAEpCtB,aAAa,GAAK,QAAQ,CAAG,SAAS,CAAG,aAAa,CACjD,CAAC,EACN,CAAC,cACNhB,IAAA,QAAKqC,SAAS,CAAC,gBAAgB,CAAE,CAAC,CACjCnB,KAAK,eACJlB,IAAA,QAAKqC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBpC,KAAA,QAAKmC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDtC,IAAA,CAACN,aAAa,EAAC2C,SAAS,CAAC,mBAAmB,CAAC,cAAY,MAAM,CAAE,CAAC,cAClErC,IAAA,MAAGqC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,8FAAiB,CAAG,CAAC,cACvDtC,IAAA,MAAGqC,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAEpB,KAAK,CAAI,CAAC,EAChD,CAAC,CACH,CACN,cACDlB,IAAA,QAAKqC,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CACnD,CAAChB,eAAe,CAACoB,MAAM,cACtBxC,KAAA,QAAKmC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BtC,IAAA,CAACL,aAAa,EAAC0C,SAAS,CAAC,mBAAmB,CAAC,cAAY,MAAM,CAAE,CAAC,cAClErC,IAAA,MAAGqC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,mIAAwB,CAAG,CAAC,cAC9DtC,IAAA,MAAGqC,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,uOAA4C,CAAG,CAAC,EACrF,CAAC,cAENtC,IAAA,QAAKqC,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBhB,eAAe,CAACqB,GAAG,CAAEC,QAAQ,EAAK,KAAAC,cAAA,CAAAC,qBAAA,CAAAC,qBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CACjC,KAAM,CAAAC,MAAM,CAAGnC,YAAY,GAAKwB,QAAQ,CAACY,EAAE,CAC3C,mBACEtD,KAAA,YAA2BmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eAC9CpC,KAAA,WAAQmC,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACpFpC,KAAA,QAAAoC,QAAA,eACEtC,IAAA,MACEqC,SAAS,4BAAAoB,MAAA,CAA6BF,MAAM,CAAG,EAAE,CAAG,UAAU,CAAG,CACjEG,KAAK,CAAEd,QAAQ,CAACc,KAAM,CAAApB,QAAA,CAErBM,QAAQ,CAACc,KAAK,CACd,CAAC,cACJxD,KAAA,MAAGmC,SAAS,CAAC,0BAA0B,CAAAC,QAAA,EACpCM,QAAQ,CAACe,OAAO,EAAI,gBAAgB,CAAC,QAAG,EAAAd,cAAA,CAACD,QAAQ,CAACgB,IAAI,UAAAf,cAAA,UAAAA,cAAA,CAAI,GAAG,EAC7D,CAAC,EACD,CAAC,cACN3C,KAAA,QAAKmC,SAAS,CAAC,2CAA2C,CAAAC,QAAA,eACxDtC,IAAA,SAAMqC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEnC,OAAO,CAACyC,QAAQ,CAACiB,QAAQ,CAAC,CAAO,CAAC,CAChEjB,QAAQ,CAACkB,cAAc,EAAIlB,QAAQ,CAACkB,cAAc,GAAK,SAAS,eAC/D9D,IAAA,SAAMqC,SAAS,EAAAS,qBAAA,CAAEpC,WAAW,CAACkC,QAAQ,CAACkB,cAAc,CAAC,UAAAhB,qBAAA,UAAAA,qBAAA,CAAI,YAAa,CAAAR,QAAA,EAAAS,qBAAA,CACnE1C,mBAAmB,CAACuC,QAAQ,CAACkB,cAAc,CAAC,UAAAf,qBAAA,UAAAA,qBAAA,CAAIH,QAAQ,CAACkB,cAAc,CACpE,CACP,EACE,CAAC,EACA,CAAC,CACRlB,QAAQ,CAACmB,cAAc,EAAInB,QAAQ,CAACmB,cAAc,CAACrB,MAAM,CAAG,CAAC,eAC5D1C,IAAA,QAAKqC,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC/DM,QAAQ,CAACmB,cAAc,CAACpB,GAAG,CAAEqB,OAAO,eACnC9D,KAAA,SAAoBmC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,EAAC,4BAC1D,CAAC0B,OAAO,GADLA,OAEL,CACP,CAAC,CACC,CACN,cACD9D,KAAA,QAAKmC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3CtC,IAAA,WACEuC,IAAI,CAAC,QAAQ,CACbF,SAAS,CAAC,uCAAuC,CACjD,gBAAekB,MAAO,CACtBf,OAAO,CAAEA,CAAA,GAAMnB,eAAe,CAAE4C,IAAI,EAAMA,IAAI,GAAKrB,QAAQ,CAACY,EAAE,CAAG,IAAI,CAAGZ,QAAQ,CAACY,EAAG,CAAE,CAAAlB,QAAA,CAErFiB,MAAM,CAAG,WAAW,CAAG,UAAU,CAC5B,CAAC,CACRX,QAAQ,CAACiB,QAAQ,GAAK,MAAM,eAC3B7D,IAAA,WACEuC,IAAI,CAAC,QAAQ,CACbF,SAAS,CAAC,qCAAqC,CAC/CG,OAAO,CAAEA,CAAA,GAAMV,YAAY,CAAC,UAAU,CAAEc,QAAQ,CAACY,EAAE,CAAE,CACrDf,QAAQ,CAAEzB,aAAa,GAAK,UAAW,CAAAsB,QAAA,CAEtCM,QAAQ,CAACsB,cAAc,GAAK,YAAY,CAAG,UAAU,CAAG,UAAU,CAC7D,CACT,CACAtB,QAAQ,CAACsB,cAAc,GAAK,YAAY,eACvClE,IAAA,WACEuC,IAAI,CAAC,QAAQ,CACbF,SAAS,CAAC,qCAAqC,CAC/CG,OAAO,CAAEA,CAAA,GAAMV,YAAY,CAAC,WAAW,CAAEc,QAAQ,CAACY,EAAE,CAAE,CACtDf,QAAQ,CAAEzB,aAAa,GAAK,WAAY,CAAAsB,QAAA,CAEvCM,QAAQ,CAACuB,WAAW,CAAG,YAAY,CAAG,WAAW,CAC5C,CACT,CACAvB,QAAQ,CAACwB,GAAG,eACXpE,IAAA,MACEqE,IAAI,CAAEzB,QAAQ,CAACwB,GAAI,CACnBE,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,YAAY,CAChBlC,SAAS,CAAC,qCAAqC,CAC/C,0HAAAoB,MAAA,CAAoCb,QAAQ,CAACc,KAAK,CAAG,CAAApB,QAAA,CACtD,6CAED,CAAG,CACJ,EACE,CAAC,CACLiB,MAAM,eACLrD,KAAA,QAAKmC,SAAS,CAAC,yCAAyC,CAAAC,QAAA,eACtDpC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,MAAGqC,SAAS,CAAC,gEAAgE,CAAAC,QAAA,CAAC,+DAAW,CAAG,CAAC,cAC7FtC,IAAA,MAAGqC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,EAAAU,qBAAA,EAAAC,sBAAA,CAC7CL,QAAQ,CAACuB,WAAW,UAAAlB,sBAAA,iBAApBA,sBAAA,CAAsBuB,OAAO,UAAAxB,qBAAA,UAAAA,qBAAA,CAAI,SAAS,CAC1C,CAAC,EACD,CAAC,CACL,CAAC,GAAAE,sBAAA,CAACN,QAAQ,CAACuB,WAAW,UAAAjB,sBAAA,YAAAC,sBAAA,CAApBD,sBAAA,CAAsBuB,WAAW,UAAAtB,sBAAA,WAAjCA,sBAAA,CAAmCT,MAAM,gBAC1CxC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,MAAGqC,SAAS,CAAC,gEAAgE,CAAAC,QAAA,CAAC,sCAAM,CAAG,CAAC,cACxFtC,IAAA,OAAIqC,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CACvEM,QAAQ,CAACuB,WAAW,CAACM,WAAW,CAAC9B,GAAG,CAAC,CAAC+B,OAAe,CAAEC,KAAa,gBACnE3E,IAAA,OAAAsC,QAAA,CAA6CoC,OAAO,KAAAjB,MAAA,CAAxCb,QAAQ,CAACY,EAAE,cAAAC,MAAA,CAAYkB,KAAK,CAAiB,CAC1D,CAAC,CACA,CAAC,EACF,CACN,CACA,CAAC,GAAAvB,sBAAA,CAACR,QAAQ,CAACuB,WAAW,UAAAf,sBAAA,YAAAC,sBAAA,CAApBD,sBAAA,CAAsBwB,WAAW,UAAAvB,sBAAA,WAAjCA,sBAAA,CAAmCX,MAAM,gBAC1CxC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,MAAGqC,SAAS,CAAC,gEAAgE,CAAAC,QAAA,CAAC,sCAAM,CAAG,CAAC,cACxFtC,IAAA,OAAIqC,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CACvEM,QAAQ,CAACuB,WAAW,CAACS,WAAW,CAACjC,GAAG,CAAC,CAACkC,UAAkB,CAAEF,KAAa,gBACtE3E,IAAA,OAAAsC,QAAA,CAAgDuC,UAAU,KAAApB,MAAA,CAA9Cb,QAAQ,CAACY,EAAE,iBAAAC,MAAA,CAAekB,KAAK,CAAoB,CAChE,CAAC,CACA,CAAC,EACF,CACN,CACA,EAAArB,sBAAA,CAAAV,QAAQ,CAACuB,WAAW,UAAAb,sBAAA,iBAApBA,sBAAA,CAAsBwB,UAAU,gBAC/B5E,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,IAAA,MAAGqC,SAAS,CAAC,gEAAgE,CAAAC,QAAA,CAAC,aAAW,CAAG,CAAC,cAC7FtC,IAAA,MAAGqC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAEM,QAAQ,CAACuB,WAAW,CAACW,UAAU,CAAI,CAAC,EACnF,CACN,EACE,CACN,GA3GWlC,QAAQ,CAACY,EA4Gd,CAAC,CAEd,CAAC,CAAC,CACC,CACN,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7C,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}