{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import{useAuth}from'./context/AuthContext';import{createCase as apiCreateCase,listCases as apiListCases,updateCase as apiUpdateCase}from'./services/api';import LoginScreen from'./components/LoginScreen';import AdminDashboard from'./components/AdminDashboard';import LiabilityStep from'./components/LiabilityStep';import DamagesStep from'./components/DamagesStep';import ReasoningStep from'./components/ReasoningStep';import ReportStep from'./components/ReportStep';import CaseDashboard from'./components/CaseDashboard';import{FolderOpen,ChevronLeft,Shield,Activity,UploadCloud,FileText,LogOut,LayoutDashboard,BookOpen,Download,Upload,Home}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const createEmptyCase=attorney=>({id:Date.now().toString(),name:'תיק חדש '+new Date().toLocaleDateString('he-IL'),attorney,lastUpdated:new Date().toISOString(),summary:'',summaryFiles:[],liability:{issues:[],medicalRecordQuality:'Complete',doctrines:[],precedents:[],expertsPlaintiff:[],expertsDefense:[],expertCourtOpinions:[],expertCourtStance:'None',aggravatingFactors:2,mitigatingFactors:2,probability:50,probabilityRange:[40,60],uncertainty:'Medium',strengthsPlaintiff:[''],weaknessesPlaintiff:[''],strengthsDefense:[''],weaknessesDefense:['']},damages:{dateOfBirth:'1990-01-01',gender:'Male',dateOfEvent:new Date(new Date().setFullYear(new Date().getFullYear()-2)).toISOString().split('T')[0],dateOfCalc:new Date().toISOString().split('T')[0],dateOfRetirement:'',ageAtInjury:0,currentAge:0,lifeExpectancy:82,wagePreInjury:10000,wagePostInjury:0,permanentDisabilityMedical:10,permanentDisabilityFunctional:10,daysOfHospitalization:0,interestRate:3,heads:[{id:'1',name:'הפסד שכר לעבר',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'2',name:'הפסד שכר לעתיד',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'3',name:'הפסד פנסיה ותנאים סוציאליים',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'4',name:'כאב וסבל',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'5',name:'עזרת צד ג׳ לעבר',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'6',name:'עזרת צד ג׳ לעתיד',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'7',name:'הוצאות רפואיות',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'8',name:'ניידות ונסיעות',isActive:false,parameters:{},calculatedAmount:0,notes:''}],precedents:[]}});const App=()=>{const{user,logout}=useAuth();const[activeStep,setActiveStep]=useState(0);const[showAdminDashboard,setShowAdminDashboard]=useState(false);const[caseList,setCaseList]=useState([]);const[currentCaseId,setCurrentCaseId]=useState(null);const[currentCase,setCurrentCase]=useState(null);const[saveStatus,setSaveStatus]=useState('idle');const[isLoadingCases,setIsLoadingCases]=useState(false);const[loadError,setLoadError]=useState(null);const fileInputRef=useRef(null);const saveTimeoutRef=useRef(null);const resetStatusTimeoutRef=useRef(null);const hydratingRef=useRef(false);const isAdmin=(user===null||user===void 0?void 0:user.role)==='admin';const cleanupClientState=()=>{setCaseList([]);setCurrentCaseId(null);setCurrentCase(null);setShowAdminDashboard(false);setActiveStep(0);setSaveStatus('idle');if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);saveTimeoutRef.current=null;}if(resetStatusTimeoutRef.current){clearTimeout(resetStatusTimeoutRef.current);resetStatusTimeoutRef.current=null;}};const normalizeCaseData=(record,attorneyFallback)=>{const safeData=record.data||createEmptyCase(attorneyFallback);return _objectSpread(_objectSpread(_objectSpread({},createEmptyCase(attorneyFallback)),safeData),{},{id:record.id,name:safeData.name||record.title||\"\\u05EA\\u05D9\\u05E7 \".concat(new Date().toLocaleDateString('he-IL')),attorney:safeData.attorney||attorneyFallback});};useEffect(()=>{let cancelled=false;const bootstrap=async()=>{if(!user){cleanupClientState();return;}setIsLoadingCases(true);setLoadError(null);try{const cases=await apiListCases();if(cancelled)return;setCaseList(cases);setShowAdminDashboard(isAdmin);if(!cases.length){await handleCreateNewCase(user.username);return;}const sorted=[...cases].sort((a,b)=>new Date(b.updatedAt).getTime()-new Date(a.updatedAt).getTime());const primary=sorted[0];setCurrentCaseId(primary.id);hydratingRef.current=true;setCurrentCase(normalizeCaseData(primary,user.username));setActiveStep(0);}catch(error){console.error(error);if(!cancelled){setLoadError('טעינת התיקים נכשלה. נסה שוב בעוד רגע.');}}finally{if(!cancelled){setIsLoadingCases(false);}}};bootstrap();return()=>{cancelled=true;};},[user,isAdmin,handleCreateNewCase]);const handleLogout=()=>{logout();cleanupClientState();};const handleAdminEditCase=caseData=>{setCurrentCaseId(caseData.id);hydratingRef.current=true;setCurrentCase(caseData);setShowAdminDashboard(false);setActiveStep(0);};const handleCreateNewCase=useCallback(async attorneyName=>{if(!user)return;setIsLoadingCases(true);setLoadError(null);try{const template=createEmptyCase(attorneyName);const created=await apiCreateCase({title:template.name,data:template});setCaseList(prev=>[created,...prev]);const normalized=_objectSpread(_objectSpread({},template),{},{id:created.id});setCurrentCaseId(created.id);hydratingRef.current=true;setCurrentCase(normalized);setActiveStep(0);}catch(error){console.error(error);setLoadError('יצירת תיק חדש נכשלה.');}finally{setIsLoadingCases(false);}},[user]);useEffect(()=>{if(!user||!currentCaseId||!currentCase||showAdminDashboard)return;if(hydratingRef.current){hydratingRef.current=false;return;}if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);}setSaveStatus('saving');saveTimeoutRef.current=setTimeout(async()=>{try{const updated=await apiUpdateCase(currentCaseId,{title:currentCase.name,data:currentCase});setCaseList(prev=>{const filtered=prev.filter(c=>c.id!==updated.id);return[updated,...filtered];});setSaveStatus('saved');if(resetStatusTimeoutRef.current){clearTimeout(resetStatusTimeoutRef.current);}resetStatusTimeoutRef.current=setTimeout(()=>setSaveStatus('idle'),1500);}catch(error){console.error(error);setSaveStatus('error');}},1200);return()=>{if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);saveTimeoutRef.current=null;}};},[currentCase,currentCaseId,user,showAdminDashboard]);const handleSummaryFileUpload=e=>{if(e.target.files&&e.target.files[0]&&currentCase){const file=e.target.files[0];const newFile={name:file.name,size:file.size,type:file.type,lastModified:file.lastModified};setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summaryFiles:[...(currentCase.summaryFiles||[]),newFile]}));}};const removeSummaryFile=fileName=>{if(currentCase){setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summaryFiles:currentCase.summaryFiles.filter(f=>f.name!==fileName)}));}};const handleExportCase=()=>{if(!currentCase)return;const dataStr=JSON.stringify(currentCase,null,2);const blob=new Blob([dataStr],{type:\"application/json\"});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"lexmedical_\".concat(currentCase.name.replace(/\\s+/g,'_'),\".json\");document.body.appendChild(link);link.click();document.body.removeChild(link);};const handleImportClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleImportFile=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;const reader=new FileReader();reader.onload=event=>{try{var _event$target;const json=JSON.parse((_event$target=event.target)===null||_event$target===void 0?void 0:_event$target.result);if(json.id&&json.liability&&json.damages){hydratingRef.current=true;setCurrentCase(json);alert('התיק נטען בהצלחה! השינויים יישמרו אוטומטית.');setActiveStep(0);}else{alert('קובץ לא תקין.');}}catch(err){alert('שגיאה בטעינת הקובץ');}};reader.readAsText(file);if(fileInputRef.current)fileInputRef.current.value='';};if(!user){return/*#__PURE__*/_jsx(LoginScreen,{});}if(showAdminDashboard){return/*#__PURE__*/_jsx(AdminDashboard,{currentUserName:user.username,onEditCase:handleAdminEditCase,onLogout:handleLogout});}if(isLoadingCases||!currentCase){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-slate-100 text-slate-600\",children:loadError||'טוען תיקים מהשרת...'});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col md:flex-row bg-slate-100 text-slate-900 font-sans print:bg-white\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"w-full md:w-64 bg-slate-900 text-slate-300 flex flex-col shrink-0 no-print\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b border-slate-800\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white serif tracking-wide\",children:\"LexMedical\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-2 text-xs text-slate-400\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-green-500\"}),\"\\u05DE\\u05D7\\u05D5\\u05D1\\u05E8: \",user.username]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 flex-1 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveStep(0),className:\"w-full flex items-center justify-between p-3 rounded text-sm transition \".concat(activeStep===0?'bg-blue-900/50 text-white border-r-2 border-blue-500':'hover:bg-slate-800'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Home,{className:\"w-4 h-4\"}),\" \\u05DC\\u05D5\\u05D7 \\u05D1\\u05E7\\u05E8\\u05D4\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-bold text-slate-500 uppercase tracking-wider mt-6 mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FolderOpen,{className:\"w-3 h-3\"}),\" \\u05EA\\u05D4\\u05DC\\u05D9\\u05DA \\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveStep(1),className:\"w-full flex items-center justify-between p-3 rounded text-sm transition \".concat(activeStep===1?'bg-blue-900/50 text-white border-r-2 border-blue-500':'hover:bg-slate-800'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-4 h-4\"}),\" \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05D7\\u05D1\\u05D5\\u05EA\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveStep(2),className:\"w-full flex items-center justify-between p-3 rounded text-sm transition \".concat(activeStep===2?'bg-blue-900/50 text-white border-r-2 border-blue-500':'hover:bg-slate-800'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Activity,{className:\"w-4 h-4\"}),\" \\u05E0\\u05D6\\u05E7 \\u05D5\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveStep(3),className:\"w-full flex items-center justify-between p-3 rounded text-sm transition \".concat(activeStep===3?'bg-blue-900/50 text-white border-r-2 border-blue-500':'hover:bg-slate-800'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"w-4 h-4\"}),\" \\u05E0\\u05D9\\u05DE\\u05D5\\u05E7\\u05D9\\u05DD\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveStep(4),className:\"w-full flex items-center justify-between p-3 rounded text-sm transition \".concat(activeStep===4?'bg-blue-900/50 text-white border-r-2 border-blue-500':'hover:bg-slate-800'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-4 h-4\"}),\" \\u05D3\\u05D5\\u05D7 \\u05DE\\u05E1\\u05DB\\u05DD\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 pt-6 border-t border-slate-800 space-y-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2\",children:\"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCreateNewCase(user.username),className:\"w-full flex items-center gap-3 p-2 text-sm hover:bg-slate-800 rounded text-slate-400 hover:text-white\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4 rotate-180\"}),\" \\u05EA\\u05D9\\u05E7 \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleExportCase,className:\"w-full flex items-center gap-3 p-2 text-sm hover:bg-slate-800 rounded text-slate-400 hover:text-white\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05D9\\u05E7 \\u05DC\\u05E7\\u05D5\\u05D1\\u05E5\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleImportClick,className:\"w-full flex items-center gap-3 p-2 text-sm hover:bg-slate-800 rounded text-slate-400 hover:text-white\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4\"}),\" \\u05D8\\u05E2\\u05DF \\u05EA\\u05D9\\u05E7 \\u05DE\\u05E7\\u05D5\\u05D1\\u05E5\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleImportFile,className:\"hidden\",accept:\".json\"}),loadError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-400\",children:loadError})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-t border-slate-800 space-y-3\",children:[isAdmin&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAdminDashboard(true),className:\"w-full flex items-center gap-2 text-sm text-slate-400 hover:text-white transition\",children:[/*#__PURE__*/_jsx(LayoutDashboard,{className:\"w-4 h-4\"}),\" \\u05D7\\u05D6\\u05E8\\u05D4 \\u05DC\\u05D3\\u05E9\\u05D1\\u05D5\\u05E8\\u05D3\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"w-full flex items-center gap-2 text-sm text-red-400 hover:text-red-300 transition\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\" \\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 flex flex-col h-screen overflow-hidden print:h-auto print:overflow-visible\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 shrink-0 no-print\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-500\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-slate-800\",children:\"\\u05E9\\u05DD \\u05D4\\u05EA\\u05D9\\u05E7:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border-b border-transparent hover:border-slate-300 focus:border-blue-500 focus:outline-none px-1 transition w-64\",value:currentCase.name,onChange:e=>setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{name:e.target.value}))}),currentCase.attorney!==user.username&&/*#__PURE__*/_jsxs(\"span\",{className:\"bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded-full\",children:[\"\\u05E6\\u05E4\\u05D9\\u05D9\\u05D4 \\u05D1\\u05EA\\u05D9\\u05E7 \\u05E9\\u05DC \",currentCase.attorney]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-slate-500 min-w-[80px] text-right\",children:[saveStatus==='saving'&&'שומר...',saveStatus==='saved'&&'נשמר',saveStatus==='error'&&'שמירה נכשלה']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveStep(prev=>Math.max(0,prev-1)),disabled:activeStep===0,className:\"text-sm text-slate-500 hover:text-slate-800 disabled:opacity-30\",children:\"\\u05D7\\u05D6\\u05D5\\u05E8\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveStep(prev=>Math.min(4,prev+1)),disabled:activeStep===4,className:\"bg-slate-900 text-white px-4 py-2 rounded text-sm font-medium hover:bg-slate-800 flex items-center gap-2 disabled:opacity-50\",children:[activeStep===0?'התחל עבודה':'לשלב הבא',\" \",/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-8 print:p-0 print:overflow-visible\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto print:max-w-none pb-20\",children:[activeStep===0&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-fadeIn\",children:/*#__PURE__*/_jsx(CaseDashboard,{caseData:currentCase,navigateToStep:setActiveStep})}),activeStep===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fadeIn space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-sm border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-bold text-slate-700\",children:\"\\u05E8\\u05E7\\u05E2 \\u05E2\\u05D5\\u05D1\\u05D3\\u05EA\\u05D9 / \\u05E1\\u05D9\\u05DB\\u05D5\\u05DD \\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"summary-upload\",className:\"hidden\",accept:\".pdf,.doc,.docx,.txt\",onChange:handleSummaryFileUpload}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"summary-upload\",className:\"cursor-pointer flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 bg-blue-50 px-2 py-1 rounded border border-blue-100 transition\",children:[/*#__PURE__*/_jsx(UploadCloud,{className:\"w-3 h-3\"}),\" \\u05E6\\u05E8\\u05E3 \\u05E7\\u05D5\\u05D1\\u05E5\"]})]})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full p-4 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition h-32\",placeholder:\"\\u05D4\\u05D6\\u05DF \\u05DB\\u05D0\\u05DF \\u05D0\\u05EA \\u05D4\\u05E2\\u05D5\\u05D1\\u05D3\\u05D5\\u05EA \\u05D4\\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D5\\u05EA...\",value:currentCase.summary,onChange:e=>setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summary:e.target.value}))}),currentCase.summaryFiles&&currentCase.summaryFiles.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 flex flex-wrap gap-2\",children:currentCase.summaryFiles.map((file,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-slate-100 text-slate-700 text-xs px-3 py-1 rounded-full border border-slate-200\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate max-w-[150px]\",children:file.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSummaryFile(file.name),className:\"text-slate-400 hover:text-red-500 ml-1\",children:\"\\xD7\"})]},idx))})]}),/*#__PURE__*/_jsx(LiabilityStep,{caseData:currentCase,updateCaseData:setCurrentCase})]}),activeStep===2&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-fadeIn\",children:/*#__PURE__*/_jsx(DamagesStep,{caseData:currentCase,updateCaseData:setCurrentCase})}),activeStep===3&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-fadeIn\",children:/*#__PURE__*/_jsx(ReasoningStep,{caseData:currentCase})}),activeStep===4&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-fadeIn\",children:/*#__PURE__*/_jsx(ReportStep,{caseData:currentCase})})]})})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useAuth","createCase","apiCreateCase","listCases","apiListCases","updateCase","apiUpdateCase","LoginScreen","AdminDashboard","LiabilityStep","DamagesStep","ReasoningStep","ReportStep","CaseDashboard","FolderOpen","ChevronLeft","Shield","Activity","UploadCloud","FileText","LogOut","LayoutDashboard","BookOpen","Download","Upload","Home","jsx","_jsx","jsxs","_jsxs","createEmptyCase","attorney","id","Date","now","toString","name","toLocaleDateString","lastUpdated","toISOString","summary","summaryFiles","liability","issues","medicalRecordQuality","doctrines","precedents","expertsPlaintiff","expertsDefense","expertCourtOpinions","expertCourtStance","aggravatingFactors","mitigatingFactors","probability","probabilityRange","uncertainty","strengthsPlaintiff","weaknessesPlaintiff","strengthsDefense","weaknessesDefense","damages","dateOfBirth","gender","dateOfEvent","setFullYear","getFullYear","split","dateOfCalc","dateOfRetirement","ageAtInjury","currentAge","lifeExpectancy","wagePreInjury","wagePostInjury","permanentDisabilityMedical","permanentDisabilityFunctional","daysOfHospitalization","interestRate","heads","isActive","parameters","calculatedAmount","notes","App","user","logout","activeStep","setActiveStep","showAdminDashboard","setShowAdminDashboard","caseList","setCaseList","currentCaseId","setCurrentCaseId","currentCase","setCurrentCase","saveStatus","setSaveStatus","isLoadingCases","setIsLoadingCases","loadError","setLoadError","fileInputRef","saveTimeoutRef","resetStatusTimeoutRef","hydratingRef","isAdmin","role","cleanupClientState","current","clearTimeout","normalizeCaseData","record","attorneyFallback","safeData","data","_objectSpread","title","concat","cancelled","bootstrap","cases","length","handleCreateNewCase","username","sorted","sort","a","b","updatedAt","getTime","primary","error","console","handleLogout","handleAdminEditCase","caseData","attorneyName","template","created","prev","normalized","setTimeout","updated","filtered","filter","c","handleSummaryFileUpload","e","target","files","file","newFile","size","type","lastModified","removeSummaryFile","fileName","f","handleExportCase","dataStr","JSON","stringify","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","replace","body","appendChild","click","removeChild","handleImportClick","_fileInputRef$current","handleImportFile","_e$target$files","reader","FileReader","onload","event","_event$target","json","parse","result","alert","err","readAsText","value","currentUserName","onEditCase","onLogout","className","children","dir","onClick","ref","onChange","accept","Math","max","disabled","min","navigateToStep","htmlFor","placeholder","map","idx","updateCaseData"],"sources":["C:/Office-Apps/LexMedical-App/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { CaseData, AttachedFile } from './types';\nimport { useAuth } from './context/AuthContext';\nimport {\n  CaseRecord,\n  createCase as apiCreateCase,\n  listCases as apiListCases,\n  updateCase as apiUpdateCase,\n} from './services/api';\nimport LoginScreen from './components/LoginScreen';\nimport AdminDashboard from './components/AdminDashboard';\nimport LiabilityStep from './components/LiabilityStep';\nimport DamagesStep from './components/DamagesStep';\nimport ReasoningStep from './components/ReasoningStep';\nimport ReportStep from './components/ReportStep';\nimport CaseDashboard from './components/CaseDashboard';\nimport {\n  FolderOpen,\n  ChevronLeft,\n  Shield,\n  Activity,\n  UploadCloud,\n  FileText,\n  LogOut,\n  LayoutDashboard,\n  BookOpen,\n  Download,\n  Upload,\n  Home,\n} from 'lucide-react';\n\nconst createEmptyCase = (attorney: string): CaseData => ({\n  id: Date.now().toString(),\n  name: 'תיק חדש ' + new Date().toLocaleDateString('he-IL'),\n  attorney,\n  lastUpdated: new Date().toISOString(),\n  summary: '',\n  summaryFiles: [],\n  liability: {\n    issues: [],\n    medicalRecordQuality: 'Complete',\n    doctrines: [],\n    precedents: [],\n    expertsPlaintiff: [],\n    expertsDefense: [],\n    expertCourtOpinions: [], \n    expertCourtStance: 'None', \n    aggravatingFactors: 2,\n    mitigatingFactors: 2,\n    probability: 50,\n    probabilityRange: [40, 60],\n    uncertainty: 'Medium',\n    strengthsPlaintiff: [''],\n    weaknessesPlaintiff: [''],\n    strengthsDefense: [''],\n    weaknessesDefense: ['']\n  },\n  damages: {\n    dateOfBirth: '1990-01-01', \n    gender: 'Male',\n    dateOfEvent: new Date(new Date().setFullYear(new Date().getFullYear() - 2)).toISOString().split('T')[0], \n    dateOfCalc: new Date().toISOString().split('T')[0],\n    dateOfRetirement: '',\n    ageAtInjury: 0, \n    currentAge: 0, \n    lifeExpectancy: 82, \n    wagePreInjury: 10000,\n    wagePostInjury: 0,\n    permanentDisabilityMedical: 10,\n    permanentDisabilityFunctional: 10,\n    daysOfHospitalization: 0,\n    interestRate: 3,\n    heads: [\n      { id: '1', name: 'הפסד שכר לעבר', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '2', name: 'הפסד שכר לעתיד', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '3', name: 'הפסד פנסיה ותנאים סוציאליים', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '4', name: 'כאב וסבל', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '5', name: 'עזרת צד ג׳ לעבר', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '6', name: 'עזרת צד ג׳ לעתיד', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '7', name: 'הוצאות רפואיות', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '8', name: 'ניידות ונסיעות', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n    ],\n    precedents: []\n  }\n});\n\nconst App: React.FC = () => {\n  const { user, logout } = useAuth();\n  const [activeStep, setActiveStep] = useState<number>(0);\n  const [showAdminDashboard, setShowAdminDashboard] = useState(false);\n  const [caseList, setCaseList] = useState<CaseRecord[]>([]);\n  const [currentCaseId, setCurrentCaseId] = useState<string | null>(null);\n  const [currentCase, setCurrentCase] = useState<CaseData | null>(null);\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'saved' | 'error'>('idle');\n  const [isLoadingCases, setIsLoadingCases] = useState(false);\n  const [loadError, setLoadError] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const saveTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const resetStatusTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const hydratingRef = useRef(false);\n\n  const isAdmin = user?.role === 'admin';\n\n  const cleanupClientState = () => {\n    setCaseList([]);\n    setCurrentCaseId(null);\n    setCurrentCase(null);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n    setSaveStatus('idle');\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n      saveTimeoutRef.current = null;\n    }\n    if (resetStatusTimeoutRef.current) {\n      clearTimeout(resetStatusTimeoutRef.current);\n      resetStatusTimeoutRef.current = null;\n    }\n  };\n\n  const normalizeCaseData = (record: CaseRecord, attorneyFallback: string): CaseData => {\n    const safeData = (record.data as CaseData) || createEmptyCase(attorneyFallback);\n    return {\n      ...createEmptyCase(attorneyFallback),\n      ...safeData,\n      id: record.id,\n      name: safeData.name || record.title || `תיק ${new Date().toLocaleDateString('he-IL')}`,\n      attorney: safeData.attorney || attorneyFallback,\n    };\n  };\n\n  useEffect(() => {\n    let cancelled = false;\n    const bootstrap = async () => {\n      if (!user) {\n        cleanupClientState();\n        return;\n      }\n      setIsLoadingCases(true);\n      setLoadError(null);\n      try {\n        const cases = await apiListCases();\n        if (cancelled) return;\n        setCaseList(cases);\n        setShowAdminDashboard(isAdmin);\n        if (!cases.length) {\n          await handleCreateNewCase(user.username);\n          return;\n        }\n        const sorted = [...cases].sort(\n          (a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime(),\n        );\n        const primary = sorted[0];\n        setCurrentCaseId(primary.id);\n        hydratingRef.current = true;\n        setCurrentCase(normalizeCaseData(primary, user.username));\n        setActiveStep(0);\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setLoadError('טעינת התיקים נכשלה. נסה שוב בעוד רגע.');\n        }\n      } finally {\n        if (!cancelled) {\n          setIsLoadingCases(false);\n        }\n      }\n    };\n\n    bootstrap();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [user, isAdmin, handleCreateNewCase]);\n\n  const handleLogout = () => {\n    logout();\n    cleanupClientState();\n  };\n\n  const handleAdminEditCase = (caseData: CaseData) => {\n    setCurrentCaseId(caseData.id);\n    hydratingRef.current = true;\n    setCurrentCase(caseData);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n  };\n\n  const handleCreateNewCase = useCallback(async (attorneyName: string) => {\n    if (!user) return;\n    setIsLoadingCases(true);\n    setLoadError(null);\n    try {\n      const template = createEmptyCase(attorneyName);\n      const created = await apiCreateCase({ title: template.name, data: template });\n      setCaseList((prev) => [created, ...prev]);\n      const normalized = { ...template, id: created.id };\n      setCurrentCaseId(created.id);\n      hydratingRef.current = true;\n      setCurrentCase(normalized);\n      setActiveStep(0);\n    } catch (error) {\n      console.error(error);\n      setLoadError('יצירת תיק חדש נכשלה.');\n    } finally {\n      setIsLoadingCases(false);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (!user || !currentCaseId || !currentCase || showAdminDashboard) return;\n    if (hydratingRef.current) {\n      hydratingRef.current = false;\n      return;\n    }\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n    }\n    setSaveStatus('saving');\n    saveTimeoutRef.current = setTimeout(async () => {\n      try {\n        const updated = await apiUpdateCase(currentCaseId, {\n          title: currentCase.name,\n          data: currentCase,\n        });\n        setCaseList((prev) => {\n          const filtered = prev.filter((c) => c.id !== updated.id);\n          return [updated, ...filtered];\n        });\n        setSaveStatus('saved');\n        if (resetStatusTimeoutRef.current) {\n          clearTimeout(resetStatusTimeoutRef.current);\n        }\n        resetStatusTimeoutRef.current = setTimeout(() => setSaveStatus('idle'), 1500);\n      } catch (error) {\n        console.error(error);\n        setSaveStatus('error');\n      }\n    }, 1200);\n\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n        saveTimeoutRef.current = null;\n      }\n    };\n  }, [currentCase, currentCaseId, user, showAdminDashboard]);\n\n  const handleSummaryFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0] && currentCase) {\n      const file = e.target.files[0];\n      const newFile: AttachedFile = {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        lastModified: file.lastModified\n      };\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: [...(currentCase.summaryFiles || []), newFile]\n      });\n    }\n  };\n\n  const removeSummaryFile = (fileName: string) => {\n    if (currentCase) {\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: currentCase.summaryFiles.filter((f: AttachedFile) => f.name !== fileName)\n      });\n    }\n  };\n\n  const handleExportCase = () => {\n    if (!currentCase) return;\n    const dataStr = JSON.stringify(currentCase, null, 2);\n    const blob = new Blob([dataStr], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `lexmedical_${currentCase.name.replace(/\\s+/g, '_')}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleImportClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleImportFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try {\n        const json = JSON.parse(event.target?.result as string);\n        if (json.id && json.liability && json.damages) {\n          hydratingRef.current = true;\n          setCurrentCase(json);\n          alert('התיק נטען בהצלחה! השינויים יישמרו אוטומטית.');\n          setActiveStep(0);\n        } else {\n          alert('קובץ לא תקין.');\n        }\n      } catch (err) {\n        alert('שגיאה בטעינת הקובץ');\n      }\n    };\n    reader.readAsText(file);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n\n  if (!user) {\n    return <LoginScreen />;\n  }\n\n  if (showAdminDashboard) {\n    return (\n      <AdminDashboard\n        currentUserName={user.username}\n        onEditCase={handleAdminEditCase}\n        onLogout={handleLogout}\n      />\n    );\n  }\n\n  if (isLoadingCases || !currentCase) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-100 text-slate-600\">\n        {loadError || 'טוען תיקים מהשרת...'}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col md:flex-row bg-slate-100 text-slate-900 font-sans print:bg-white\" dir=\"rtl\">\n      <aside className=\"w-full md:w-64 bg-slate-900 text-slate-300 flex flex-col shrink-0 no-print\">\n        <div className=\"p-6 border-b border-slate-800\">\n          <h1 className=\"text-xl font-bold text-white serif tracking-wide\">LexMedical</h1>\n          <div className=\"flex items-center gap-2 mt-2 text-xs text-slate-400\">\n             <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n             מחובר: {user.username}\n          </div>\n        </div>\n\n        <div className=\"p-6 flex-1 overflow-y-auto\">\n          <nav className=\"space-y-2\">\n             <button onClick={() => setActiveStep(0)} className={`w-full flex items-center justify-between p-3 rounded text-sm transition ${activeStep === 0 ? 'bg-blue-900/50 text-white border-r-2 border-blue-500' : 'hover:bg-slate-800'}`}>\n               <div className=\"flex items-center gap-3\"><Home className=\"w-4 h-4\" /> לוח בקרה</div>\n             </button>\n             <div className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mt-6 mb-2 flex items-center gap-2\">\n               <FolderOpen className=\"w-3 h-3\" /> תהליך עבודה\n             </div>\n             <button onClick={() => setActiveStep(1)} className={`w-full flex items-center justify-between p-3 rounded text-sm transition ${activeStep === 1 ? 'bg-blue-900/50 text-white border-r-2 border-blue-500' : 'hover:bg-slate-800'}`}>\n               <div className=\"flex items-center gap-3\"><Shield className=\"w-4 h-4\" /> ניתוח חבות</div>\n             </button>\n             <button onClick={() => setActiveStep(2)} className={`w-full flex items-center justify-between p-3 rounded text-sm transition ${activeStep === 2 ? 'bg-blue-900/50 text-white border-r-2 border-blue-500' : 'hover:bg-slate-800'}`}>\n               <div className=\"flex items-center gap-3\"><Activity className=\"w-4 h-4\" /> נזק ותחשיב</div>\n             </button>\n             <button onClick={() => setActiveStep(3)} className={`w-full flex items-center justify-between p-3 rounded text-sm transition ${activeStep === 3 ? 'bg-blue-900/50 text-white border-r-2 border-blue-500' : 'hover:bg-slate-800'}`}>\n               <div className=\"flex items-center gap-3\"><BookOpen className=\"w-4 h-4\" /> נימוקים</div>\n             </button>\n             <button onClick={() => setActiveStep(4)} className={`w-full flex items-center justify-between p-3 rounded text-sm transition ${activeStep === 4 ? 'bg-blue-900/50 text-white border-r-2 border-blue-500' : 'hover:bg-slate-800'}`}>\n               <div className=\"flex items-center gap-3\"><FileText className=\"w-4 h-4\" /> דוח מסכם</div>\n             </button>\n          </nav>\n\n          <div className=\"mt-8 pt-6 border-t border-slate-800 space-y-3\">\n            <div className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2\">ניהול נתונים</div>\n            <button\n              onClick={() => handleCreateNewCase(user.username)}\n              className=\"w-full flex items-center gap-3 p-2 text-sm hover:bg-slate-800 rounded text-slate-400 hover:text-white\"\n            >\n              <Upload className=\"w-4 h-4 rotate-180\" /> תיק חדש\n            </button>\n            <button onClick={handleExportCase} className=\"w-full flex items-center gap-3 p-2 text-sm hover:bg-slate-800 rounded text-slate-400 hover:text-white\">\n               <Download className=\"w-4 h-4\" /> שמור תיק לקובץ\n            </button>\n            <button onClick={handleImportClick} className=\"w-full flex items-center gap-3 p-2 text-sm hover:bg-slate-800 rounded text-slate-400 hover:text-white\">\n               <Upload className=\"w-4 h-4\" /> טען תיק מקובץ\n            </button>\n            <input type=\"file\" ref={fileInputRef} onChange={handleImportFile} className=\"hidden\" accept=\".json\" />\n            {loadError && <p className=\"text-xs text-red-400\">{loadError}</p>}\n          </div>\n        </div>\n\n        <div className=\"p-6 border-t border-slate-800 space-y-3\">\n          {isAdmin && (\n            <button onClick={() => setShowAdminDashboard(true)} className=\"w-full flex items-center gap-2 text-sm text-slate-400 hover:text-white transition\">\n              <LayoutDashboard className=\"w-4 h-4\" /> חזרה לדשבורד\n            </button>\n          )}\n          <button onClick={handleLogout} className=\"w-full flex items-center gap-2 text-sm text-red-400 hover:text-red-300 transition\">\n            <LogOut className=\"w-4 h-4\" /> התנתק\n          </button>\n        </div>\n      </aside>\n\n      <main className=\"flex-1 flex flex-col h-screen overflow-hidden print:h-auto print:overflow-visible\">\n        <header className=\"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 shrink-0 no-print\">\n           <div className=\"flex items-center gap-2 text-sm text-slate-500\">\n             <span className=\"font-semibold text-slate-800\">שם התיק:</span>\n             <input className=\"border-b border-transparent hover:border-slate-300 focus:border-blue-500 focus:outline-none px-1 transition w-64\" value={currentCase.name} onChange={(e) => setCurrentCase({...currentCase, name: e.target.value})} />\n             {currentCase.attorney !== user.username && (\n               <span className=\"bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded-full\">צפייה בתיק של {currentCase.attorney}</span>\n             )}\n           </div>\n           <div className=\"flex items-center gap-4\">\n             <span className=\"text-xs text-slate-500 min-w-[80px] text-right\">\n               {saveStatus === 'saving' && 'שומר...'}\n               {saveStatus === 'saved' && 'נשמר'}\n               {saveStatus === 'error' && 'שמירה נכשלה'}\n             </span>\n             <button onClick={() => setActiveStep(prev => Math.max(0, prev - 1))} disabled={activeStep === 0} className=\"text-sm text-slate-500 hover:text-slate-800 disabled:opacity-30\">חזור</button>\n             <button onClick={() => setActiveStep(prev => Math.min(4, prev + 1))} disabled={activeStep === 4} className=\"bg-slate-900 text-white px-4 py-2 rounded text-sm font-medium hover:bg-slate-800 flex items-center gap-2 disabled:opacity-50\">\n               {activeStep === 0 ? 'התחל עבודה' : 'לשלב הבא'} <ChevronLeft className=\"w-4 h-4\" />\n             </button>\n           </div>\n        </header>\n\n        <div className=\"flex-1 overflow-y-auto p-8 print:p-0 print:overflow-visible\">\n          <div className=\"max-w-5xl mx-auto print:max-w-none pb-20\">\n            {activeStep === 0 && <div className=\"animate-fadeIn\"><CaseDashboard caseData={currentCase} navigateToStep={setActiveStep} /></div>}\n            {activeStep === 1 && (\n              <div className=\"animate-fadeIn space-y-8\">\n                <div className=\"bg-white p-6 rounded-lg shadow-sm border border-slate-200\">\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <label className=\"block text-sm font-bold text-slate-700\">רקע עובדתי / סיכום תיק</label>\n                    <div className=\"relative\">\n                      <input type=\"file\" id=\"summary-upload\" className=\"hidden\" accept=\".pdf,.doc,.docx,.txt\" onChange={handleSummaryFileUpload} />\n                      <label htmlFor=\"summary-upload\" className=\"cursor-pointer flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 bg-blue-50 px-2 py-1 rounded border border-blue-100 transition\"><UploadCloud className=\"w-3 h-3\" /> צרף קובץ</label>\n                    </div>\n                  </div>\n                  <textarea className=\"w-full p-4 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition h-32\" placeholder=\"הזן כאן את העובדות המעובדות...\" value={currentCase.summary} onChange={(e) => setCurrentCase({...currentCase, summary: e.target.value})} />\n                  {currentCase.summaryFiles && currentCase.summaryFiles.length > 0 && (\n                    <div className=\"mt-3 flex flex-wrap gap-2\">\n                      {currentCase.summaryFiles.map((file: AttachedFile, idx: number) => (\n                        <div key={idx} className=\"flex items-center gap-2 bg-slate-100 text-slate-700 text-xs px-3 py-1 rounded-full border border-slate-200\">\n                          <FileText className=\"w-3 h-3\" /><span className=\"truncate max-w-[150px]\">{file.name}</span>\n                          <button onClick={() => removeSummaryFile(file.name)} className=\"text-slate-400 hover:text-red-500 ml-1\">×</button>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n                <LiabilityStep caseData={currentCase} updateCaseData={setCurrentCase} />\n              </div>\n            )}\n            {activeStep === 2 && <div className=\"animate-fadeIn\"><DamagesStep caseData={currentCase} updateCaseData={setCurrentCase} /></div>}\n            {activeStep === 3 && <div className=\"animate-fadeIn\"><ReasoningStep caseData={currentCase} /></div>}\n            {activeStep === 4 && <div className=\"animate-fadeIn\"><ReportStep caseData={currentCase} /></div>}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}