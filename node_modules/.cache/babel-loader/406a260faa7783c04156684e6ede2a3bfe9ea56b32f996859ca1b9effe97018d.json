{"ast":null,"code":"import React,{createContext,useContext,useState}from'react';import{login as loginRequest}from'../services/authClient';import{setAuthToken}from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(undefined);export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[token,setToken]=useState(null);const[loading,setLoading]=useState(false);const login=async(username,password)=>{setLoading(true);try{const result=await loginRequest(username,password);setUser(result.user);setToken(result.token);setAuthToken(result.token);}finally{setLoading(false);}};const logout=()=>{setUser(null);setToken(null);setAuthToken(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,token,login,logout,loading},children:children});};export const useAuth=()=>{const ctx=useContext(AuthContext);if(!ctx){throw new Error('useAuth must be used within AuthProvider');}return ctx;};","map":{"version":3,"names":["React","createContext","useContext","useState","login","loginRequest","setAuthToken","jsx","_jsx","AuthContext","undefined","AuthProvider","_ref","children","user","setUser","token","setToken","loading","setLoading","username","password","result","logout","Provider","value","useAuth","ctx","Error"],"sources":["C:/Office-Apps/LexMedical-App/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\r\nimport type { PropsWithChildren } from 'react';\r\nimport { login as loginRequest, AuthUser } from '../services/authClient';\r\nimport { setAuthToken } from '../services/api';\r\n\r\ninterface AuthContextValue {\r\n  user: AuthUser | null;\r\n  token: string | null;\r\n  login: (username: string, password: string) => Promise<void>;\r\n  logout: () => void;\r\n  loading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextValue | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<PropsWithChildren> = ({ children }) => {\r\n  const [user, setUser] = useState<AuthUser | null>(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const login = async (username: string, password: string): Promise<void> => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await loginRequest(username, password);\r\n      setUser(result.user);\r\n      setToken(result.token);\r\n      setAuthToken(result.token);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const logout = (): void => {\r\n    setUser(null);\r\n    setToken(null);\r\n    setAuthToken(null);\r\n  };\r\n\r\n  return <AuthContext.Provider value={{ user, token, login, logout, loading }}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport const useAuth = (): AuthContextValue => {\r\n  const ctx = useContext(AuthContext);\r\n  if (!ctx) {\r\n    throw new Error('useAuth must be used within AuthProvider');\r\n  }\r\n  return ctx;\r\n};\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAElE,OAASC,KAAK,GAAI,CAAAC,YAAY,KAAkB,wBAAwB,CACxE,OAASC,YAAY,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAU/C,KAAM,CAAAC,WAAW,cAAGR,aAAa,CAA+BS,SAAS,CAAC,CAE1E,MAAO,MAAM,CAAAC,YAAyC,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACpE,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAkB,IAAI,CAAC,CACvD,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAC,KAAK,CAAG,KAAAA,CAAOgB,QAAgB,CAAEC,QAAgB,GAAoB,CACzEF,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAG,MAAM,CAAG,KAAM,CAAAjB,YAAY,CAACe,QAAQ,CAAEC,QAAQ,CAAC,CACrDN,OAAO,CAACO,MAAM,CAACR,IAAI,CAAC,CACpBG,QAAQ,CAACK,MAAM,CAACN,KAAK,CAAC,CACtBV,YAAY,CAACgB,MAAM,CAACN,KAAK,CAAC,CAC5B,CAAC,OAAS,CACRG,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAI,MAAM,CAAGA,CAAA,GAAY,CACzBR,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAAC,IAAI,CAAC,CACdX,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,mBAAOE,IAAA,CAACC,WAAW,CAACe,QAAQ,EAACC,KAAK,CAAE,CAAEX,IAAI,CAAEE,KAAK,CAAEZ,KAAK,CAAEmB,MAAM,CAAEL,OAAQ,CAAE,CAAAL,QAAA,CAAEA,QAAQ,CAAuB,CAAC,CAChH,CAAC,CAED,MAAO,MAAM,CAAAa,OAAO,CAAGA,CAAA,GAAwB,CAC7C,KAAM,CAAAC,GAAG,CAAGzB,UAAU,CAACO,WAAW,CAAC,CACnC,GAAI,CAACkB,GAAG,CAAE,CACR,KAAM,IAAI,CAAAC,KAAK,CAAC,0CAA0C,CAAC,CAC7D,CACA,MAAO,CAAAD,GAAG,CACZ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}