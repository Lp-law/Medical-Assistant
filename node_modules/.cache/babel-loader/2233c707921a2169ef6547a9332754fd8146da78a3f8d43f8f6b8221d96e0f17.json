{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{calculateLiabilityScore}from'../services/calculations';import{Scale}from'lucide-react';import SmartAssistant from'./SmartAssistant';import{listKnowledgeDocuments,getKnowledgeDocument}from'../services/knowledgeApi';import QualityBadge from'./QualityBadge';import KnowledgeFlags from'./KnowledgeFlags';import KnowledgeClaimsPanel from'./KnowledgeClaimsPanel';import MedicalTimeline from'./MedicalTimeline';import MedicalQualityBox from'./MedicalQualityBox';import LiteraturePanel from'./LiteraturePanel';import{Loader2}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LiabilityStep=_ref=>{var _medicalDetail$qualit,_medicalDetail$reason,_medicalDetail$litera;let{caseData,updateCaseData}=_ref;const[localAnalysis,setLocalAnalysis]=useState(caseData.liability);const[assistantOpen,setAssistantOpen]=useState(false);const[evidenceOpen,setEvidenceOpen]=useState(false);const[evidenceInitialized,setEvidenceInitialized]=useState(false);const[medicalDocs,setMedicalDocs]=useState([]);const[selectedMedicalId,setSelectedMedicalId]=useState('');const[medicalDetail,setMedicalDetail]=useState(null);const[medicalListLoading,setMedicalListLoading]=useState(false);const[medicalDetailLoading,setMedicalDetailLoading]=useState(false);const[medicalError,setMedicalError]=useState(null);useEffect(()=>{const result=calculateLiabilityScore(50,localAnalysis.aggravatingFactors,localAnalysis.mitigatingFactors,localAnalysis.medicalRecordQuality,localAnalysis.expertCourtStance);setLocalAnalysis(prev=>_objectSpread(_objectSpread({},prev),{},{probability:result.probability,probabilityRange:result.range,uncertainty:result.uncertainty}));},[localAnalysis.aggravatingFactors,localAnalysis.mitigatingFactors,localAnalysis.medicalRecordQuality,localAnalysis.expertCourtStance]);useEffect(()=>{if(caseData.liability===localAnalysis)return;setLocalAnalysis(caseData.liability);},[caseData.liability,localAnalysis]);useEffect(()=>{updateCaseData(prev=>{if(!prev)return prev;if(prev.liability===localAnalysis)return prev;return _objectSpread(_objectSpread({},prev),{},{liability:localAnalysis});});},[localAnalysis,updateCaseData]);useEffect(()=>{if(!evidenceOpen||evidenceInitialized)return;let cancelled=false;const loadDocuments=async()=>{setMedicalListLoading(true);setMedicalError(null);try{const docs=await listKnowledgeDocuments({docType:'chapter',limit:10});if(!cancelled){var _docs$0$id,_docs$;setMedicalDocs(docs);setSelectedMedicalId((_docs$0$id=(_docs$=docs[0])===null||_docs$===void 0?void 0:_docs$.id)!==null&&_docs$0$id!==void 0?_docs$0$id:'');setEvidenceInitialized(true);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת ניתוחים רפואיים נכשלה.');}}finally{if(!cancelled){setMedicalListLoading(false);}}};loadDocuments();return()=>{cancelled=true;};},[evidenceOpen,evidenceInitialized]);useEffect(()=>{if(!evidenceOpen||!selectedMedicalId){setMedicalDetail(null);return;}let cancelled=false;setMedicalDetailLoading(true);setMedicalError(null);const loadDetail=async()=>{try{const doc=await getKnowledgeDocument(selectedMedicalId);if(!cancelled){setMedicalDetail(doc);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת המסמך הרפואי נכשלה.');setMedicalDetail(null);}}finally{if(!cancelled){setMedicalDetailLoading(false);}}};loadDetail();return()=>{cancelled=true;};},[evidenceOpen,selectedMedicalId]);const refreshEvidenceDetail=useCallback(async()=>{if(!selectedMedicalId)return;try{const doc=await getKnowledgeDocument(selectedMedicalId);setMedicalDetail(doc);}catch(error){console.error(error);setMedicalError('טעינת המסמך הרפואי נכשלה.');}},[selectedMedicalId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex relative\",children:[/*#__PURE__*/_jsx(SmartAssistant,{isOpen:assistantOpen,onClose:()=>setAssistantOpen(false),contextQuery:\"\",onImportPrecedent:()=>{},onImportRule:()=>{}}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 space-y-8 pb-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-sm border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-slate-800 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Scale,{className:\"w-5 h-5\"}),\" \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05D7\\u05D1\\u05D5\\u05EA\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4 p-4 bg-slate-100 rounded text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-4xl font-bold\",children:[localAnalysis.probability,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-slate-500\",children:\"\\u05E1\\u05D9\\u05DB\\u05D5\\u05D9 \\u05DC\\u05EA\\u05D1\\u05D9\\u05E2\\u05D4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 border-t border-slate-200 pt-4\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"flex w-full items-center justify-between rounded border border-slate-300 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-700\",onClick:()=>setEvidenceOpen(prev=>!prev),children:[/*#__PURE__*/_jsx(\"span\",{children:\"Medical Evidence\"}),/*#__PURE__*/_jsx(\"span\",{children:evidenceOpen?'הסתר':'הצג'})]}),evidenceOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-4\",children:[medicalError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\",children:medicalError}),medicalListLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-500\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin\"}),\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD...\"]}),!medicalListLoading&&medicalDocs.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-slate-200 bg-white p-3 text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD \\u05DC\\u05D4\\u05E6\\u05D2\\u05D4.\"}),medicalDocs.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-500\",children:\"\\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA\"}),/*#__PURE__*/_jsx(\"select\",{className:\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\",value:selectedMedicalId,onChange:e=>setSelectedMedicalId(e.target.value),disabled:medicalListLoading,children:medicalDocs.map(doc=>/*#__PURE__*/_jsx(\"option\",{value:doc.id,children:doc.title},doc.id))})]}),medicalDetailLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-500\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin\"}),\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9...\"]}),medicalDetail&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(QualityBadge,{score:medicalDetail.score,label:\"\\u05DE\\u05D3\\u05D3 \\u05D0\\u05D9\\u05DB\\u05D5\\u05EA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA\"}),/*#__PURE__*/_jsx(MedicalQualityBox,{score:medicalDetail.medicalQualityScore,findings:(_medicalDetail$qualit=medicalDetail.qualityFindings)!==null&&_medicalDetail$qualit!==void 0?_medicalDetail$qualit:[],reasoningFindings:(_medicalDetail$reason=medicalDetail.reasoningFindings)!==null&&_medicalDetail$reason!==void 0?_medicalDetail$reason:[]}),/*#__PURE__*/_jsx(KnowledgeFlags,{flags:medicalDetail.flags||[]}),/*#__PURE__*/_jsx(KnowledgeClaimsPanel,{claims:medicalDetail.claims||[],limit:5}),/*#__PURE__*/_jsx(MedicalTimeline,{events:medicalDetail.timeline||[]}),/*#__PURE__*/_jsx(LiteraturePanel,{knowledgeId:medicalDetail.id,resources:(_medicalDetail$litera=medicalDetail.literatureResources)!==null&&_medicalDetail$litera!==void 0?_medicalDetail$litera:[],onRefresh:refreshEvidenceDetail})]})]})]})]})})]});};export default LiabilityStep;","map":{"version":3,"names":["React","useState","useEffect","useCallback","calculateLiabilityScore","Scale","SmartAssistant","listKnowledgeDocuments","getKnowledgeDocument","QualityBadge","KnowledgeFlags","KnowledgeClaimsPanel","MedicalTimeline","MedicalQualityBox","LiteraturePanel","Loader2","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LiabilityStep","_ref","_medicalDetail$qualit","_medicalDetail$reason","_medicalDetail$litera","caseData","updateCaseData","localAnalysis","setLocalAnalysis","liability","assistantOpen","setAssistantOpen","evidenceOpen","setEvidenceOpen","evidenceInitialized","setEvidenceInitialized","medicalDocs","setMedicalDocs","selectedMedicalId","setSelectedMedicalId","medicalDetail","setMedicalDetail","medicalListLoading","setMedicalListLoading","medicalDetailLoading","setMedicalDetailLoading","medicalError","setMedicalError","result","aggravatingFactors","mitigatingFactors","medicalRecordQuality","expertCourtStance","prev","_objectSpread","probability","probabilityRange","range","uncertainty","cancelled","loadDocuments","docs","docType","limit","_docs$0$id","_docs$","id","error","console","loadDetail","doc","refreshEvidenceDetail","className","children","isOpen","onClose","contextQuery","onImportPrecedent","onImportRule","type","onClick","length","value","onChange","e","target","disabled","map","title","score","label","medicalQualityScore","findings","qualityFindings","reasoningFindings","flags","claims","events","timeline","knowledgeId","resources","literatureResources","onRefresh"],"sources":["C:/Office-Apps/LexMedical-App/src/components/LiabilityStep.tsx"],"sourcesContent":["import React, { useState, useEffect, Dispatch, SetStateAction, useCallback } from 'react';\nimport {\n  CaseData,\n  LiabilityAnalysis,\n  KnowledgeDocumentSummary,\n  KnowledgeDocumentDetail,\n} from '../types';\nimport { calculateLiabilityScore } from '../services/calculations';\nimport { Scale } from 'lucide-react';\nimport SmartAssistant from './SmartAssistant';\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\nimport QualityBadge from './QualityBadge';\nimport KnowledgeFlags from './KnowledgeFlags';\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\nimport MedicalTimeline from './MedicalTimeline';\nimport MedicalQualityBox from './MedicalQualityBox';\nimport LiteraturePanel from './LiteraturePanel';\nimport { Loader2 } from 'lucide-react';\n\ninterface Props {\n  caseData: CaseData;\n  updateCaseData: Dispatch<SetStateAction<CaseData | null>>;\n}\n\nconst LiabilityStep: React.FC<Props> = ({ caseData, updateCaseData }) => {\n  const [localAnalysis, setLocalAnalysis] = useState<LiabilityAnalysis>(caseData.liability);\n  const [assistantOpen, setAssistantOpen] = useState(false);\n  const [evidenceOpen, setEvidenceOpen] = useState(false);\n  const [evidenceInitialized, setEvidenceInitialized] = useState(false);\n  const [medicalDocs, setMedicalDocs] = useState<KnowledgeDocumentSummary[]>([]);\n  const [selectedMedicalId, setSelectedMedicalId] = useState<string>('');\n  const [medicalDetail, setMedicalDetail] = useState<KnowledgeDocumentDetail | null>(null);\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\n  const [medicalError, setMedicalError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const result = calculateLiabilityScore(\n      50,\n      localAnalysis.aggravatingFactors,\n      localAnalysis.mitigatingFactors,\n      localAnalysis.medicalRecordQuality,\n      localAnalysis.expertCourtStance\n    );\n    setLocalAnalysis((prev: LiabilityAnalysis) => ({\n      ...prev,\n      probability: result.probability,\n      probabilityRange: result.range,\n      uncertainty: result.uncertainty,\n    }));\n  }, [localAnalysis.aggravatingFactors, localAnalysis.mitigatingFactors, localAnalysis.medicalRecordQuality, localAnalysis.expertCourtStance]);\n\n  useEffect(() => {\n    if (caseData.liability === localAnalysis) return;\n    setLocalAnalysis(caseData.liability);\n  }, [caseData.liability, localAnalysis]);\n\n  useEffect(() => {\n    updateCaseData((prev) => {\n      if (!prev) return prev;\n      if (prev.liability === localAnalysis) return prev;\n      return { ...prev, liability: localAnalysis };\n    });\n  }, [localAnalysis, updateCaseData]);\n\n  useEffect(() => {\n    if (!evidenceOpen || evidenceInitialized) return;\n    let cancelled = false;\n    const loadDocuments = async () => {\n      setMedicalListLoading(true);\n      setMedicalError(null);\n      try {\n        const docs = await listKnowledgeDocuments({ docType: 'chapter', limit: 10 });\n        if (!cancelled) {\n          setMedicalDocs(docs);\n          setSelectedMedicalId(docs[0]?.id ?? '');\n          setEvidenceInitialized(true);\n        }\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setMedicalError('טעינת ניתוחים רפואיים נכשלה.');\n        }\n      } finally {\n        if (!cancelled) {\n          setMedicalListLoading(false);\n        }\n      }\n    };\n    loadDocuments();\n    return () => {\n      cancelled = true;\n    };\n  }, [evidenceOpen, evidenceInitialized]);\n\n  useEffect(() => {\n    if (!evidenceOpen || !selectedMedicalId) {\n      setMedicalDetail(null);\n      return;\n    }\n    let cancelled = false;\n    setMedicalDetailLoading(true);\n    setMedicalError(null);\n    const loadDetail = async () => {\n      try {\n        const doc = await getKnowledgeDocument(selectedMedicalId);\n        if (!cancelled) {\n          setMedicalDetail(doc);\n        }\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setMedicalError('טעינת המסמך הרפואי נכשלה.');\n          setMedicalDetail(null);\n        }\n      } finally {\n        if (!cancelled) {\n          setMedicalDetailLoading(false);\n        }\n      }\n    };\n    loadDetail();\n    return () => {\n      cancelled = true;\n    };\n  }, [evidenceOpen, selectedMedicalId]);\n\n  const refreshEvidenceDetail = useCallback(async () => {\n    if (!selectedMedicalId) return;\n    try {\n      const doc = await getKnowledgeDocument(selectedMedicalId);\n      setMedicalDetail(doc);\n    } catch (error) {\n      console.error(error);\n      setMedicalError('טעינת המסמך הרפואי נכשלה.');\n    }\n  }, [selectedMedicalId]);\n\n  return (\n    <div className=\"flex relative\">\n      <SmartAssistant\n        isOpen={assistantOpen}\n        onClose={() => setAssistantOpen(false)}\n        contextQuery=\"\"\n        onImportPrecedent={() => {}}\n        onImportRule={() => {}}\n      />\n      <div className=\"flex-1 space-y-8 pb-12\">\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border border-slate-200\">\n          <h2 className=\"text-xl font-bold text-slate-800 flex items-center gap-2\">\n            <Scale className=\"w-5 h-5\" /> ניתוח חבות\n          </h2>\n          <div className=\"my-4 p-4 bg-slate-100 rounded text-center\">\n            <div className=\"text-4xl font-bold\">{localAnalysis.probability}%</div>\n            <div className=\"text-sm text-slate-500\">סיכוי לתביעה</div>\n          </div>\n          <div className=\"mt-6 border-t border-slate-200 pt-4\">\n            <button\n              type=\"button\"\n              className=\"flex w-full items-center justify-between rounded border border-slate-300 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-700\"\n              onClick={() => setEvidenceOpen((prev) => !prev)}\n            >\n              <span>Medical Evidence</span>\n              <span>{evidenceOpen ? 'הסתר' : 'הצג'}</span>\n            </button>\n            {evidenceOpen && (\n              <div className=\"mt-4 space-y-4\">\n                {medicalError && (\n                  <div className=\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\">{medicalError}</div>\n                )}\n                {medicalListLoading && (\n                  <div className=\"flex items-center gap-2 text-sm text-slate-500\">\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    טוען מסמכים רפואיים...\n                  </div>\n                )}\n                {!medicalListLoading && medicalDocs.length === 0 && (\n                  <div className=\"rounded border border-slate-200 bg-white p-3 text-sm text-slate-500\">\n                    אין מסמכים רפואיים זמינים להצגה.\n                  </div>\n                )}\n                {medicalDocs.length > 0 && (\n                  <div>\n                    <label className=\"text-xs font-semibold text-slate-500\">בחר מסמך</label>\n                    <select\n                      className=\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\"\n                      value={selectedMedicalId}\n                      onChange={(e) => setSelectedMedicalId(e.target.value)}\n                      disabled={medicalListLoading}\n                    >\n                      {medicalDocs.map((doc) => (\n                        <option key={doc.id} value={doc.id}>\n                          {doc.title}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                )}\n                {medicalDetailLoading && (\n                  <div className=\"flex items-center gap-2 text-sm text-slate-500\">\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    טוען ניתוח רפואי...\n                  </div>\n                )}\n                {medicalDetail && (\n                  <>\n                    <QualityBadge score={medicalDetail.score} label=\"מדד איכות רפואית\" />\n                    <MedicalQualityBox\n                      score={medicalDetail.medicalQualityScore}\n                      findings={medicalDetail.qualityFindings ?? []}\n                      reasoningFindings={medicalDetail.reasoningFindings ?? []}\n                    />\n                    <KnowledgeFlags flags={medicalDetail.flags || []} />\n                    <KnowledgeClaimsPanel claims={medicalDetail.claims || []} limit={5} />\n                    <MedicalTimeline events={medicalDetail.timeline || []} />\n                    <LiteraturePanel\n                      knowledgeId={medicalDetail.id}\n                      resources={medicalDetail.literatureResources ?? []}\n                      onRefresh={refreshEvidenceDetail}\n                    />\n                  </>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default LiabilityStep;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}