{"ast":null,"code":"import React,{useMemo,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getStatus=value=>{if(value===undefined||value===null){return{label:'לא זמין',color:'text-slate-500'};}if(value>=75)return{label:'גבוהה',color:'text-emerald-600'};if(value>=55)return{label:'בינונית',color:'text-amber-600'};return{label:'נמוכה',color:'text-rose-600'};};const severityLabel={critical:'קריטי',warning:'אזהרה',info:'מידע'};const severityStyle={critical:'text-rose-700',warning:'text-amber-700',info:'text-slate-600'};const MedicalQualityBox=_ref=>{let{score,findings=[],reasoningFindings=[]}=_ref;const status=getStatus(score);const[reasoningFilter,setReasoningFilter]=useState('all');const filteredReasoning=useMemo(()=>reasoningFilter==='critical'?reasoningFindings.filter(finding=>finding.severity==='critical'):reasoningFindings,[reasoningFilter,reasoningFindings]);return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded border border-slate-200 bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4 py-3 border-b border-slate-100\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-bold text-slate-700\",children:\"\\u05D0\\u05D9\\u05DB\\u05D5\\u05EA \\u05D7\\u05D5\\u05D5\\u05EA \\u05D4\\u05D3\\u05E2\\u05EA \\u05D4\\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-500\",children:\"\\u05DE\\u05D3\\u05D3 \\u05D0\\u05D9\\u05E0\\u05D3\\u05D9\\u05E7\\u05D8\\u05D9\\u05D1\\u05D9 \\u05D4\\u05DE\\u05D1\\u05D5\\u05E1\\u05E1 \\u05E2\\u05DC \\u05D8\\u05E2\\u05E0\\u05D5\\u05EA \\u05E7\\u05D9\\u05D9\\u05DE\\u05D5\\u05EA \\u05D1\\u05DC\\u05D1\\u05D3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold \".concat(status.color),children:status.label}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-slate-800\",children:score!==undefined?score:'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] uppercase text-slate-400 tracking-wide\",children:\"/100\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-3 text-sm text-slate-700\",children:[findings.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-slate-100 bg-slate-50 px-3 py-2 text-slate-500\",children:\"\\u05DC\\u05D0 \\u05D0\\u05D5\\u05EA\\u05E8\\u05D5 \\u05DC\\u05D9\\u05E7\\u05D5\\u05D9\\u05D9\\u05DD \\u05DE\\u05E9\\u05DE\\u05E2\\u05D5\\u05EA\\u05D9\\u05D9\\u05DD \\u05D1\\u05D7\\u05D5\\u05D5\\u05EA \\u05D4\\u05D3\\u05E2\\u05EA.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:findings.map(finding=>{var _severityLabel$findin;return/*#__PURE__*/_jsxs(\"li\",{className:\"rounded border border-slate-100 bg-slate-50 px-3 py-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold \".concat(severityStyle[finding.severity]),children:(_severityLabel$findin=severityLabel[finding.severity])!==null&&_severityLabel$findin!==void 0?_severityLabel$findin:finding.severity}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[11px] text-slate-400\",children:finding.code})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-slate-700\",children:finding.message})]},\"\".concat(finding.code,\"-\").concat(finding.message));})}),reasoningFindings.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs font-bold text-slate-600 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u05D1\\u05D3\\u05D9\\u05E7\\u05D5\\u05EA \\u05E2\\u05E7\\u05D1\\u05D9\\u05D5\\u05EA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-[11px] font-normal\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"rounded px-2 py-0.5 \".concat(reasoningFilter==='all'?'bg-slate-200 text-slate-700':'text-slate-500 hover:text-slate-800'),onClick:()=>setReasoningFilter('all'),children:\"\\u05D4\\u05DB\\u05DC\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"rounded px-2 py-0.5 \".concat(reasoningFilter==='critical'?'bg-slate-200 text-slate-700':'text-slate-500 hover:text-slate-800'),onClick:()=>setReasoningFilter('critical'),children:\"Critical\"})]})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2\",children:[filteredReasoning.length===0&&/*#__PURE__*/_jsx(\"li\",{className:\"rounded border border-slate-100 bg-slate-50 px-3 py-2 text-slate-500 text-xs\",children:\"\\u05DC\\u05D0 \\u05E0\\u05DE\\u05E6\\u05D0\\u05D5 \\u05DE\\u05DE\\u05E6\\u05D0\\u05D9\\u05DD\"}),filteredReasoning.map(finding=>{var _severityLabel$findin2;return/*#__PURE__*/_jsxs(\"li\",{className:\"rounded border border-slate-100 bg-slate-50 px-3 py-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold \".concat(severityStyle[finding.severity]),children:(_severityLabel$findin2=severityLabel[finding.severity])!==null&&_severityLabel$findin2!==void 0?_severityLabel$findin2:finding.severity}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[11px] text-slate-400\",children:finding.code})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-slate-700\",children:finding.message})]},\"reason-\".concat(finding.code,\"-\").concat(finding.message));})]})]})]})]});};export default MedicalQualityBox;","map":{"version":3,"names":["React","useMemo","useState","jsx","_jsx","jsxs","_jsxs","getStatus","value","undefined","label","color","severityLabel","critical","warning","info","severityStyle","MedicalQualityBox","_ref","score","findings","reasoningFindings","status","reasoningFilter","setReasoningFilter","filteredReasoning","filter","finding","severity","className","children","concat","length","map","_severityLabel$findin","code","message","type","onClick","_severityLabel$findin2"],"sources":["C:/Office-Apps/LexMedical-App/src/components/MedicalQualityBox.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport { MedicalQualityFinding } from '../types';\r\n\r\ninterface Props {\r\n  score?: number;\r\n  findings?: MedicalQualityFinding[];\r\n  reasoningFindings?: MedicalQualityFinding[];\r\n}\r\n\r\nconst getStatus = (value?: number) => {\r\n  if (value === undefined || value === null) {\r\n    return { label: 'לא זמין', color: 'text-slate-500' };\r\n  }\r\n  if (value >= 75) return { label: 'גבוהה', color: 'text-emerald-600' };\r\n  if (value >= 55) return { label: 'בינונית', color: 'text-amber-600' };\r\n  return { label: 'נמוכה', color: 'text-rose-600' };\r\n};\r\n\r\nconst severityLabel = {\r\n  critical: 'קריטי',\r\n  warning: 'אזהרה',\r\n  info: 'מידע',\r\n} as const;\r\n\r\nconst severityStyle = {\r\n  critical: 'text-rose-700',\r\n  warning: 'text-amber-700',\r\n  info: 'text-slate-600',\r\n} as const;\r\n\r\nconst MedicalQualityBox: React.FC<Props> = ({ score, findings = [], reasoningFindings = [] }) => {\r\n  const status = getStatus(score);\r\n  const [reasoningFilter, setReasoningFilter] = useState<'all' | 'critical'>('all');\r\n  const filteredReasoning = useMemo(\r\n    () =>\r\n      reasoningFilter === 'critical'\r\n        ? reasoningFindings.filter((finding) => finding.severity === 'critical')\r\n        : reasoningFindings,\r\n    [reasoningFilter, reasoningFindings],\r\n  );\r\n\r\n  return (\r\n    <div className=\"rounded border border-slate-200 bg-white\">\r\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-slate-100\">\r\n        <div>\r\n          <div className=\"text-sm font-bold text-slate-700\">איכות חוות הדעת הרפואית</div>\r\n          <div className=\"text-xs text-slate-500\">מדד אינדיקטיבי המבוסס על טענות קיימות בלבד</div>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <div className={`text-sm font-semibold ${status.color}`}>{status.label}</div>\r\n          <div className=\"text-2xl font-bold text-slate-800\">{score !== undefined ? score : '—'}</div>\r\n          <div className=\"text-[10px] uppercase text-slate-400 tracking-wide\">/100</div>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 space-y-3 text-sm text-slate-700\">\r\n        {findings.length === 0 ? (\r\n          <div className=\"rounded border border-slate-100 bg-slate-50 px-3 py-2 text-slate-500\">\r\n            לא אותרו ליקויים משמעותיים בחוות הדעת.\r\n          </div>\r\n        ) : (\r\n          <ul className=\"space-y-2\">\r\n            {findings.map((finding) => (\r\n              <li key={`${finding.code}-${finding.message}`} className=\"rounded border border-slate-100 bg-slate-50 px-3 py-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className={`text-xs font-semibold ${severityStyle[finding.severity]}`}>\r\n                    {severityLabel[finding.severity] ?? finding.severity}\r\n                  </span>\r\n                  <span className=\"text-[11px] text-slate-400\">{finding.code}</span>\r\n                </div>\r\n                <p className=\"mt-1 text-slate-700\">{finding.message}</p>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n\r\n        {reasoningFindings.length > 0 && (\r\n          <div>\r\n            <div className=\"flex items-center justify-between text-xs font-bold text-slate-600 mb-2\">\r\n              <span>בדיקות עקביות רפואית</span>\r\n              <div className=\"flex items-center gap-2 text-[11px] font-normal\">\r\n                <button\r\n                  type=\"button\"\r\n                  className={`rounded px-2 py-0.5 ${\r\n                    reasoningFilter === 'all' ? 'bg-slate-200 text-slate-700' : 'text-slate-500 hover:text-slate-800'\r\n                  }`}\r\n                  onClick={() => setReasoningFilter('all')}\r\n                >\r\n                  הכל\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className={`rounded px-2 py-0.5 ${\r\n                    reasoningFilter === 'critical' ? 'bg-slate-200 text-slate-700' : 'text-slate-500 hover:text-slate-800'\r\n                  }`}\r\n                  onClick={() => setReasoningFilter('critical')}\r\n                >\r\n                  Critical\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <ul className=\"space-y-2\">\r\n              {filteredReasoning.length === 0 && (\r\n                <li className=\"rounded border border-slate-100 bg-slate-50 px-3 py-2 text-slate-500 text-xs\">לא נמצאו ממצאים</li>\r\n              )}\r\n              {filteredReasoning.map((finding) => (\r\n                <li key={`reason-${finding.code}-${finding.message}`} className=\"rounded border border-slate-100 bg-slate-50 px-3 py-2\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className={`text-xs font-semibold ${severityStyle[finding.severity]}`}>\r\n                      {severityLabel[finding.severity] ?? finding.severity}\r\n                    </span>\r\n                    <span className=\"text-[11px] text-slate-400\">{finding.code}</span>\r\n                  </div>\r\n                  <p className=\"mt-1 text-slate-700\">{finding.message}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedicalQualityBox;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}