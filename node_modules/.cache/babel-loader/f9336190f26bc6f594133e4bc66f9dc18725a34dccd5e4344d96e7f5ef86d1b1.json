{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from'react';import{Search,UploadCloud,FileText,AlertTriangle}from'lucide-react';import{createCategory,listCategories,searchDocuments,updateDocumentTags,uploadDocument}from'../services/documentsApi';import LegalDisclaimer from'./LegalDisclaimer';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const badgeForCategory=_name=>'badge-muted';const formatDate=value=>{if(!value)return'—';const d=new Date(value);return Number.isNaN(d.getTime())?value:d.toLocaleDateString('he-IL');};const DocumentsLibrary=()=>{const{user}=useAuth();const[activeTab,setActiveTab]=useState('search');const[categories,setCategories]=useState([]);const[categoriesLoading,setCategoriesLoading]=useState(false);const[categoriesError,setCategoriesError]=useState(null);const[newCategoryName,setNewCategoryName]=useState('');const[creatingCategory,setCreatingCategory]=useState(false);// Search state\nconst[q,setQ]=useState('');const[categoryId,setCategoryId]=useState('');const[from,setFrom]=useState('');const[to,setTo]=useState('');const[searchLoading,setSearchLoading]=useState(false);const[searchError,setSearchError]=useState(null);const[results,setResults]=useState([]);// Upload state\nconst[uploadTitle,setUploadTitle]=useState('');const[uploadCategoryId,setUploadCategoryId]=useState('');const[uploadSummary,setUploadSummary]=useState('');const[uploadFile,setUploadFile]=useState(null);const[uploadLoading,setUploadLoading]=useState(false);const[uploadError,setUploadError]=useState(null);const[uploadSuccess,setUploadSuccess]=useState(null);const[editingId,setEditingId]=useState(null);const[topicsDraft,setTopicsDraft]=useState('');const[keywordsDraft,setKeywordsDraft]=useState('');const[tagsSaving,setTagsSaving]=useState(false);useEffect(()=>{let cancelled=false;const load=async()=>{setCategoriesLoading(true);setCategoriesError(null);try{const items=await listCategories();if(!cancelled){var _items$;setCategories(items);if(!uploadCategoryId&&(_items$=items[0])!==null&&_items$!==void 0&&_items$.id){setUploadCategoryId(items[0].id);}}}catch(err){var _err$message;if(!cancelled)setCategoriesError((_err$message=err===null||err===void 0?void 0:err.message)!==null&&_err$message!==void 0?_err$message:'categories_failed');}finally{if(!cancelled)setCategoriesLoading(false);}};load();return()=>{cancelled=true;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const canSearch=useMemo(()=>Boolean(q.trim()||categoryId||from||to),[q,categoryId,from,to]);const runSearch=async()=>{setSearchLoading(true);setSearchError(null);try{var _payload$documents;const payload=await searchDocuments({q:q.trim()||undefined,categoryId:categoryId||undefined,from:from?new Date(from).toISOString():undefined,to:to?new Date(to).toISOString():undefined,limit:50,offset:0});setResults((_payload$documents=payload.documents)!==null&&_payload$documents!==void 0?_payload$documents:[]);}catch(err){var _err$message2;setSearchError((_err$message2=err===null||err===void 0?void 0:err.message)!==null&&_err$message2!==void 0?_err$message2:'search_failed');}finally{setSearchLoading(false);}};const openEditTags=doc=>{var _doc$topics,_doc$keywords;setEditingId(doc.id);setTopicsDraft(((_doc$topics=doc.topics)!==null&&_doc$topics!==void 0?_doc$topics:[]).join(', '));setKeywordsDraft(((_doc$keywords=doc.keywords)!==null&&_doc$keywords!==void 0?_doc$keywords:[]).join(', '));};const closeEditTags=()=>{if(tagsSaving)return;setEditingId(null);setTopicsDraft('');setKeywordsDraft('');};const saveTags=async()=>{if(!editingId)return;setTagsSaving(true);try{const topics=topicsDraft.split(',').map(s=>s.trim()).filter(Boolean);const keywords=keywordsDraft.split(',').map(s=>s.trim()).filter(Boolean);const updated=await updateDocumentTags(editingId,{topics,keywords});setResults(prev=>prev.map(d=>d.id===updated.id?_objectSpread(_objectSpread({},d),updated):d));closeEditTags();}catch(err){var _err$message3;setSearchError((_err$message3=err===null||err===void 0?void 0:err.message)!==null&&_err$message3!==void 0?_err$message3:'update_tags_failed');}finally{setTagsSaving(false);}};const submitUpload=async()=>{if(!uploadTitle.trim()||!uploadFile){setUploadError('חובה למלא שם מסמך ולבחור קובץ.');return;}setUploadLoading(true);setUploadError(null);setUploadSuccess(null);try{const doc=await uploadDocument({title:uploadTitle.trim(),categoryId:uploadCategoryId||undefined,summary:uploadSummary.trim()||undefined,file:uploadFile});setUploadSuccess(\"\\u05D4\\u05DE\\u05E1\\u05DE\\u05DA \\\"\".concat(doc.title,\"\\\" \\u05E0\\u05E9\\u05DE\\u05E8 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4.\"));setUploadTitle('');setUploadSummary('');setUploadFile(null);// Optional: refresh search results\nif(activeTab==='search'){await runSearch();}}catch(err){var _err$message4;setUploadError((_err$message4=err===null||err===void 0?void 0:err.message)!==null&&_err$message4!==void 0?_err$message4:'upload_failed');}finally{setUploadLoading(false);}};const handleCreateCategory=async()=>{if(!newCategoryName.trim())return;setCreatingCategory(true);try{const created=await createCategory(newCategoryName.trim());const next=[...categories.filter(c=>c.id!==created.id),created].sort((a,b)=>a.name.localeCompare(b.name));setCategories(next);setNewCategoryName('');if(!uploadCategoryId)setUploadCategoryId(created.id);}catch(err){var _err$message5;setCategoriesError((_err$message5=err===null||err===void 0?void 0:err.message)!==null&&_err$message5!==void 0?_err$message5:'create_category_failed');}finally{setCreatingCategory(false);}};const searchView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold\",children:\"\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9 \\u05D7\\u05D5\\u05E4\\u05E9\\u05D9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light\",children:\"\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9 \\u05DC\\u05E4\\u05D9 \\u05EA\\u05DE\\u05E6\\u05D9\\u05EA, \\u05E0\\u05D5\\u05E9\\u05D0\\u05D9\\u05DD, \\u05DE\\u05D9\\u05DC\\u05D5\\u05EA \\u05DE\\u05E4\\u05EA\\u05D7 \\u05D5\\u05EA\\u05D5\\u05DB\\u05DF \\u05E9\\u05D7\\u05D5\\u05DC\\u05E5\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4 md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05D8\\u05E7\\u05E1\\u05D8 \\u05D7\\u05D5\\u05E4\\u05E9\\u05D9\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:q,onChange:e=>setQ(e.target.value),placeholder:\"\\u05DC\\u05D3\\u05D5\\u05D2\\u05DE\\u05D4: \\u05D4\\u05D5\\u05DC\\u05D3\\u05D4 \\u05D1\\u05E2\\u05D5\\u05D5\\u05DC\\u05D4 / \\u05DC\\u05D7\\u05E5 \\u05D3\\u05DD / \\u05EA\\u05D9\\u05E7\\u05D5\\u05DF \\u05DB\\u05EA\\u05D1 \\u05EA\\u05D1\\u05D9\\u05E2\\u05D4...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D4\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:categoryId,onChange:e=>setCategoryId(e.target.value),disabled:categoriesLoading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u05D4\\u05DB\\u05DC\"}),categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.id,children:cat.name},cat.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4 md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05DE\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:from,onChange:e=>setFrom(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05E2\\u05D3 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:to,onChange:e=>setTo(e.target.value)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary px-5\",onClick:runSearch,disabled:!canSearch||searchLoading,children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4\"}),searchLoading?'מחפש...':'חפש']})}),searchError&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block state-block--error text-sm\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05E9\\u05D2\\u05D9\\u05D0\\u05D4 \\u05D1\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:searchError})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-semibold\",children:[\"\\u05EA\\u05D5\\u05E6\\u05D0\\u05D5\\u05EA (\",results.length,\")\"]})}),results.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"state-block\",children:[/*#__PURE__*/_jsx(FileText,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05D5\\u05E6\\u05D0\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:\"\\u05E0\\u05E1\\u05D4 \\u05DC\\u05E9\\u05E0\\u05D5\\u05EA \\u05DE\\u05D9\\u05DC\\u05D5\\u05EA \\u05D7\\u05D9\\u05E4\\u05D5\\u05E9 \\u05D0\\u05D5 \\u05DE\\u05E1\\u05E0\\u05E0\\u05D9\\u05DD.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:results.map(doc=>{var _doc$category,_doc$category$name,_doc$category2,_doc$topics2,_doc$keywords2;return/*#__PURE__*/_jsxs(\"article\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-base font-semibold\",children:doc.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-light\",children:[\"\\u05DE\\u05E7\\u05D5\\u05E8: \",doc.source==='EMAIL'?'מייל':'ידני',\" \\xB7 \\u05E0\\u05D5\\u05E6\\u05E8: \",formatDate(doc.createdAt),' ',doc.emailDate?\"\\xB7 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \\u05DE\\u05D9\\u05D9\\u05DC: \".concat(formatDate(doc.emailDate)):'']})]}),/*#__PURE__*/_jsx(\"span\",{className:badgeForCategory((_doc$category=doc.category)===null||_doc$category===void 0?void 0:_doc$category.name),children:(_doc$category$name=(_doc$category2=doc.category)===null||_doc$category2===void 0?void 0:_doc$category2.name)!==null&&_doc$category$name!==void 0?_doc$category$name:'ללא קטגוריה'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-2 text-sm text-navy\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate\",children:doc.summary||'ללא תמצית'}),((_doc$topics2=doc.topics)===null||_doc$topics2===void 0?void 0:_doc$topics2.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 text-[11px] text-slate-light\",children:doc.topics.map(t=>/*#__PURE__*/_jsx(\"span\",{className:\"rounded-full bg-pearl px-2 py-0.5\",children:t},\"\".concat(doc.id,\"-topic-\").concat(t)))}),((_doc$keywords2=doc.keywords)===null||_doc$keywords2===void 0?void 0:_doc$keywords2.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 text-[11px] text-slate-light\",children:doc.keywords.slice(0,10).map(k=>/*#__PURE__*/_jsx(\"span\",{className:\"rounded-full bg-pearl px-2 py-0.5\",children:k},\"\".concat(doc.id,\"-kw-\").concat(k)))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 text-xs\",children:[doc.attachmentUrl&&/*#__PURE__*/_jsx(\"a\",{className:\"btn-outline text-[11px] px-4 py-1.5\",href:doc.attachmentUrl,target:\"_blank\",rel:\"noreferrer\",children:\"\\u05E4\\u05EA\\u05D7 \\u05E7\\u05D5\\u05D1\\u05E5\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-outline text-[11px] px-4 py-1.5\",onClick:()=>openEditTags(doc),children:\"\\u05E2\\u05E8\\u05D5\\u05DA \\u05EA\\u05D2\\u05D9\\u05D5\\u05EA\"})]})]})]},doc.id);})})]}),/*#__PURE__*/_jsx(LegalDisclaimer,{})]});const uploadView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-head\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold\",children:\"\\u05D4\\u05E2\\u05DC\\u05D0\\u05D4 \\u05D9\\u05D3\\u05E0\\u05D9\\u05EA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light\",children:\"PDF / DOCX \\u05E2\\u05DD \\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D4 \\u05D5\\u05EA\\u05DE\\u05E6\\u05D9\\u05EA (\\u05D0\\u05D5\\u05E4\\u05E6\\u05D9\\u05D5\\u05E0\\u05DC\\u05D9)\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4 md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05E9\\u05DD \\u05D4\\u05DE\\u05E1\\u05DE\\u05DA\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:uploadTitle,onChange:e=>setUploadTitle(e.target.value),placeholder:\"\\u05DC\\u05D3\\u05D5\\u05D2\\u05DE\\u05D4: \\u05E4\\u05DC\\u05D5\\u05E0\\u05D9 \\u05E0\\u05F3 \\u05D0\\u05DC\\u05DE\\u05D5\\u05E0\\u05D9 (\\u05DE\\u05D7\\u05D5\\u05D6\\u05D9 \\u05EA\\u05F4\\u05D0, 2022)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D4\"}),/*#__PURE__*/_jsx(\"select\",{className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:uploadCategoryId,onChange:e=>setUploadCategoryId(e.target.value),disabled:categoriesLoading,children:categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.id,children:cat.name},cat.id))})]})]}),categoriesError&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block state-block--error text-sm\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05E9\\u05D2\\u05D9\\u05D0\\u05D4 \\u05D1\\u05D8\\u05E2\\u05D9\\u05E0\\u05EA \\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:categoriesError})]}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-card border border-pearl bg-pearl/40 p-4 space-y-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05D4\\u05D5\\u05E1\\u05E3 \\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D4 \\u05D7\\u05D3\\u05E9\\u05D4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2 sm:flex-row sm:items-center\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"flex-1 rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:newCategoryName,onChange:e=>setNewCategoryName(e.target.value),placeholder:\"\\u05DC\\u05D3\\u05D5\\u05D2\\u05DE\\u05D4: \\\"\\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD\\\"\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-outline text-sm px-4 py-2\",onClick:handleCreateCategory,disabled:creatingCategory||!newCategoryName.trim(),children:creatingCategory?'שומר...':'צור'})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05EA\\u05DE\\u05E6\\u05D9\\u05EA (\\u05D0\\u05D5\\u05E4\\u05E6\\u05D9\\u05D5\\u05E0\\u05DC\\u05D9)\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"mt-1 w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\",rows:4,value:uploadSummary,onChange:e=>setUploadSummary(e.target.value),placeholder:\"\\u05D0\\u05DD \\u05E8\\u05D9\\u05E7 \\u2013 \\u05D4\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA \\u05EA\\u05E0\\u05E1\\u05D4 \\u05DC\\u05D7\\u05DC\\u05E5 \\u05EA\\u05DE\\u05E6\\u05D9\\u05EA \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9\\u05EA \\u05DE\\u05D4\\u05E7\\u05D5\\u05D1\\u05E5.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"\\u05E7\\u05D5\\u05D1\\u05E5 \\u05DE\\u05E6\\u05D5\\u05E8\\u05E3\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",type:\"file\",accept:\".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\",onChange:e=>{var _e$target$files$,_e$target$files;return setUploadFile((_e$target$files$=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0])!==null&&_e$target$files$!==void 0?_e$target$files$:null);}}),uploadFile&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-[11px] text-slate-light\",children:[\"\\u05E0\\u05D1\\u05D7\\u05E8: \",uploadFile.name,\" (\",Math.round(uploadFile.size/1024),\"KB)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary px-5\",onClick:submitUpload,disabled:uploadLoading,children:[/*#__PURE__*/_jsx(UploadCloud,{className:\"w-4 h-4\"}),uploadLoading?'מעלה...':'שמור מסמך']})}),uploadError&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block state-block--error text-sm\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D4\\u05E2\\u05DC\\u05D0\\u05D4 \\u05E0\\u05DB\\u05E9\\u05DC\\u05D4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:uploadError})]}),uploadSuccess&&/*#__PURE__*/_jsxs(\"div\",{className:\"state-block text-sm\",children:[/*#__PURE__*/_jsx(UploadCloud,{className:\"state-block__icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title\",children:\"\\u05D4\\u05E2\\u05DC\\u05D0\\u05D4 \\u05D4\\u05D5\\u05E9\\u05DC\\u05DE\\u05D4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:uploadSuccess})]})]})]}),/*#__PURE__*/_jsx(LegalDisclaimer,{})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-card border border-pearl bg-white p-4 shadow-card-xl flex flex-wrap items-center justify-between gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-navy\",children:\"\\u05DE\\u05D0\\u05D2\\u05E8 \\u05D9\\u05D3\\u05E2 \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-light\",children:\"\\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D5\\u05EA \\u05D3\\u05D9\\u05E0\\u05DE\\u05D9\\u05D5\\u05EA \\xB7 \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD \\u05DE\\u05DE\\u05D9\\u05D9\\u05DC/\\u05D9\\u05D3\\u05E0\\u05D9 \\xB7 \\u05D7\\u05D9\\u05E4\\u05D5\\u05E9 \\u05D7\\u05D5\\u05E4\\u05E9\\u05D9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 \".concat(activeTab==='search'?'bg-navy text-gold':'bg-pearl border border-pearl text-slate'),onClick:()=>setActiveTab('search'),children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4\"}),\" \\u05D7\\u05D9\\u05E4\\u05D5\\u05E9\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 \".concat(activeTab==='upload'?'bg-navy text-gold':'bg-pearl border border-pearl text-slate'),onClick:()=>setActiveTab('upload'),children:[/*#__PURE__*/_jsx(UploadCloud,{className:\"w-4 h-4\"}),\" \\u05D4\\u05E2\\u05DC\\u05D0\\u05D4\"]})]})]}),activeTab==='search'?searchView:uploadView,editingId&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-shell max-w-lg w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-accent\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-head\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-base font-semibold\",children:\"\\u05E2\\u05E8\\u05D9\\u05DB\\u05EA \\u05EA\\u05D2\\u05D9\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeEditTags,className:\"text-xs text-slate-light hover:text-navy\",children:\"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-underline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body space-y-3 text-sm text-slate\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"Topics (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D9\\u05DD \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:topicsDraft,onChange:e=>setTopicsDraft(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-light\",children:\"Keywords (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D9\\u05DD \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\",value:keywordsDraft,onChange:e=>setKeywordsDraft(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-outline text-xs px-4 py-1.5\",onClick:closeEditTags,disabled:tagsSaving,children:\"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary text-xs px-4 py-1.5\",onClick:saveTags,disabled:tagsSaving,children:tagsSaving?'שומר...':'שמור'})]})]})]})})]});};export default DocumentsLibrary;","map":{"version":3,"names":["React","useEffect","useMemo","useState","Search","UploadCloud","FileText","AlertTriangle","createCategory","listCategories","searchDocuments","updateDocumentTags","uploadDocument","LegalDisclaimer","useAuth","jsx","_jsx","jsxs","_jsxs","badgeForCategory","_name","formatDate","value","d","Date","Number","isNaN","getTime","toLocaleDateString","DocumentsLibrary","user","activeTab","setActiveTab","categories","setCategories","categoriesLoading","setCategoriesLoading","categoriesError","setCategoriesError","newCategoryName","setNewCategoryName","creatingCategory","setCreatingCategory","q","setQ","categoryId","setCategoryId","from","setFrom","to","setTo","searchLoading","setSearchLoading","searchError","setSearchError","results","setResults","uploadTitle","setUploadTitle","uploadCategoryId","setUploadCategoryId","uploadSummary","setUploadSummary","uploadFile","setUploadFile","uploadLoading","setUploadLoading","uploadError","setUploadError","uploadSuccess","setUploadSuccess","editingId","setEditingId","topicsDraft","setTopicsDraft","keywordsDraft","setKeywordsDraft","tagsSaving","setTagsSaving","cancelled","load","items","_items$","id","err","_err$message","message","canSearch","Boolean","trim","runSearch","_payload$documents","payload","undefined","toISOString","limit","offset","documents","_err$message2","openEditTags","doc","_doc$topics","_doc$keywords","topics","join","keywords","closeEditTags","saveTags","split","map","s","filter","updated","prev","_objectSpread","_err$message3","submitUpload","title","summary","file","concat","_err$message4","handleCreateCategory","created","next","c","sort","a","b","name","localeCompare","_err$message5","searchView","className","children","onChange","e","target","placeholder","disabled","cat","type","onClick","length","_doc$category","_doc$category$name","_doc$category2","_doc$topics2","_doc$keywords2","source","createdAt","emailDate","category","t","slice","k","attachmentUrl","href","rel","uploadView","role","rows","accept","_e$target$files$","_e$target$files","files","Math","round","size"],"sources":["C:/Office-Apps/LexMedical-App/src/components/DocumentsLibrary.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { Search, UploadCloud, FileText, AlertTriangle } from 'lucide-react';\r\nimport { CategoryRecord, DocumentRecord } from '../types';\r\nimport { createCategory, listCategories, searchDocuments, updateDocumentTags, uploadDocument } from '../services/documentsApi';\r\nimport LegalDisclaimer from './LegalDisclaimer';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst badgeForCategory = (_name?: string): string => 'badge-muted';\r\n\r\nconst formatDate = (value?: string | null): string => {\r\n  if (!value) return '—';\r\n  const d = new Date(value);\r\n  return Number.isNaN(d.getTime()) ? value : d.toLocaleDateString('he-IL');\r\n};\r\n\r\nconst DocumentsLibrary: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [activeTab, setActiveTab] = useState<'search' | 'upload'>('search');\r\n\r\n  const [categories, setCategories] = useState<CategoryRecord[]>([]);\r\n  const [categoriesLoading, setCategoriesLoading] = useState(false);\r\n  const [categoriesError, setCategoriesError] = useState<string | null>(null);\r\n  const [newCategoryName, setNewCategoryName] = useState('');\r\n  const [creatingCategory, setCreatingCategory] = useState(false);\r\n\r\n  // Search state\r\n  const [q, setQ] = useState('');\r\n  const [categoryId, setCategoryId] = useState<string>('');\r\n  const [from, setFrom] = useState('');\r\n  const [to, setTo] = useState('');\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n  const [searchError, setSearchError] = useState<string | null>(null);\r\n  const [results, setResults] = useState<DocumentRecord[]>([]);\r\n\r\n  // Upload state\r\n  const [uploadTitle, setUploadTitle] = useState('');\r\n  const [uploadCategoryId, setUploadCategoryId] = useState<string>('');\r\n  const [uploadSummary, setUploadSummary] = useState('');\r\n  const [uploadFile, setUploadFile] = useState<File | null>(null);\r\n  const [uploadLoading, setUploadLoading] = useState(false);\r\n  const [uploadError, setUploadError] = useState<string | null>(null);\r\n  const [uploadSuccess, setUploadSuccess] = useState<string | null>(null);\r\n\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [topicsDraft, setTopicsDraft] = useState('');\r\n  const [keywordsDraft, setKeywordsDraft] = useState('');\r\n  const [tagsSaving, setTagsSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const load = async () => {\r\n      setCategoriesLoading(true);\r\n      setCategoriesError(null);\r\n      try {\r\n        const items = await listCategories();\r\n        if (!cancelled) {\r\n          setCategories(items);\r\n          if (!uploadCategoryId && items[0]?.id) {\r\n            setUploadCategoryId(items[0].id);\r\n          }\r\n        }\r\n      } catch (err: any) {\r\n        if (!cancelled) setCategoriesError(err?.message ?? 'categories_failed');\r\n      } finally {\r\n        if (!cancelled) setCategoriesLoading(false);\r\n      }\r\n    };\r\n    load();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const canSearch = useMemo(() => Boolean(q.trim() || categoryId || from || to), [q, categoryId, from, to]);\r\n\r\n  const runSearch = async () => {\r\n    setSearchLoading(true);\r\n    setSearchError(null);\r\n    try {\r\n      const payload = await searchDocuments({\r\n        q: q.trim() || undefined,\r\n        categoryId: categoryId || undefined,\r\n        from: from ? new Date(from).toISOString() : undefined,\r\n        to: to ? new Date(to).toISOString() : undefined,\r\n        limit: 50,\r\n        offset: 0,\r\n      });\r\n      setResults(payload.documents ?? []);\r\n    } catch (err: any) {\r\n      setSearchError(err?.message ?? 'search_failed');\r\n    } finally {\r\n      setSearchLoading(false);\r\n    }\r\n  };\r\n\r\n  const openEditTags = (doc: DocumentRecord) => {\r\n    setEditingId(doc.id);\r\n    setTopicsDraft((doc.topics ?? []).join(', '));\r\n    setKeywordsDraft((doc.keywords ?? []).join(', '));\r\n  };\r\n\r\n  const closeEditTags = () => {\r\n    if (tagsSaving) return;\r\n    setEditingId(null);\r\n    setTopicsDraft('');\r\n    setKeywordsDraft('');\r\n  };\r\n\r\n  const saveTags = async () => {\r\n    if (!editingId) return;\r\n    setTagsSaving(true);\r\n    try {\r\n      const topics = topicsDraft\r\n        .split(',')\r\n        .map((s) => s.trim())\r\n        .filter(Boolean);\r\n      const keywords = keywordsDraft\r\n        .split(',')\r\n        .map((s) => s.trim())\r\n        .filter(Boolean);\r\n\r\n      const updated = await updateDocumentTags(editingId, { topics, keywords });\r\n      setResults((prev) => prev.map((d) => (d.id === updated.id ? { ...d, ...updated } : d)));\r\n      closeEditTags();\r\n    } catch (err: any) {\r\n      setSearchError(err?.message ?? 'update_tags_failed');\r\n    } finally {\r\n      setTagsSaving(false);\r\n    }\r\n  };\r\n\r\n  const submitUpload = async () => {\r\n    if (!uploadTitle.trim() || !uploadFile) {\r\n      setUploadError('חובה למלא שם מסמך ולבחור קובץ.');\r\n      return;\r\n    }\r\n    setUploadLoading(true);\r\n    setUploadError(null);\r\n    setUploadSuccess(null);\r\n    try {\r\n      const doc = await uploadDocument({\r\n        title: uploadTitle.trim(),\r\n        categoryId: uploadCategoryId || undefined,\r\n        summary: uploadSummary.trim() || undefined,\r\n        file: uploadFile,\r\n      });\r\n      setUploadSuccess(`המסמך \"${doc.title}\" נשמר בהצלחה.`);\r\n      setUploadTitle('');\r\n      setUploadSummary('');\r\n      setUploadFile(null);\r\n      // Optional: refresh search results\r\n      if (activeTab === 'search') {\r\n        await runSearch();\r\n      }\r\n    } catch (err: any) {\r\n      setUploadError(err?.message ?? 'upload_failed');\r\n    } finally {\r\n      setUploadLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateCategory = async () => {\r\n    if (!newCategoryName.trim()) return;\r\n    setCreatingCategory(true);\r\n    try {\r\n      const created = await createCategory(newCategoryName.trim());\r\n      const next = [...categories.filter((c) => c.id !== created.id), created].sort((a, b) =>\r\n        a.name.localeCompare(b.name),\r\n      );\r\n      setCategories(next);\r\n      setNewCategoryName('');\r\n      if (!uploadCategoryId) setUploadCategoryId(created.id);\r\n    } catch (err: any) {\r\n      setCategoriesError(err?.message ?? 'create_category_failed');\r\n    } finally {\r\n      setCreatingCategory(false);\r\n    }\r\n  };\r\n\r\n  const searchView = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"card-shell\">\r\n        <div className=\"card-accent\" />\r\n        <div className=\"card-head\">\r\n          <div>\r\n            <p className=\"text-sm font-semibold\">חיפוש חופשי</p>\r\n            <p className=\"text-xs text-slate-light\">חיפוש לפי תמצית, נושאים, מילות מפתח ותוכן שחולץ</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"card-underline\" />\r\n        <div className=\"card-body space-y-4\">\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div>\r\n              <label className=\"text-xs font-semibold text-slate-light\">טקסט חופשי</label>\r\n              <input\r\n                className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                value={q}\r\n                onChange={(e) => setQ(e.target.value)}\r\n                placeholder=\"לדוגמה: הולדה בעוולה / לחץ דם / תיקון כתב תביעה...\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"text-xs font-semibold text-slate-light\">קטגוריה</label>\r\n              <select\r\n                className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                value={categoryId}\r\n                onChange={(e) => setCategoryId(e.target.value)}\r\n                disabled={categoriesLoading}\r\n              >\r\n                <option value=\"\">הכל</option>\r\n                {categories.map((cat) => (\r\n                  <option key={cat.id} value={cat.id}>\r\n                    {cat.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div>\r\n              <label className=\"text-xs font-semibold text-slate-light\">מתאריך</label>\r\n              <input\r\n                type=\"date\"\r\n                className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                value={from}\r\n                onChange={(e) => setFrom(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"text-xs font-semibold text-slate-light\">עד תאריך</label>\r\n              <input\r\n                type=\"date\"\r\n                className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                value={to}\r\n                onChange={(e) => setTo(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex justify-end\">\r\n            <button\r\n              className=\"btn-primary px-5\"\r\n              onClick={runSearch}\r\n              disabled={!canSearch || searchLoading}\r\n            >\r\n              <Search className=\"w-4 h-4\" />\r\n              {searchLoading ? 'מחפש...' : 'חפש'}\r\n            </button>\r\n          </div>\r\n          {searchError && (\r\n            <div className=\"state-block state-block--error text-sm\">\r\n              <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\r\n              <p className=\"state-block__title\">שגיאה בחיפוש</p>\r\n              <p className=\"state-block__description\">{searchError}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <p className=\"text-sm font-semibold\">תוצאות ({results.length})</p>\r\n        </div>\r\n        {results.length === 0 ? (\r\n          <div className=\"state-block\">\r\n            <FileText className=\"state-block__icon\" aria-hidden=\"true\" />\r\n            <p className=\"state-block__title\">אין תוצאות</p>\r\n            <p className=\"state-block__description\">נסה לשנות מילות חיפוש או מסננים.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-4\">\r\n            {results.map((doc) => (\r\n              <article key={doc.id} className=\"card-shell\">\r\n                <div className=\"card-accent\" />\r\n                <div className=\"card-head\">\r\n                  <div className=\"space-y-1\">\r\n                    <p className=\"text-base font-semibold\">{doc.title}</p>\r\n                    <p className=\"text-xs text-slate-light\">\r\n                      מקור: {doc.source === 'EMAIL' ? 'מייל' : 'ידני'} · נוצר: {formatDate(doc.createdAt)}{' '}\r\n                      {doc.emailDate ? `· תאריך מייל: ${formatDate(doc.emailDate)}` : ''}\r\n                    </p>\r\n                  </div>\r\n                  <span className={badgeForCategory(doc.category?.name)}>\r\n                    {doc.category?.name ?? 'ללא קטגוריה'}\r\n                  </span>\r\n                </div>\r\n                <div className=\"card-underline\" />\r\n                <div className=\"card-body space-y-2 text-sm text-navy\">\r\n                  <p className=\"text-slate\">{doc.summary || 'ללא תמצית'}</p>\r\n                  {doc.topics?.length > 0 && (\r\n                    <div className=\"flex flex-wrap gap-1 text-[11px] text-slate-light\">\r\n                      {doc.topics.map((t) => (\r\n                        <span key={`${doc.id}-topic-${t}`} className=\"rounded-full bg-pearl px-2 py-0.5\">\r\n                          {t}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {doc.keywords?.length > 0 && (\r\n                    <div className=\"flex flex-wrap gap-1 text-[11px] text-slate-light\">\r\n                      {doc.keywords.slice(0, 10).map((k) => (\r\n                        <span key={`${doc.id}-kw-${k}`} className=\"rounded-full bg-pearl px-2 py-0.5\">\r\n                          {k}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  <div className=\"flex flex-wrap gap-2 text-xs\">\r\n                    {doc.attachmentUrl && (\r\n                      <a\r\n                        className=\"btn-outline text-[11px] px-4 py-1.5\"\r\n                        href={doc.attachmentUrl}\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                      >\r\n                        פתח קובץ\r\n                      </a>\r\n                    )}\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn-outline text-[11px] px-4 py-1.5\"\r\n                      onClick={() => openEditTags(doc)}\r\n                    >\r\n                      ערוך תגיות\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </article>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <LegalDisclaimer />\r\n    </div>\r\n  );\r\n\r\n  const uploadView = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"card-shell\">\r\n        <div className=\"card-accent\" />\r\n        <div className=\"card-head\">\r\n          <div>\r\n            <p className=\"text-sm font-semibold\">העלאה ידנית</p>\r\n            <p className=\"text-xs text-slate-light\">PDF / DOCX עם קטגוריה ותמצית (אופציונלי)</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"card-underline\" />\r\n        <div className=\"card-body space-y-4\">\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div>\r\n              <label className=\"text-xs font-semibold text-slate-light\">שם המסמך</label>\r\n              <input\r\n                className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                value={uploadTitle}\r\n                onChange={(e) => setUploadTitle(e.target.value)}\r\n                placeholder=\"לדוגמה: פלוני נ׳ אלמוני (מחוזי ת״א, 2022)\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"text-xs font-semibold text-slate-light\">קטגוריה</label>\r\n              <select\r\n                className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                value={uploadCategoryId}\r\n                onChange={(e) => setUploadCategoryId(e.target.value)}\r\n                disabled={categoriesLoading}\r\n              >\r\n                {categories.map((cat) => (\r\n                  <option key={cat.id} value={cat.id}>\r\n                    {cat.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          {categoriesError && (\r\n            <div className=\"state-block state-block--error text-sm\">\r\n              <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\r\n              <p className=\"state-block__title\">שגיאה בטעינת קטגוריות</p>\r\n              <p className=\"state-block__description\">{categoriesError}</p>\r\n            </div>\r\n          )}\r\n          {user?.role === 'admin' && (\r\n            <div className=\"rounded-card border border-pearl bg-pearl/40 p-4 space-y-2\">\r\n              <p className=\"text-xs font-semibold text-slate-light\">הוסף קטגוריה חדשה</p>\r\n              <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center\">\r\n                <input\r\n                  className=\"flex-1 rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                  value={newCategoryName}\r\n                  onChange={(e) => setNewCategoryName(e.target.value)}\r\n                  placeholder='לדוגמה: \"תקדימים\"'\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn-outline text-sm px-4 py-2\"\r\n                  onClick={handleCreateCategory}\r\n                  disabled={creatingCategory || !newCategoryName.trim()}\r\n                >\r\n                  {creatingCategory ? 'שומר...' : 'צור'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div>\r\n            <label className=\"text-xs font-semibold text-slate-light\">תמצית (אופציונלי)</label>\r\n            <textarea\r\n              className=\"mt-1 w-full rounded-card border border-pearl bg-white p-3 text-sm focus:border-gold\"\r\n              rows={4}\r\n              value={uploadSummary}\r\n              onChange={(e) => setUploadSummary(e.target.value)}\r\n              placeholder=\"אם ריק – המערכת תנסה לחלץ תמצית אוטומטית מהקובץ.\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-xs font-semibold text-slate-light\">קובץ מצורף</label>\r\n            <input\r\n              className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n              type=\"file\"\r\n              accept=\".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n              onChange={(e) => setUploadFile(e.target.files?.[0] ?? null)}\r\n            />\r\n            {uploadFile && (\r\n              <p className=\"mt-1 text-[11px] text-slate-light\">\r\n                נבחר: {uploadFile.name} ({Math.round(uploadFile.size / 1024)}KB)\r\n              </p>\r\n            )}\r\n          </div>\r\n          <div className=\"flex justify-end\">\r\n            <button className=\"btn-primary px-5\" onClick={submitUpload} disabled={uploadLoading}>\r\n              <UploadCloud className=\"w-4 h-4\" />\r\n              {uploadLoading ? 'מעלה...' : 'שמור מסמך'}\r\n            </button>\r\n          </div>\r\n          {uploadError && (\r\n            <div className=\"state-block state-block--error text-sm\">\r\n              <AlertTriangle className=\"state-block__icon\" aria-hidden=\"true\" />\r\n              <p className=\"state-block__title\">העלאה נכשלה</p>\r\n              <p className=\"state-block__description\">{uploadError}</p>\r\n            </div>\r\n          )}\r\n          {uploadSuccess && (\r\n            <div className=\"state-block text-sm\">\r\n              <UploadCloud className=\"state-block__icon\" aria-hidden=\"true\" />\r\n              <p className=\"state-block__title\">העלאה הושלמה</p>\r\n              <p className=\"state-block__description\">{uploadSuccess}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <LegalDisclaimer />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"rounded-card border border-pearl bg-white p-4 shadow-card-xl flex flex-wrap items-center justify-between gap-3\">\r\n        <div>\r\n          <p className=\"text-lg font-semibold text-navy\">מאגר ידע פנימי</p>\r\n          <p className=\"text-xs text-slate-light\">קטגוריות דינמיות · מסמכים ממייל/ידני · חיפוש חופשי</p>\r\n        </div>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <button\r\n            className={`rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 ${\r\n              activeTab === 'search' ? 'bg-navy text-gold' : 'bg-pearl border border-pearl text-slate'\r\n            }`}\r\n            onClick={() => setActiveTab('search')}\r\n          >\r\n            <Search className=\"w-4 h-4\" /> חיפוש\r\n          </button>\r\n          <button\r\n            className={`rounded-full px-4 py-2 text-sm font-semibold flex items-center gap-2 ${\r\n              activeTab === 'upload' ? 'bg-navy text-gold' : 'bg-pearl border border-pearl text-slate'\r\n            }`}\r\n            onClick={() => setActiveTab('upload')}\r\n          >\r\n            <UploadCloud className=\"w-4 h-4\" /> העלאה\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {activeTab === 'search' ? searchView : uploadView}\r\n\r\n      {editingId && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4\" role=\"dialog\" aria-modal=\"true\">\r\n          <div className=\"card-shell max-w-lg w-full\">\r\n            <div className=\"card-accent\" />\r\n            <div className=\"card-head\">\r\n              <h4 className=\"text-base font-semibold\">עריכת תגיות</h4>\r\n              <button type=\"button\" onClick={closeEditTags} className=\"text-xs text-slate-light hover:text-navy\">\r\n                ביטול\r\n              </button>\r\n            </div>\r\n            <div className=\"card-underline\" />\r\n            <div className=\"card-body space-y-3 text-sm text-slate\">\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-slate-light\">Topics (מופרדים בפסיק)</label>\r\n                <input\r\n                  className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                  value={topicsDraft}\r\n                  onChange={(e) => setTopicsDraft(e.target.value)}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-slate-light\">Keywords (מופרדים בפסיק)</label>\r\n                <input\r\n                  className=\"mt-1 w-full rounded-card border border-pearl bg-white p-2 text-sm focus:border-gold\"\r\n                  value={keywordsDraft}\r\n                  onChange={(e) => setKeywordsDraft(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"flex justify-end gap-2 pt-2\">\r\n                <button type=\"button\" className=\"btn-outline text-xs px-4 py-1.5\" onClick={closeEditTags} disabled={tagsSaving}>\r\n                  ביטול\r\n                </button>\r\n                <button type=\"button\" className=\"btn-primary text-xs px-4 py-1.5\" onClick={saveTags} disabled={tagsSaving}>\r\n                  {tagsSaving ? 'שומר...' : 'שמור'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentsLibrary;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}