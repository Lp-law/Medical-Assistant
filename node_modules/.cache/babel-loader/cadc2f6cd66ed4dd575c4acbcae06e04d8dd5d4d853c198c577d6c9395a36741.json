{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{saveBookChapter,saveGlobalPrecedent,getKnowledgeBase}from'../services/knowledgeBase';import{uploadChapterPdf,isApiConfigured}from'../services/api';import{listKnowledgeDocuments,getKnowledgeDocument}from'../services/knowledgeApi';import{Book,Gavel,LogOut,Save,Layout,UploadCloud,Loader2,Activity}from'lucide-react';import QualityBadge from'./QualityBadge';import KnowledgeClaimsPanel from'./KnowledgeClaimsPanel';import KnowledgeFlags from'./KnowledgeFlags';import MedicalTimeline from'./MedicalTimeline';import MedicalQualityBox from'./MedicalQualityBox';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=_ref=>{var _medicalDetail$qualit;let{currentUserName,onEditCase:_onEditCase,onLogout}=_ref;const[activeTab,setActiveTab]=useState('knowledge');const[brain,setBrain]=useState(getKnowledgeBase());const[newChapter,setNewChapter]=useState({title:'',content:'',tags:[],rules:[]});const[newPrecedent,setNewPrecedent]=useState({caseName:'',keyTakeaway:'',tags:[]});const[importing,setImporting]=useState(false);const[importMessage,setImportMessage]=useState('');const[importInsights,setImportInsights]=useState([]);const[dragActive,setDragActive]=useState(false);const fileInputRef=useRef(null);const[medicalDocs,setMedicalDocs]=useState([]);const[selectedMedicalId,setSelectedMedicalId]=useState('');const[medicalDetail,setMedicalDetail]=useState(null);const[medicalInitialized,setMedicalInitialized]=useState(false);const[medicalListLoading,setMedicalListLoading]=useState(false);const[medicalDetailLoading,setMedicalDetailLoading]=useState(false);const[medicalError,setMedicalError]=useState(null);const handleSaveChapter=()=>{if(!newChapter.title||!newChapter.content){alert('חובה למלא כותרת ותוכן');return;}const chapter={id:Date.now().toString(),title:newChapter.title,content:newChapter.content,tags:newChapter.tags||[],rules:newChapter.rules||[]};saveBookChapter(chapter);setBrain(getKnowledgeBase());setNewChapter({title:'',content:'',tags:[],rules:[]});};const handleSavePrecedent=()=>{if(!newPrecedent.caseName||!newPrecedent.keyTakeaway){alert('חובה למלא שם ותובנה');return;}const precedent={id:Date.now().toString(),caseName:newPrecedent.caseName,keyTakeaway:newPrecedent.keyTakeaway,citation:newPrecedent.citation||'',tags:newPrecedent.tags||[],relevantIssues:[]};saveGlobalPrecedent(precedent);setBrain(getKnowledgeBase());setNewPrecedent({caseName:'',keyTakeaway:'',tags:[]});};const importChapterFile=async file=>{setImporting(true);setImportMessage(\"\\u05DE\\u05E2\\u05DC\\u05D4 \\u05D0\\u05EA \\\"\".concat(file.name,\"\\\" \\u05DC\\u05E2\\u05D9\\u05D1\\u05D5\\u05D3...\"));setImportInsights([]);try{if(!isApiConfigured()){setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');return;}const backendResult=await uploadChapterPdf(file,{docType:'chapter'});const chapter={id:backendResult.id,title:backendResult.title,content:backendResult.content||backendResult.summary,tags:backendResult.tags||[],rules:backendResult.rules||[]};saveBookChapter(chapter);setBrain(getKnowledgeBase());setNewChapter(chapter);setImportInsights(backendResult.insights||[]);setImportMessage(\"\\u05D4\\u05E4\\u05E8\\u05E7 \\\"\".concat(chapter.title,\"\\\" \\u05E2\\u05D5\\u05BC\\u05D1\\u05D3 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4 \\u05D3\\u05E8\\u05DA \\u05D4\\u05E9\\u05E8\\u05EA \\u05D5\\u05E0\\u05E9\\u05DE\\u05E8 \\u05D1\\u05DE\\u05D0\\u05D2\\u05E8.\"));}catch(error){console.error(error);setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');}finally{setImporting(false);if(fileInputRef.current)fileInputRef.current.value='';}};const handlePdfSelection=files=>{if(!files||!files.length)return;const file=files[0];if(file.type!=='application/pdf'){setImportMessage('נא לבחור קובץ PDF בלבד.');return;}importChapterFile(file);};const handleDrop=event=>{event.preventDefault();setDragActive(false);handlePdfSelection(event.dataTransfer.files);};const handleDrag=event=>{event.preventDefault();if(event.type==='dragover'){setDragActive(true);}else if(event.type==='dragleave'){setDragActive(false);}};const triggerFilePicker=()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};useEffect(()=>{if(activeTab!=='medical'||medicalInitialized)return;let cancelled=false;const loadDocuments=async()=>{setMedicalListLoading(true);setMedicalError(null);try{const docs=await listKnowledgeDocuments({docType:'chapter',limit:25});if(!cancelled){var _docs$0$id,_docs$;setMedicalDocs(docs);setSelectedMedicalId((_docs$0$id=(_docs$=docs[0])===null||_docs$===void 0?void 0:_docs$.id)!==null&&_docs$0$id!==void 0?_docs$0$id:'');setMedicalInitialized(true);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');}}finally{if(!cancelled){setMedicalListLoading(false);}}};loadDocuments();return()=>{cancelled=true;};},[activeTab,medicalInitialized]);useEffect(()=>{if(activeTab!=='medical')return;if(!selectedMedicalId){setMedicalDetail(null);return;}let cancelled=false;setMedicalDetailLoading(true);setMedicalError(null);const loadDetail=async()=>{try{const doc=await getKnowledgeDocument(selectedMedicalId);if(!cancelled){setMedicalDetail(doc);}}catch(error){console.error(error);if(!cancelled){setMedicalError('טעינת ניתוח רפואי נכשלה.');setMedicalDetail(null);}}finally{if(!cancelled){setMedicalDetailLoading(false);}}};loadDetail();return()=>{cancelled=true;};},[activeTab,selectedMedicalId]);const knowledgeView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-xl p-6 bg-slate-50 text-center transition \".concat(dragActive?'border-blue-500 bg-blue-50/40':'border-slate-200'),onDragOver:handleDrag,onDragLeave:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,className:\"hidden\",accept:\"application/pdf\",onChange:event=>handlePdfSelection(event.target.files)}),/*#__PURE__*/_jsx(UploadCloud,{className:\"w-10 h-10 text-slate-400 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-slate-800\",children:\"\\u05D2\\u05E8\\u05E8\\u05D5 \\u05E7\\u05D5\\u05D1\\u05E5 PDF \\u05E9\\u05DC \\u05E4\\u05E8\\u05E7 \\\"\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\\u05D9 \\u05E0\\u05D6\\u05E7\\\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500 mt-2\",children:\"\\u05D4\\u05E7\\u05D1\\u05E6\\u05D9\\u05DD \\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D9\\u05DD \\u05D5\\u05DE\\u05E0\\u05D5\\u05E1\\u05D7\\u05D9\\u05DD \\u05D1\\u05E9\\u05E8\\u05EA \\u05D4\\u05DE\\u05D0\\u05D5\\u05D1\\u05D8\\u05D7 \\u2013 \\u05DB\\u05D5\\u05DC\\u05DC \\u05E8\\u05D9\\u05E9\\u05D5\\u05DD Audit \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:triggerFilePicker,className:\"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition\",disabled:importing,children:\"\\u05D1\\u05D7\\u05E8 \\u05E7\\u05D5\\u05D1\\u05E5 PDF\"}),importing&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-600\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 animate-spin\"}),\"\\u05DE\\u05E2\\u05D1\\u05D3 \\u05E7\\u05D5\\u05D1\\u05E5...\"]})]}),importMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600 mt-3\",children:importMessage}),importInsights.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-bold text-slate-500 mb-2\",children:\"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D5\\u05EA \\u05E9\\u05D4\\u05D5\\u05E4\\u05E7\\u05D5:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1 text-sm text-slate-600\",children:importInsights.map(insight=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded px-3 py-2 bg-white\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[insight.title,\": \"]}),insight.content]},insight.title))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",onSubmit:e=>{e.preventDefault();handleSaveChapter();},children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-5 h-5 text-blue-600\"}),\" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05E4\\u05E8\\u05E7 \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA \\u05D4\\u05E4\\u05E8\\u05E7\",value:newChapter.title||'',onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-24\",placeholder:\"\\u05EA\\u05D5\\u05DB\\u05DF / \\u05EA\\u05E7\\u05E6\\u05D9\\u05E8\",value:newChapter.content||'',onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{content:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",value:(newChapter.tags||[]).join(', '),onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-20 text-sm\",placeholder:\"\\u05DB\\u05DC\\u05DC\\u05D9\\u05DD (\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4 \\u05DB\\u05DC\\u05DC \\u05D7\\u05D3\\u05E9)\",value:(newChapter.rules||[]).join('\\n'),onChange:e=>setNewChapter(prev=>_objectSpread(_objectSpread({},prev),{},{rules:e.target.value.split('\\n').map(rule=>rule.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05E4\\u05E8\\u05E7\"]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",onSubmit:e=>{e.preventDefault();handleSavePrecedent();},children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"w-5 h-5 text-purple-600\"}),\" \\u05D4\\u05D5\\u05E1\\u05E3 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05E9\\u05DD \\u05D4\\u05D4\\u05DC\\u05D9\\u05DA / \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\",value:newPrecedent.caseName||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{caseName:e.target.value}))}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full border border-slate-300 rounded p-2 h-24\",placeholder:\"\\u05EA\\u05D5\\u05D1\\u05E0\\u05D4 \\u05DE\\u05E8\\u05DB\\u05D6\\u05D9\\u05EA\",value:newPrecedent.keyTakeaway||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{keyTakeaway:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05E6\\u05D9\\u05D5\\u05DF / \\u05DE\\u05E7\\u05D5\\u05E8\",value:newPrecedent.citation||'',onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{citation:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border border-slate-300 rounded p-2\",placeholder:\"\\u05EA\\u05D2\\u05D9\\u05D5\\u05EA (\\u05DE\\u05D5\\u05E4\\u05E8\\u05D3\\u05D5\\u05EA \\u05D1\\u05E4\\u05E1\\u05D9\\u05E7)\",value:(newPrecedent.tags||[]).join(', '),onChange:e=>setNewPrecedent(prev=>_objectSpread(_objectSpread({},prev),{},{tags:e.target.value.split(',').map(tag=>tag.trim()).filter(Boolean)}))}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\" \\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05E7\\u05D3\\u05D9\\u05DD\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded shadow border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-4 h-4 text-blue-600\"}),\" \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E7\\u05D9\\u05D9\\u05DE\\u05D9\\u05DD (\",brain.book.length,\")\"]}),brain.book.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05E4\\u05E8\\u05E7\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:brain.book.slice(0,4).map(chapter=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-slate-800\",children:chapter.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\",children:chapter.content})]},chapter.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-5 rounded shadow border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gavel,{className:\"w-4 h-4 text-purple-600\"}),\" \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD (\",brain.precedents.length,\")\"]}),brain.precedents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05EA\\u05E7\\u05D3\\u05D9\\u05DE\\u05D9\\u05DD \\u05E9\\u05DE\\u05D5\\u05E8\\u05D9\\u05DD.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:brain.precedents.slice(0,4).map(precedent=>/*#__PURE__*/_jsxs(\"li\",{className:\"border border-slate-100 rounded p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-slate-800\",children:precedent.caseName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\",children:precedent.keyTakeaway})]},precedent.id))})]})]})]});const casesView=/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Layout,{className:\"w-5 h-5 text-emerald-600\"}),\" \\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-600\",children:\"\\u05DB\\u05DC \\u05D4\\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05E0\\u05E9\\u05DE\\u05E8\\u05D9\\u05DD \\u05D5\\u05DE\\u05E1\\u05D5\\u05E0\\u05DB\\u05E8\\u05E0\\u05D9\\u05DD \\u05D0\\u05D5\\u05D8\\u05D5\\u05DE\\u05D8\\u05D9\\u05EA \\u05DE\\u05D5\\u05DC \\u05D4\\u05E9\\u05E8\\u05EA.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-400\",children:\"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD \\u05DE\\u05EA\\u05E7\\u05D3\\u05DD \\u05D9\\u05EA\\u05D5\\u05D5\\u05E1\\u05E3 \\u05D1\\u05E9\\u05DC\\u05D1\\u05D9\\u05DD \\u05D4\\u05D1\\u05D0\\u05D9\\u05DD.\"})]});const medicalView=/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4 md:flex-row md:items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-500\",children:\"\\u05D1\\u05D7\\u05E8 \\u05DE\\u05E1\\u05DE\\u05DA \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\",value:selectedMedicalId,onChange:e=>setSelectedMedicalId(e.target.value),disabled:!medicalDocs.length||medicalListLoading,children:[medicalDocs.map(doc=>/*#__PURE__*/_jsx(\"option\",{value:doc.id,children:doc.title},doc.id)),!medicalDocs.length&&/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/3\",children:/*#__PURE__*/_jsx(QualityBadge,{score:medicalDetail===null||medicalDetail===void 0?void 0:medicalDetail.score})})]}),medicalError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\",children:medicalError}),(medicalListLoading||medicalDetailLoading)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-slate-500\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin\"}),\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9 \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9...\"]}),!medicalListLoading&&!medicalDetail&&!medicalError&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\",children:\"\\u05D0\\u05D9\\u05DF \\u05E0\\u05D9\\u05EA\\u05D5\\u05D7\\u05D9\\u05DD \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD \\u05DC\\u05D4\\u05E6\\u05D2\\u05D4.\"}),medicalDetail&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MedicalQualityBox,{score:medicalDetail.medicalQualityScore,findings:(_medicalDetail$qualit=medicalDetail.qualityFindings)!==null&&_medicalDetail$qualit!==void 0?_medicalDetail$qualit:[]}),/*#__PURE__*/_jsx(KnowledgeFlags,{flags:medicalDetail.flags||[]}),/*#__PURE__*/_jsx(KnowledgeClaimsPanel,{claims:medicalDetail.claims||[],limit:5}),/*#__PURE__*/_jsx(MedicalTimeline,{events:medicalDetail.timeline||[]})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-slate-100 text-slate-900 font-sans\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"bg-slate-900 text-white p-6 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold serif\",children:\"LexMedical Admin\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onLogout,className:\"flex items-center gap-2 hover:text-red-400\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\" \\u05D9\\u05E6\\u05D9\\u05D0\\u05D4\"]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-6xl mx-auto p-8 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-600\",children:[\"\\u05DE\\u05D7\\u05D5\\u05D1\\u05E8 \\u05DB- \",currentUserName]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-400\",children:[\"\\u05E2\\u05D5\\u05D3\\u05DB\\u05DF \\u05DC\\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D4: \",new Date(brain.lastUpdated).toLocaleString('he-IL')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('knowledge'),className:\"px-4 py-2 rounded border text-sm flex items-center gap-2 \".concat(activeTab==='knowledge'?'bg-slate-900 text-white border-slate-900':'border-slate-300 text-slate-600'),children:[/*#__PURE__*/_jsx(Book,{className:\"w-4 h-4\"}),\" \\u05D9\\u05D3\\u05E2\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('cases'),className:\"px-4 py-2 rounded border text-sm flex items-center gap-2 \".concat(activeTab==='cases'?'bg-slate-900 text-white border-slate-900':'border-slate-300 text-slate-600'),children:[/*#__PURE__*/_jsx(Layout,{className:\"w-4 h-4\"}),\" \\u05EA\\u05D9\\u05E7\\u05D9\\u05DD\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('medical'),className:\"px-4 py-2 rounded border text-sm flex items-center gap-2 \".concat(activeTab==='medical'?'bg-slate-900 text-white border-slate-900':'border-slate-300 text-slate-600'),children:[/*#__PURE__*/_jsx(Activity,{className:\"w-4 h-4\"}),\" Medical Analysis\"]})]})]}),activeTab==='knowledge'&&knowledgeView,activeTab==='cases'&&casesView,activeTab==='medical'&&medicalView]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useRef","useEffect","saveBookChapter","saveGlobalPrecedent","getKnowledgeBase","uploadChapterPdf","isApiConfigured","listKnowledgeDocuments","getKnowledgeDocument","Book","Gavel","LogOut","Save","Layout","UploadCloud","Loader2","Activity","QualityBadge","KnowledgeClaimsPanel","KnowledgeFlags","MedicalTimeline","MedicalQualityBox","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","_ref","_medicalDetail$qualit","currentUserName","onEditCase","_onEditCase","onLogout","activeTab","setActiveTab","brain","setBrain","newChapter","setNewChapter","title","content","tags","rules","newPrecedent","setNewPrecedent","caseName","keyTakeaway","importing","setImporting","importMessage","setImportMessage","importInsights","setImportInsights","dragActive","setDragActive","fileInputRef","medicalDocs","setMedicalDocs","selectedMedicalId","setSelectedMedicalId","medicalDetail","setMedicalDetail","medicalInitialized","setMedicalInitialized","medicalListLoading","setMedicalListLoading","medicalDetailLoading","setMedicalDetailLoading","medicalError","setMedicalError","handleSaveChapter","alert","chapter","id","Date","now","toString","handleSavePrecedent","precedent","citation","relevantIssues","importChapterFile","file","concat","name","backendResult","docType","summary","insights","error","console","current","value","handlePdfSelection","files","length","type","handleDrop","event","preventDefault","dataTransfer","handleDrag","triggerFilePicker","_fileInputRef$current","click","cancelled","loadDocuments","docs","limit","_docs$0$id","_docs$","loadDetail","doc","knowledgeView","className","children","onDragOver","onDragLeave","onDrop","ref","accept","onChange","target","onClick","disabled","map","insight","onSubmit","e","placeholder","prev","_objectSpread","join","split","tag","trim","filter","Boolean","rule","book","slice","precedents","casesView","medicalView","score","medicalQualityScore","findings","qualityFindings","flags","claims","events","timeline","dir","lastUpdated","toLocaleString"],"sources":["C:/Office-Apps/LexMedical-App/src/components/AdminDashboard.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  BookChapter,\r\n  GlobalPrecedent,\r\n  CaseData,\r\n  AIInsight,\r\n  KnowledgeDocumentSummary,\r\n  KnowledgeDocumentDetail,\r\n} from '../types';\r\nimport { saveBookChapter, saveGlobalPrecedent, getKnowledgeBase } from '../services/knowledgeBase';\r\nimport { uploadChapterPdf, isApiConfigured } from '../services/api';\r\nimport { listKnowledgeDocuments, getKnowledgeDocument } from '../services/knowledgeApi';\r\nimport { Book, Gavel, LogOut, Save, Layout, UploadCloud, Loader2, Activity } from 'lucide-react';\r\nimport QualityBadge from './QualityBadge';\r\nimport KnowledgeClaimsPanel from './KnowledgeClaimsPanel';\r\nimport KnowledgeFlags from './KnowledgeFlags';\r\nimport MedicalTimeline from './MedicalTimeline';\r\nimport MedicalQualityBox from './MedicalQualityBox';\r\n\r\ninterface Props {\r\n  currentUserName: string;\r\n  onEditCase: (caseData: CaseData) => void;\r\n  onLogout: () => void;\r\n}\r\n\r\nconst AdminDashboard: React.FC<Props> = ({ currentUserName, onEditCase: _onEditCase, onLogout }) => {\r\n  const [activeTab, setActiveTab] = useState<'cases' | 'knowledge' | 'medical'>('knowledge');\r\n  const [brain, setBrain] = useState(getKnowledgeBase());\r\n  const [newChapter, setNewChapter] = useState<Partial<BookChapter>>({ title: '', content: '', tags: [], rules: [] });\r\n  const [newPrecedent, setNewPrecedent] = useState<Partial<GlobalPrecedent>>({ caseName: '', keyTakeaway: '', tags: [] });\r\n  const [importing, setImporting] = useState(false);\r\n  const [importMessage, setImportMessage] = useState('');\r\n  const [importInsights, setImportInsights] = useState<AIInsight[]>([]);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [medicalDocs, setMedicalDocs] = useState<KnowledgeDocumentSummary[]>([]);\r\n  const [selectedMedicalId, setSelectedMedicalId] = useState<string>('');\r\n  const [medicalDetail, setMedicalDetail] = useState<KnowledgeDocumentDetail | null>(null);\r\n  const [medicalInitialized, setMedicalInitialized] = useState(false);\r\n  const [medicalListLoading, setMedicalListLoading] = useState(false);\r\n  const [medicalDetailLoading, setMedicalDetailLoading] = useState(false);\r\n  const [medicalError, setMedicalError] = useState<string | null>(null);\r\n\r\n  const handleSaveChapter = () => {\r\n    if (!newChapter.title || !newChapter.content) {\r\n      alert('חובה למלא כותרת ותוכן');\r\n      return;\r\n    }\r\n    const chapter: BookChapter = {\r\n      id: Date.now().toString(),\r\n      title: newChapter.title!,\r\n      content: newChapter.content!,\r\n      tags: newChapter.tags || [],\r\n      rules: newChapter.rules || [],\r\n    };\r\n    saveBookChapter(chapter);\r\n    setBrain(getKnowledgeBase());\r\n    setNewChapter({ title: '', content: '', tags: [], rules: [] });\r\n  };\r\n\r\n  const handleSavePrecedent = () => {\r\n    if (!newPrecedent.caseName || !newPrecedent.keyTakeaway) {\r\n      alert('חובה למלא שם ותובנה');\r\n      return;\r\n    }\r\n    const precedent: GlobalPrecedent = {\r\n      id: Date.now().toString(),\r\n      caseName: newPrecedent.caseName!,\r\n      keyTakeaway: newPrecedent.keyTakeaway!,\r\n      citation: newPrecedent.citation || '',\r\n      tags: newPrecedent.tags || [],\r\n      relevantIssues: [],\r\n    };\r\n    saveGlobalPrecedent(precedent);\r\n    setBrain(getKnowledgeBase());\r\n    setNewPrecedent({ caseName: '', keyTakeaway: '', tags: [] });\r\n  };\r\n\r\n  const importChapterFile = async (file: File) => {\r\n    setImporting(true);\r\n    setImportMessage(`מעלה את \"${file.name}\" לעיבוד...`);\r\n    setImportInsights([]);\r\n    try {\r\n      if (!isApiConfigured()) {\r\n        setImportMessage('שרת העיבוד לא הוגדר. עדכן את REACT_APP_API_BASE_URL.');\r\n        return;\r\n      }\r\n      const backendResult = await uploadChapterPdf(file, { docType: 'chapter' });\r\n      const chapter: BookChapter = {\r\n        id: backendResult.id,\r\n        title: backendResult.title,\r\n        content: backendResult.content || backendResult.summary,\r\n        tags: backendResult.tags || [],\r\n        rules: backendResult.rules || [],\r\n      };\r\n      saveBookChapter(chapter);\r\n      setBrain(getKnowledgeBase());\r\n      setNewChapter(chapter);\r\n      setImportInsights(backendResult.insights || []);\r\n      setImportMessage(`הפרק \"${chapter.title}\" עוּבד בהצלחה דרך השרת ונשמר במאגר.`);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setImportMessage('אירעה שגיאה בקריאת או עיבוד הקובץ. ודא שהקובץ PDF תקין ושה-API זמין.');\r\n    } finally {\r\n      setImporting(false);\r\n      if (fileInputRef.current) fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const handlePdfSelection = (files: FileList | null) => {\r\n    if (!files || !files.length) return;\r\n    const file = files[0];\r\n    if (file.type !== 'application/pdf') {\r\n      setImportMessage('נא לבחור קובץ PDF בלבד.');\r\n      return;\r\n    }\r\n    importChapterFile(file);\r\n  };\r\n\r\n  const handleDrop = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    setDragActive(false);\r\n    handlePdfSelection(event.dataTransfer.files);\r\n  };\r\n\r\n  const handleDrag = (event: React.DragEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    if (event.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (event.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const triggerFilePicker = () => fileInputRef.current?.click();\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical' || medicalInitialized) return;\r\n    let cancelled = false;\r\n    const loadDocuments = async () => {\r\n      setMedicalListLoading(true);\r\n      setMedicalError(null);\r\n      try {\r\n        const docs = await listKnowledgeDocuments({ docType: 'chapter', limit: 25 });\r\n        if (!cancelled) {\r\n          setMedicalDocs(docs);\r\n          setSelectedMedicalId(docs[0]?.id ?? '');\r\n          setMedicalInitialized(true);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת מסמכי ניתוח רפואי נכשלה.');\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalListLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDocuments();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, medicalInitialized]);\r\n\r\n  useEffect(() => {\r\n    if (activeTab !== 'medical') return;\r\n    if (!selectedMedicalId) {\r\n      setMedicalDetail(null);\r\n      return;\r\n    }\r\n    let cancelled = false;\r\n    setMedicalDetailLoading(true);\r\n    setMedicalError(null);\r\n    const loadDetail = async () => {\r\n      try {\r\n        const doc = await getKnowledgeDocument(selectedMedicalId);\r\n        if (!cancelled) {\r\n          setMedicalDetail(doc);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!cancelled) {\r\n          setMedicalError('טעינת ניתוח רפואי נכשלה.');\r\n          setMedicalDetail(null);\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setMedicalDetailLoading(false);\r\n        }\r\n      }\r\n    };\r\n    loadDetail();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [activeTab, selectedMedicalId]);\r\n\r\n  const knowledgeView = (\r\n    <div className=\"space-y-6\">\r\n      <div\r\n        className={`border-2 border-dashed rounded-xl p-6 bg-slate-50 text-center transition ${\r\n          dragActive ? 'border-blue-500 bg-blue-50/40' : 'border-slate-200'\r\n        }`}\r\n        onDragOver={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          className=\"hidden\"\r\n          accept=\"application/pdf\"\r\n          onChange={(event) => handlePdfSelection(event.target.files)}\r\n        />\r\n        <UploadCloud className=\"w-10 h-10 text-slate-400 mx-auto mb-3\" />\r\n        <p className=\"text-lg font-semibold text-slate-800\">גררו קובץ PDF של פרק \"תחשיבי נזק\"</p>\r\n        <p className=\"text-sm text-slate-500 mt-2\">הקבצים מעובדים ומנוסחים בשרת המאובטח – כולל רישום Audit אוטומטי.</p>\r\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={triggerFilePicker}\r\n            className=\"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition\"\r\n            disabled={importing}\r\n          >\r\n            בחר קובץ PDF\r\n          </button>\r\n          {importing && (\r\n            <div className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              מעבד קובץ...\r\n            </div>\r\n          )}\r\n        </div>\r\n        {importMessage && <p className=\"text-sm text-slate-600 mt-3\">{importMessage}</p>}\r\n        {importInsights.length > 0 && (\r\n          <div className=\"mt-4 text-left\">\r\n            <p className=\"text-xs font-bold text-slate-500 mb-2\">תובנות שהופקו:</p>\r\n            <ul className=\"space-y-1 text-sm text-slate-600\">\r\n              {importInsights.map((insight) => (\r\n                <li key={insight.title} className=\"border border-slate-100 rounded px-3 py-2 bg-white\">\r\n                  <span className=\"font-semibold\">{insight.title}: </span>\r\n                  {insight.content}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid lg:grid-cols-2 gap-6\">\r\n        <form\r\n          className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSaveChapter();\r\n          }}\r\n        >\r\n          <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n            <Book className=\"w-5 h-5 text-blue-600\" /> הוסף פרק חדש\r\n          </h2>\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"כותרת הפרק\"\r\n            value={newChapter.title || ''}\r\n            onChange={(e) => setNewChapter((prev) => ({ ...prev, title: e.target.value }))}\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-24\"\r\n            placeholder=\"תוכן / תקציר\"\r\n            value={newChapter.content || ''}\r\n            onChange={(e) => setNewChapter((prev) => ({ ...prev, content: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"תגיות (מופרדות בפסיק)\"\r\n            value={(newChapter.tags || []).join(', ')}\r\n            onChange={(e) =>\r\n              setNewChapter((prev) => ({\r\n                ...prev,\r\n                tags: e.target.value\r\n                  .split(',')\r\n                  .map((tag) => tag.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-20 text-sm\"\r\n            placeholder=\"כללים (כל שורה כלל חדש)\"\r\n            value={(newChapter.rules || []).join('\\n')}\r\n            onChange={(e) =>\r\n              setNewChapter((prev) => ({\r\n                ...prev,\r\n                rules: e.target.value\r\n                  .split('\\n')\r\n                  .map((rule) => rule.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <button type=\"submit\" className=\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\">\r\n            <Save className=\"w-4 h-4\" /> שמור פרק\r\n          </button>\r\n        </form>\r\n\r\n        <form\r\n          className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSavePrecedent();\r\n          }}\r\n        >\r\n          <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n            <Gavel className=\"w-5 h-5 text-purple-600\" /> הוסף תקדים חדש\r\n          </h2>\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"שם ההליך / תקדים\"\r\n            value={newPrecedent.caseName || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, caseName: e.target.value }))}\r\n          />\r\n          <textarea\r\n            className=\"w-full border border-slate-300 rounded p-2 h-24\"\r\n            placeholder=\"תובנה מרכזית\"\r\n            value={newPrecedent.keyTakeaway || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, keyTakeaway: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"ציון / מקור\"\r\n            value={newPrecedent.citation || ''}\r\n            onChange={(e) => setNewPrecedent((prev) => ({ ...prev, citation: e.target.value }))}\r\n          />\r\n          <input\r\n            className=\"w-full border border-slate-300 rounded p-2\"\r\n            placeholder=\"תגיות (מופרדות בפסיק)\"\r\n            value={(newPrecedent.tags || []).join(', ')}\r\n            onChange={(e) =>\r\n              setNewPrecedent((prev) => ({\r\n                ...prev,\r\n                tags: e.target.value\r\n                  .split(',')\r\n                  .map((tag) => tag.trim())\r\n                  .filter(Boolean),\r\n              }))\r\n            }\r\n          />\r\n          <button type=\"submit\" className=\"w-full bg-slate-900 text-white py-2 rounded flex items-center justify-center gap-2\">\r\n            <Save className=\"w-4 h-4\" /> שמור תקדים\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white p-5 rounded shadow border border-slate-200\">\r\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n            <Book className=\"w-4 h-4 text-blue-600\" /> פרקים קיימים ({brain.book.length})\r\n          </h3>\r\n          {brain.book.length === 0 ? (\r\n            <p className=\"text-sm text-slate-500\">אין פרקים שמורים.</p>\r\n          ) : (\r\n            <ul className=\"space-y-2\">\r\n              {brain.book.slice(0, 4).map((chapter) => (\r\n                <li key={chapter.id} className=\"border border-slate-100 rounded p-3\">\r\n                  <p className=\"font-semibold text-slate-800\">{chapter.title}</p>\r\n                  <p className=\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\">{chapter.content}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n        <div className=\"bg-white p-5 rounded shadow border border-slate-200\">\r\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n            <Gavel className=\"w-4 h-4 text-purple-600\" /> תקדימים ({brain.precedents.length})\r\n          </h3>\r\n          {brain.precedents.length === 0 ? (\r\n            <p className=\"text-sm text-slate-500\">אין תקדימים שמורים.</p>\r\n          ) : (\r\n            <ul className=\"space-y-2\">\r\n              {brain.precedents.slice(0, 4).map((precedent) => (\r\n                <li key={precedent.id} className=\"border border-slate-100 rounded p-3\">\r\n                  <p className=\"font-semibold text-slate-800\">{precedent.caseName}</p>\r\n                  <p className=\"text-xs text-slate-500 mt-1 overflow-hidden text-ellipsis\">{precedent.keyTakeaway}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const casesView = (\r\n    <div className=\"bg-white p-6 rounded shadow border border-slate-200 space-y-4\">\r\n      <h2 className=\"text-xl font-bold flex items-center gap-2\">\r\n        <Layout className=\"w-5 h-5 text-emerald-600\" /> ניהול תיקים\r\n      </h2>\r\n      <p className=\"text-sm text-slate-600\">כל התיקים נשמרים ומסונכרנים אוטומטית מול השרת.</p>\r\n      <p className=\"text-xs text-slate-400\">ניהול תיקים מתקדם יתווסף בשלבים הבאים.</p>\r\n    </div>\r\n  );\r\n\r\n  const medicalView = (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-end\">\r\n        <div className=\"flex-1\">\r\n          <label className=\"text-xs font-semibold text-slate-500\">בחר מסמך רפואי</label>\r\n          <select\r\n            className=\"mt-1 w-full rounded border border-slate-300 p-2 text-sm\"\r\n            value={selectedMedicalId}\r\n            onChange={(e) => setSelectedMedicalId(e.target.value)}\r\n            disabled={!medicalDocs.length || medicalListLoading}\r\n          >\r\n            {medicalDocs.map((doc) => (\r\n              <option key={doc.id} value={doc.id}>\r\n                {doc.title}\r\n              </option>\r\n            ))}\r\n            {!medicalDocs.length && <option value=\"\">אין מסמכים</option>}\r\n          </select>\r\n        </div>\r\n        <div className=\"md:w-1/3\">\r\n          <QualityBadge score={medicalDetail?.score} />\r\n        </div>\r\n      </div>\r\n\r\n      {medicalError && (\r\n        <div className=\"rounded border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700\">{medicalError}</div>\r\n      )}\r\n\r\n      {(medicalListLoading || medicalDetailLoading) && (\r\n        <div className=\"flex items-center gap-2 text-sm text-slate-500\">\r\n          <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          טוען נתוני ניתוח רפואי...\r\n        </div>\r\n      )}\r\n\r\n      {!medicalListLoading && !medicalDetail && !medicalError && (\r\n        <div className=\"rounded border border-slate-200 bg-white p-4 text-sm text-slate-500\">\r\n          אין ניתוחים רפואיים זמינים להצגה.\r\n        </div>\r\n      )}\r\n\r\n      {medicalDetail && (\r\n        <>\r\n          <MedicalQualityBox\r\n            score={medicalDetail.medicalQualityScore}\r\n            findings={medicalDetail.qualityFindings ?? []}\r\n          />\r\n          <KnowledgeFlags flags={medicalDetail.flags || []} />\r\n          <KnowledgeClaimsPanel claims={medicalDetail.claims || []} limit={5} />\r\n          <MedicalTimeline events={medicalDetail.timeline || []} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-100 text-slate-900 font-sans\" dir=\"rtl\">\r\n      <header className=\"bg-slate-900 text-white p-6 flex justify-between items-center\">\r\n        <h1 className=\"text-2xl font-bold serif\">LexMedical Admin</h1>\r\n        <button onClick={onLogout} className=\"flex items-center gap-2 hover:text-red-400\">\r\n          <LogOut className=\"w-4 h-4\" /> יציאה\r\n        </button>\r\n      </header>\r\n      <main className=\"max-w-6xl mx-auto p-8 space-y-6\">\r\n        <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n          <div>\r\n            <p className=\"text-sm text-slate-600\">מחובר כ- {currentUserName}</p>\r\n            <p className=\"text-xs text-slate-400\">עודכן לאחרונה: {new Date(brain.lastUpdated).toLocaleString('he-IL')}</p>\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => setActiveTab('knowledge')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'knowledge' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Book className=\"w-4 h-4\" /> ידע\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('cases')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'cases' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Layout className=\"w-4 h-4\" /> תיקים\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('medical')}\r\n              className={`px-4 py-2 rounded border text-sm flex items-center gap-2 ${\r\n                activeTab === 'medical' ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-300 text-slate-600'\r\n              }`}\r\n            >\r\n              <Activity className=\"w-4 h-4\" /> Medical Analysis\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {activeTab === 'knowledge' && knowledgeView}\r\n        {activeTab === 'cases' && casesView}\r\n        {activeTab === 'medical' && medicalView}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}