{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import{useAuth}from'./context/AuthContext';import{createCase as apiCreateCase,listCases as apiListCases,updateCase as apiUpdateCase}from'./services/api';import LoginScreen from'./components/LoginScreen';import AdminDashboard from'./components/AdminDashboard';import LiabilityStep from'./components/LiabilityStep';import DamagesStep from'./components/DamagesStep';import ReasoningStep from'./components/ReasoningStep';import ReportStep from'./components/ReportStep';import CaseDashboard from'./components/CaseDashboard';import{FolderOpen,ChevronLeft,Shield,Activity,UploadCloud,FileText,LayoutDashboard,BookOpen,Download,Upload,Bell,UserCircle,Clock,Flag,BookMarked}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const createEmptyCase=attorney=>({id:Date.now().toString(),name:'תיק חדש '+new Date().toLocaleDateString('he-IL'),attorney,lastUpdated:new Date().toISOString(),summary:'',summaryFiles:[],liability:{issues:[],medicalRecordQuality:'Complete',doctrines:[],precedents:[],expertsPlaintiff:[],expertsDefense:[],expertCourtOpinions:[],expertCourtStance:'None',aggravatingFactors:2,mitigatingFactors:2,probability:50,probabilityRange:[40,60],uncertainty:'Medium',strengthsPlaintiff:[''],weaknessesPlaintiff:[''],strengthsDefense:[''],weaknessesDefense:['']},damages:{dateOfBirth:'1990-01-01',gender:'Male',dateOfEvent:new Date(new Date().setFullYear(new Date().getFullYear()-2)).toISOString().split('T')[0],dateOfCalc:new Date().toISOString().split('T')[0],dateOfRetirement:'',ageAtInjury:0,currentAge:0,lifeExpectancy:82,wagePreInjury:10000,wagePostInjury:0,permanentDisabilityMedical:10,permanentDisabilityFunctional:10,daysOfHospitalization:0,interestRate:3,heads:[{id:'1',name:'הפסד שכר לעבר',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'2',name:'הפסד שכר לעתיד',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'3',name:'הפסד פנסיה ותנאים סוציאליים',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'4',name:'כאב וסבל',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'5',name:'עזרת צד ג׳ לעבר',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'6',name:'עזרת צד ג׳ לעתיד',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'7',name:'הוצאות רפואיות',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'8',name:'ניידות ונסיעות',isActive:false,parameters:{},calculatedAmount:0,notes:''}],precedents:[]}});const App=()=>{const{user,logout}=useAuth();const[activeStep,setActiveStep]=useState(0);const[showAdminDashboard,setShowAdminDashboard]=useState(false);const[,setCaseList]=useState([]);const[currentCaseId,setCurrentCaseId]=useState(null);const[currentCase,setCurrentCase]=useState(null);const[saveStatus,setSaveStatus]=useState('idle');const[isLoadingCases,setIsLoadingCases]=useState(false);const[loadError,setLoadError]=useState(null);const fileInputRef=useRef(null);const saveTimeoutRef=useRef(null);const resetStatusTimeoutRef=useRef(null);const hydratingRef=useRef(false);const isAdmin=(user===null||user===void 0?void 0:user.role)==='admin';const cleanupClientState=()=>{setCaseList([]);setCurrentCaseId(null);setCurrentCase(null);setShowAdminDashboard(false);setActiveStep(0);setSaveStatus('idle');if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);saveTimeoutRef.current=null;}if(resetStatusTimeoutRef.current){clearTimeout(resetStatusTimeoutRef.current);resetStatusTimeoutRef.current=null;}};const normalizeCaseData=(record,attorneyFallback)=>{const safeData=record.data||createEmptyCase(attorneyFallback);return _objectSpread(_objectSpread(_objectSpread({},createEmptyCase(attorneyFallback)),safeData),{},{id:record.id,name:safeData.name||record.title||\"\\u05EA\\u05D9\\u05E7 \".concat(new Date().toLocaleDateString('he-IL')),attorney:safeData.attorney||attorneyFallback});};const handleCreateNewCase=useCallback(async attorneyName=>{if(!user)return;setIsLoadingCases(true);setLoadError(null);try{const template=createEmptyCase(attorneyName);const created=await apiCreateCase({title:template.name,data:template});setCaseList(prev=>[created,...prev]);const normalized=_objectSpread(_objectSpread({},template),{},{id:created.id});setCurrentCaseId(created.id);hydratingRef.current=true;setCurrentCase(normalized);setActiveStep(0);}catch(error){console.error(error);setLoadError('יצירת תיק חדש נכשלה.');}finally{setIsLoadingCases(false);}},[user]);useEffect(()=>{let cancelled=false;const bootstrap=async()=>{if(!user){cleanupClientState();return;}setIsLoadingCases(true);setLoadError(null);try{const{ownCases}=await apiListCases();if(cancelled)return;setCaseList(ownCases);setShowAdminDashboard(isAdmin);if(!ownCases.length){await handleCreateNewCase(user.username);return;}const sorted=[...ownCases].sort((a,b)=>new Date(b.updatedAt).getTime()-new Date(a.updatedAt).getTime());const primary=sorted[0];setCurrentCaseId(primary.id);hydratingRef.current=true;setCurrentCase(normalizeCaseData(primary,user.username));setActiveStep(0);}catch(error){console.error(error);if(!cancelled){setLoadError('טעינת התיקים נכשלה. נסה שוב בעוד רגע.');}}finally{if(!cancelled){setIsLoadingCases(false);}}};bootstrap();return()=>{cancelled=true;};},[user,isAdmin,handleCreateNewCase]);const handleLogout=()=>{logout();cleanupClientState();};const handleAdminEditCase=caseData=>{setCurrentCaseId(caseData.id);hydratingRef.current=true;setCurrentCase(caseData);setShowAdminDashboard(false);setActiveStep(0);};useEffect(()=>{if(!user||!currentCaseId||!currentCase||showAdminDashboard)return;if(hydratingRef.current){hydratingRef.current=false;return;}if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);}setSaveStatus('saving');saveTimeoutRef.current=setTimeout(async()=>{try{const updated=await apiUpdateCase(currentCaseId,{title:currentCase.name,data:currentCase});setCaseList(prev=>{const filtered=prev.filter(c=>c.id!==updated.id);return[updated,...filtered];});setSaveStatus('saved');if(resetStatusTimeoutRef.current){clearTimeout(resetStatusTimeoutRef.current);}resetStatusTimeoutRef.current=setTimeout(()=>setSaveStatus('idle'),1500);}catch(error){console.error(error);setSaveStatus('error');}},1200);return()=>{if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);saveTimeoutRef.current=null;}};},[currentCase,currentCaseId,user,showAdminDashboard]);const handleSummaryFileUpload=e=>{if(e.target.files&&e.target.files[0]&&currentCase){const file=e.target.files[0];const newFile={name:file.name,size:file.size,type:file.type,lastModified:file.lastModified};setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summaryFiles:[...(currentCase.summaryFiles||[]),newFile]}));}};const removeSummaryFile=fileName=>{if(currentCase){setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summaryFiles:currentCase.summaryFiles.filter(f=>f.name!==fileName)}));}};const handleExportCase=()=>{if(!currentCase)return;const dataStr=JSON.stringify(currentCase,null,2);const blob=new Blob([dataStr],{type:\"application/json\"});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"lexmedical_\".concat(currentCase.name.replace(/\\s+/g,'_'),\".json\");document.body.appendChild(link);link.click();document.body.removeChild(link);};const handleImportClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleImportFile=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;const reader=new FileReader();reader.onload=event=>{try{var _event$target;const json=JSON.parse((_event$target=event.target)===null||_event$target===void 0?void 0:_event$target.result);if(json.id&&json.liability&&json.damages){hydratingRef.current=true;setCurrentCase(json);alert('התיק נטען בהצלחה! השינויים יישמרו אוטומטית.');setActiveStep(0);}else{alert('קובץ לא תקין.');}}catch(err){alert('שגיאה בטעינת הקובץ');}};reader.readAsText(file);if(fileInputRef.current)fileInputRef.current.value='';};const SectionCard=_ref=>{let{title,subtitle,children}=_ref;return/*#__PURE__*/_jsxs(\"section\",{className:\"rounded-card border border-pearl bg-white shadow-card-xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-1.5 w-full rounded-t-card bg-navy\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-navy\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:title}),subtitle&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate\",children:subtitle})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 w-12 border-b-2 border-gold rounded-full\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-slate\",children:children})]})]});};const primaryNavigation=[{label:'התיקים שלי',icon:FolderOpen,step:0},{label:'ניתוח רפואי',icon:Shield,step:1},{label:'תחשיבי נזק',icon:Activity,step:2},{label:'נימוקים משפטיים',icon:BookOpen,step:3},{label:'דוח מסכם',icon:FileText,step:4}];const supportNavigation=[{label:'ציר זמן',icon:Clock},{label:'איכות / דגלים',icon:Flag},{label:'מאמרים',icon:BookMarked}];if(!user){return/*#__PURE__*/_jsx(LoginScreen,{});}if(showAdminDashboard){return/*#__PURE__*/_jsx(AdminDashboard,{currentUserName:user.username,onEditCase:handleAdminEditCase,onLogout:handleLogout});}if(isLoadingCases||!currentCase){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-pearl text-slate\",dir:\"rtl\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-card border border-pearl bg-white px-6 py-4 shadow-card-xl text-sm\",children:loadError||'טוען תיקים מהשרת...'})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-pearl text-navy\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col min-h-screen\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-semibold brand-mark\",children:\"LexMedical\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gold-light hidden md:inline\",children:\"\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA \\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\\u05EA\\u05BE\\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9\\u05EA\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6 text-sm\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"relative text-gold-light hover:text-gold transition\",children:/*#__PURE__*/_jsx(Bell,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-pearl\",children:[/*#__PURE__*/_jsx(UserCircle,{className:\"w-6 h-6 text-gold-light\"}),/*#__PURE__*/_jsx(\"span\",{children:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"text-gold hover:text-gold-light transition\",children:\"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"hidden md:flex w-72 bg-navy-dark text-pearl flex-col border-l border-navy\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-6 border-b border-navy\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-widest text-slate-light\",children:\"\\u05E0\\u05D9\\u05D5\\u05D5\\u05D8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-white mt-2\",children:\"\\u05E9\\u05DC\\u05D9\\u05D8\\u05D4 \\u05DE\\u05DC\\u05D0\\u05D4 \\u05D1\\u05EA\\u05D9\\u05E7\"})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"flex-1 overflow-y-auto px-4 py-6 space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase text-slate-light mb-3\",children:\"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:primaryNavigation.map(item=>{const isActive=activeStep===item.step;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveStep(item.step),className:\"w-full flex items-center justify-between rounded-xl px-3 py-3 text-sm transition \".concat(isActive?'bg-navy text-gold border-r-4 border-gold':'bg-transparent text-pearl hover:bg-navy/60'),children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(item.icon,{className:\"w-4 h-4\"}),item.label]}),isActive&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest text-gold-light\",children:\"\\u05E4\\u05E2\\u05D9\\u05DC\"})]},item.label);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase text-slate-light mb-3\",children:\"\\u05DB\\u05DC\\u05D9 \\u05E2\\u05D6\\u05E8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:supportNavigation.map(item=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"w-full flex items-center justify-between rounded-xl px-3 py-3 text-sm text-slate-light bg-navy/30 border border-transparent cursor-not-allowed\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-3 opacity-60\",children:[/*#__PURE__*/_jsx(item.icon,{className:\"w-4 h-4\"}),item.label]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-slate-light\",children:\"\\u05D1\\u05E7\\u05E8\\u05D5\\u05D1\"})]},item.label))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-6 border-t border-navy space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCreateNewCase(user.username),className:\"w-full rounded-full bg-gold text-navy font-semibold py-2 hover:bg-gold-light transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4 rotate-180\"}),\"\\u05EA\\u05D9\\u05E7 \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleExportCase,className:\"w-full rounded-full border border-gold text-gold py-2 hover:bg-gold/10 transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"\\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05D9\\u05E7\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleImportClick,className:\"w-full rounded-full bg-navy text-pearl py-2 hover:bg-navy/80 transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4\"}),\"\\u05D8\\u05E2\\u05DF \\u05EA\\u05D9\\u05E7\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleImportFile,className:\"hidden\",accept:\".json\"}),isAdmin&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAdminDashboard(true),className:\"w-full rounded-full bg-navy text-gold py-2 hover:bg-navy/70 transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(LayoutDashboard,{className:\"w-4 h-4\"}),\"\\u05D3\\u05E9\\u05D1\\u05D5\\u05E8\\u05D3 \\u05DE\\u05E9\\u05E8\\u05D3\\u05D9\"]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 bg-pearl overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden px-6 py-4 space-y-3 border-b border-pearl\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3 text-sm\",children:primaryNavigation.map(item=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveStep(item.step),className:\"rounded-xl border px-3 py-2 flex items-center justify-center gap-2 \".concat(activeStep===item.step?'border-gold text-navy bg-white':'border-pearl text-slate'),children:[/*#__PURE__*/_jsx(item.icon,{className:\"w-4 h-4\"}),item.label]},item.label))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-6 py-8 space-y-6\",children:[/*#__PURE__*/_jsxs(SectionCard,{title:\"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05EA\\u05D9\\u05E7\",subtitle:\"\\u05E9\\u05DC\\u05D9\\u05D8\\u05D4 \\u05DE\\u05DC\\u05D0\\u05D4 \\u05D1\\u05D1\\u05E1\\u05D9\\u05E1 \\u05D4\\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6 md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate\",children:\"\\u05E9\\u05DD \\u05D4\\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-2 w-full rounded-xl border border-pearl bg-pearl/60 px-3 py-2 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\",value:currentCase.name,onChange:e=>setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate flex flex-col gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E2\\u05D5\\\"\\u05D3 \\u05D0\\u05D7\\u05E8\\u05D0\\u05D9: \",currentCase.attorney]}),currentCase.attorney!==user.username&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-danger\",children:[\"\\u05DC\\u05E6\\u05E4\\u05D9\\u05D9\\u05D4 \\u05D1\\u05DC\\u05D1\\u05D3 \\u2013 \\u05D1\\u05D1\\u05E2\\u05DC\\u05D5\\u05EA \",currentCase.attorney]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-slate\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[saveStatus==='saving'&&'שומר...',saveStatus==='saved'&&'נשמר בהצלחה',saveStatus==='error'&&'שמירה נכשלה',saveStatus==='idle'&&'מוכן לעריכה']}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveStep(prev=>Math.max(0,prev-1)),disabled:activeStep===0,className:\"rounded-full border border-gold px-4 py-2 text-xs font-semibold text-gold hover:bg-gold/10 transition disabled:opacity-40\",children:\"\\u05D7\\u05D6\\u05E8\\u05D4\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveStep(prev=>Math.min(4,prev+1)),disabled:activeStep===4,className:\"rounded-full bg-gold px-5 py-2 text-xs font-semibold text-navy flex items-center gap-2 hover:bg-gold-light transition disabled:opacity-40\",children:[activeStep===0?'התחל עבודה':'לשלב הבא',/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4\"})]})]})]})]}),activeStep===0&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05DC\\u05D5\\u05D7 \\u05D1\\u05E7\\u05E8\\u05D4 \\u05DB\\u05DC\\u05DC\\u05D9\",children:/*#__PURE__*/_jsx(CaseDashboard,{caseData:currentCase,navigateToStep:setActiveStep})}),activeStep===1&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05BE\\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\",subtitle:\"\\u05E8\\u05E7\\u05E2 \\u05E2\\u05D5\\u05D1\\u05D3\\u05EA\\u05D9 \\u05D5\\u05E2\\u05D9\\u05D1\\u05D5\\u05D3 \\u05D7\\u05D1\\u05D5\\u05EA\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-card border border-pearl bg-pearl/50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-semibold text-navy\",children:\"\\u05E8\\u05E7\\u05E2 \\u05E2\\u05D5\\u05D1\\u05D3\\u05EA\\u05D9 / \\u05E1\\u05D9\\u05DB\\u05D5\\u05DD \\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"summary-upload\",className:\"hidden\",accept:\".pdf,.doc,.docx,.txt\",onChange:handleSummaryFileUpload}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"summary-upload\",className:\"inline-flex cursor-pointer items-center gap-1 rounded-full border border-gold px-3 py-1 text-xs text-gold hover:bg-gold/10 transition\",children:[/*#__PURE__*/_jsx(UploadCloud,{className:\"w-3 h-3\"}),\"\\u05E6\\u05E8\\u05E3 \\u05E7\\u05D5\\u05D1\\u05E5\"]})]})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full rounded-2xl border border-pearl bg-white p-4 text-sm text-navy focus:border-gold focus:ring-1 focus:ring-gold outline-none transition h-32\",placeholder:\"\\u05D4\\u05D6\\u05DF \\u05DB\\u05D0\\u05DF \\u05D0\\u05EA \\u05D4\\u05E2\\u05D5\\u05D1\\u05D3\\u05D5\\u05EA \\u05D4\\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D5\\u05EA...\",value:currentCase.summary,onChange:e=>setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summary:e.target.value}))}),currentCase.summaryFiles&&currentCase.summaryFiles.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:currentCase.summaryFiles.map((file,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 rounded-full border border-pearl bg-white px-3 py-1 text-xs text-slate\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate max-w-[140px]\",children:file.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSummaryFile(file.name),className:\"text-danger hover:text-red-600\",children:\"\\xD7\"})]},idx))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-card border border-pearl bg-white p-4\",children:/*#__PURE__*/_jsx(LiabilityStep,{caseData:currentCase,updateCaseData:setCurrentCase})})]})}),activeStep===2&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\\u05D9 \\u05E0\\u05D6\\u05E7 \\u05DB\\u05E1\\u05E4\\u05D9\\u05D9\\u05DD\",children:/*#__PURE__*/_jsx(DamagesStep,{caseData:currentCase,updateCaseData:setCurrentCase})}),activeStep===3&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05E0\\u05D9\\u05DE\\u05D5\\u05E7\\u05D9\\u05DD \\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\\u05D9\\u05DD\",children:/*#__PURE__*/_jsx(ReasoningStep,{caseData:currentCase})}),activeStep===4&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05D3\\u05D5\\u05D7 \\u05DE\\u05E1\\u05DB\\u05DD\",children:/*#__PURE__*/_jsx(ReportStep,{caseData:currentCase})})]})]})]})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useAuth","createCase","apiCreateCase","listCases","apiListCases","updateCase","apiUpdateCase","LoginScreen","AdminDashboard","LiabilityStep","DamagesStep","ReasoningStep","ReportStep","CaseDashboard","FolderOpen","ChevronLeft","Shield","Activity","UploadCloud","FileText","LayoutDashboard","BookOpen","Download","Upload","Bell","UserCircle","Clock","Flag","BookMarked","jsx","_jsx","jsxs","_jsxs","createEmptyCase","attorney","id","Date","now","toString","name","toLocaleDateString","lastUpdated","toISOString","summary","summaryFiles","liability","issues","medicalRecordQuality","doctrines","precedents","expertsPlaintiff","expertsDefense","expertCourtOpinions","expertCourtStance","aggravatingFactors","mitigatingFactors","probability","probabilityRange","uncertainty","strengthsPlaintiff","weaknessesPlaintiff","strengthsDefense","weaknessesDefense","damages","dateOfBirth","gender","dateOfEvent","setFullYear","getFullYear","split","dateOfCalc","dateOfRetirement","ageAtInjury","currentAge","lifeExpectancy","wagePreInjury","wagePostInjury","permanentDisabilityMedical","permanentDisabilityFunctional","daysOfHospitalization","interestRate","heads","isActive","parameters","calculatedAmount","notes","App","user","logout","activeStep","setActiveStep","showAdminDashboard","setShowAdminDashboard","setCaseList","currentCaseId","setCurrentCaseId","currentCase","setCurrentCase","saveStatus","setSaveStatus","isLoadingCases","setIsLoadingCases","loadError","setLoadError","fileInputRef","saveTimeoutRef","resetStatusTimeoutRef","hydratingRef","isAdmin","role","cleanupClientState","current","clearTimeout","normalizeCaseData","record","attorneyFallback","safeData","data","_objectSpread","title","concat","handleCreateNewCase","attorneyName","template","created","prev","normalized","error","console","cancelled","bootstrap","ownCases","length","username","sorted","sort","a","b","updatedAt","getTime","primary","handleLogout","handleAdminEditCase","caseData","setTimeout","updated","filtered","filter","c","handleSummaryFileUpload","e","target","files","file","newFile","size","type","lastModified","removeSummaryFile","fileName","f","handleExportCase","dataStr","JSON","stringify","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","replace","body","appendChild","click","removeChild","handleImportClick","_fileInputRef$current","handleImportFile","_e$target$files","reader","FileReader","onload","event","_event$target","json","parse","result","alert","err","readAsText","value","SectionCard","_ref","subtitle","children","className","primaryNavigation","label","icon","step","supportNavigation","currentUserName","onEditCase","onLogout","dir","onClick","map","item","ref","onChange","accept","Math","max","disabled","min","navigateToStep","htmlFor","placeholder","idx","updateCaseData"],"sources":["C:/Office-Apps/LexMedical-App/src/App.tsx"],"sourcesContent":["import React, { ReactNode, useState, useEffect, useRef, useCallback } from 'react';\nimport { CaseData, AttachedFile, CaseRecord } from './types';\nimport { useAuth } from './context/AuthContext';\nimport {\n  createCase as apiCreateCase,\n  listCases as apiListCases,\n  updateCase as apiUpdateCase,\n} from './services/api';\nimport LoginScreen from './components/LoginScreen';\nimport AdminDashboard from './components/AdminDashboard';\nimport LiabilityStep from './components/LiabilityStep';\nimport DamagesStep from './components/DamagesStep';\nimport ReasoningStep from './components/ReasoningStep';\nimport ReportStep from './components/ReportStep';\nimport CaseDashboard from './components/CaseDashboard';\nimport {\n  FolderOpen,\n  ChevronLeft,\n  Shield,\n  Activity,\n  UploadCloud,\n  FileText,\n  LogOut,\n  LayoutDashboard,\n  BookOpen,\n  Download,\n  Upload,\n  Bell,\n  UserCircle,\n  Clock,\n  Flag,\n  BookMarked,\n} from 'lucide-react';\n\nconst createEmptyCase = (attorney: string): CaseData => ({\n  id: Date.now().toString(),\n  name: 'תיק חדש ' + new Date().toLocaleDateString('he-IL'),\n  attorney,\n  lastUpdated: new Date().toISOString(),\n  summary: '',\n  summaryFiles: [],\n  liability: {\n    issues: [],\n    medicalRecordQuality: 'Complete',\n    doctrines: [],\n    precedents: [],\n    expertsPlaintiff: [],\n    expertsDefense: [],\n    expertCourtOpinions: [], \n    expertCourtStance: 'None', \n    aggravatingFactors: 2,\n    mitigatingFactors: 2,\n    probability: 50,\n    probabilityRange: [40, 60],\n    uncertainty: 'Medium',\n    strengthsPlaintiff: [''],\n    weaknessesPlaintiff: [''],\n    strengthsDefense: [''],\n    weaknessesDefense: ['']\n  },\n  damages: {\n    dateOfBirth: '1990-01-01', \n    gender: 'Male',\n    dateOfEvent: new Date(new Date().setFullYear(new Date().getFullYear() - 2)).toISOString().split('T')[0], \n    dateOfCalc: new Date().toISOString().split('T')[0],\n    dateOfRetirement: '',\n    ageAtInjury: 0, \n    currentAge: 0, \n    lifeExpectancy: 82, \n    wagePreInjury: 10000,\n    wagePostInjury: 0,\n    permanentDisabilityMedical: 10,\n    permanentDisabilityFunctional: 10,\n    daysOfHospitalization: 0,\n    interestRate: 3,\n    heads: [\n      { id: '1', name: 'הפסד שכר לעבר', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '2', name: 'הפסד שכר לעתיד', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '3', name: 'הפסד פנסיה ותנאים סוציאליים', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '4', name: 'כאב וסבל', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '5', name: 'עזרת צד ג׳ לעבר', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '6', name: 'עזרת צד ג׳ לעתיד', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '7', name: 'הוצאות רפואיות', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '8', name: 'ניידות ונסיעות', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n    ],\n    precedents: []\n  }\n});\n\nconst App: React.FC = () => {\n  const { user, logout } = useAuth();\n  const [activeStep, setActiveStep] = useState<number>(0);\n  const [showAdminDashboard, setShowAdminDashboard] = useState(false);\n  const [, setCaseList] = useState<CaseRecord[]>([]);\n  const [currentCaseId, setCurrentCaseId] = useState<string | null>(null);\n  const [currentCase, setCurrentCase] = useState<CaseData | null>(null);\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'saved' | 'error'>('idle');\n  const [isLoadingCases, setIsLoadingCases] = useState(false);\n  const [loadError, setLoadError] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const saveTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const resetStatusTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const hydratingRef = useRef(false);\n\n  const isAdmin = user?.role === 'admin';\n\n  const cleanupClientState = () => {\n    setCaseList([]);\n    setCurrentCaseId(null);\n    setCurrentCase(null);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n    setSaveStatus('idle');\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n      saveTimeoutRef.current = null;\n    }\n    if (resetStatusTimeoutRef.current) {\n      clearTimeout(resetStatusTimeoutRef.current);\n      resetStatusTimeoutRef.current = null;\n    }\n  };\n\n  const normalizeCaseData = (record: CaseRecord, attorneyFallback: string): CaseData => {\n    const safeData = (record.data as CaseData) || createEmptyCase(attorneyFallback);\n    return {\n      ...createEmptyCase(attorneyFallback),\n      ...safeData,\n      id: record.id,\n      name: safeData.name || record.title || `תיק ${new Date().toLocaleDateString('he-IL')}`,\n      attorney: safeData.attorney || attorneyFallback,\n    };\n  };\n\n  const handleCreateNewCase = useCallback(async (attorneyName: string) => {\n    if (!user) return;\n    setIsLoadingCases(true);\n    setLoadError(null);\n    try {\n      const template = createEmptyCase(attorneyName);\n      const created = await apiCreateCase({ title: template.name, data: template });\n      setCaseList((prev) => [created, ...prev]);\n      const normalized = { ...template, id: created.id };\n      setCurrentCaseId(created.id);\n      hydratingRef.current = true;\n      setCurrentCase(normalized);\n      setActiveStep(0);\n    } catch (error) {\n      console.error(error);\n      setLoadError('יצירת תיק חדש נכשלה.');\n    } finally {\n      setIsLoadingCases(false);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    let cancelled = false;\n    const bootstrap = async () => {\n      if (!user) {\n        cleanupClientState();\n        return;\n      }\n      setIsLoadingCases(true);\n      setLoadError(null);\n      try {\n        const { ownCases } = await apiListCases();\n        if (cancelled) return;\n        setCaseList(ownCases);\n        setShowAdminDashboard(isAdmin);\n        if (!ownCases.length) {\n          await handleCreateNewCase(user.username);\n          return;\n        }\n        const sorted = [...ownCases].sort(\n          (a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime(),\n        );\n        const primary = sorted[0];\n        setCurrentCaseId(primary.id);\n        hydratingRef.current = true;\n        setCurrentCase(normalizeCaseData(primary, user.username));\n        setActiveStep(0);\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setLoadError('טעינת התיקים נכשלה. נסה שוב בעוד רגע.');\n        }\n      } finally {\n        if (!cancelled) {\n          setIsLoadingCases(false);\n        }\n      }\n    };\n\n    bootstrap();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [user, isAdmin, handleCreateNewCase]);\n\n  const handleLogout = () => {\n    logout();\n    cleanupClientState();\n  };\n\n  const handleAdminEditCase = (caseData: CaseData) => {\n    setCurrentCaseId(caseData.id);\n    hydratingRef.current = true;\n    setCurrentCase(caseData);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n  };\n\n  useEffect(() => {\n    if (!user || !currentCaseId || !currentCase || showAdminDashboard) return;\n    if (hydratingRef.current) {\n      hydratingRef.current = false;\n      return;\n    }\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n    }\n    setSaveStatus('saving');\n    saveTimeoutRef.current = setTimeout(async () => {\n      try {\n        const updated = await apiUpdateCase(currentCaseId, {\n          title: currentCase.name,\n          data: currentCase,\n        });\n        setCaseList((prev) => {\n          const filtered = prev.filter((c) => c.id !== updated.id);\n          return [updated, ...filtered];\n        });\n        setSaveStatus('saved');\n        if (resetStatusTimeoutRef.current) {\n          clearTimeout(resetStatusTimeoutRef.current);\n        }\n        resetStatusTimeoutRef.current = setTimeout(() => setSaveStatus('idle'), 1500);\n      } catch (error) {\n        console.error(error);\n        setSaveStatus('error');\n      }\n    }, 1200);\n\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n        saveTimeoutRef.current = null;\n      }\n    };\n  }, [currentCase, currentCaseId, user, showAdminDashboard]);\n\n  const handleSummaryFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0] && currentCase) {\n      const file = e.target.files[0];\n      const newFile: AttachedFile = {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        lastModified: file.lastModified\n      };\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: [...(currentCase.summaryFiles || []), newFile]\n      });\n    }\n  };\n\n  const removeSummaryFile = (fileName: string) => {\n    if (currentCase) {\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: currentCase.summaryFiles.filter((f: AttachedFile) => f.name !== fileName)\n      });\n    }\n  };\n\n  const handleExportCase = () => {\n    if (!currentCase) return;\n    const dataStr = JSON.stringify(currentCase, null, 2);\n    const blob = new Blob([dataStr], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `lexmedical_${currentCase.name.replace(/\\s+/g, '_')}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleImportClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleImportFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try {\n        const json = JSON.parse(event.target?.result as string);\n        if (json.id && json.liability && json.damages) {\n          hydratingRef.current = true;\n          setCurrentCase(json);\n          alert('התיק נטען בהצלחה! השינויים יישמרו אוטומטית.');\n          setActiveStep(0);\n        } else {\n          alert('קובץ לא תקין.');\n        }\n      } catch (err) {\n        alert('שגיאה בטעינת הקובץ');\n      }\n    };\n    reader.readAsText(file);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n\n  const SectionCard: React.FC<{ title: string; subtitle?: string; children: ReactNode }> = ({\n    title,\n    subtitle,\n    children,\n  }) => (\n    <section className=\"rounded-card border border-pearl bg-white shadow-card-xl\">\n      <div className=\"h-1.5 w-full rounded-t-card bg-navy\" />\n      <div className=\"p-6\">\n        <div className=\"flex items-center justify-between text-navy\">\n          <h2 className=\"text-lg font-semibold\">{title}</h2>\n          {subtitle && <span className=\"text-xs text-slate\">{subtitle}</span>}\n        </div>\n        <div className=\"mt-2 w-12 border-b-2 border-gold rounded-full\" />\n        <div className=\"mt-6 text-slate\">{children}</div>\n      </div>\n    </section>\n  );\n\n  const primaryNavigation = [\n    { label: 'התיקים שלי', icon: FolderOpen, step: 0 },\n    { label: 'ניתוח רפואי', icon: Shield, step: 1 },\n    { label: 'תחשיבי נזק', icon: Activity, step: 2 },\n    { label: 'נימוקים משפטיים', icon: BookOpen, step: 3 },\n    { label: 'דוח מסכם', icon: FileText, step: 4 },\n  ];\n\n  const supportNavigation = [\n    { label: 'ציר זמן', icon: Clock },\n    { label: 'איכות / דגלים', icon: Flag },\n    { label: 'מאמרים', icon: BookMarked },\n  ];\n\n  if (!user) {\n    return <LoginScreen />;\n  }\n\n  if (showAdminDashboard) {\n    return (\n      <AdminDashboard\n        currentUserName={user.username}\n        onEditCase={handleAdminEditCase}\n        onLogout={handleLogout}\n      />\n    );\n  }\n\n  if (isLoadingCases || !currentCase) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-pearl text-slate\" dir=\"rtl\">\n        <div className=\"rounded-card border border-pearl bg-white px-6 py-4 shadow-card-xl text-sm\">\n          {loadError || 'טוען תיקים מהשרת...'}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pearl text-navy\" dir=\"rtl\">\n      <div className=\"flex flex-col min-h-screen\">\n        <header className=\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-xl font-semibold brand-mark\">LexMedical</span>\n            <span className=\"text-xs text-gold-light hidden md:inline\">מערכת משפטית־רפואית פנימית</span>\n          </div>\n          <div className=\"flex items-center gap-6 text-sm\">\n            <button className=\"relative text-gold-light hover:text-gold transition\">\n              <Bell className=\"w-5 h-5\" />\n            </button>\n            <div className=\"flex items-center gap-2 text-pearl\">\n              <UserCircle className=\"w-6 h-6 text-gold-light\" />\n              <span>{user.username}</span>\n            </div>\n            <button onClick={handleLogout} className=\"text-gold hover:text-gold-light transition\">\n              התנתק\n            </button>\n          </div>\n        </header>\n\n        <div className=\"flex flex-1\">\n          <aside className=\"hidden md:flex w-72 bg-navy-dark text-pearl flex-col border-l border-navy\">\n            <div className=\"px-6 py-6 border-b border-navy\">\n              <p className=\"text-xs uppercase tracking-widest text-slate-light\">ניווט</p>\n              <p className=\"text-2xl font-semibold text-white mt-2\">שליטה מלאה בתיק</p>\n            </div>\n            <nav className=\"flex-1 overflow-y-auto px-4 py-6 space-y-8\">\n              <div>\n                <p className=\"text-xs uppercase text-slate-light mb-3\">ניהול תיק</p>\n                <div className=\"space-y-2\">\n                  {primaryNavigation.map((item) => {\n                    const isActive = activeStep === item.step;\n                    return (\n                      <button\n                        key={item.label}\n                        onClick={() => setActiveStep(item.step)}\n                        className={`w-full flex items-center justify-between rounded-xl px-3 py-3 text-sm transition ${\n                          isActive\n                            ? 'bg-navy text-gold border-r-4 border-gold'\n                            : 'bg-transparent text-pearl hover:bg-navy/60'\n                        }`}\n                      >\n                        <span className=\"flex items-center gap-3\">\n                          <item.icon className=\"w-4 h-4\" />\n                          {item.label}\n                        </span>\n                        {isActive && <span className=\"text-[10px] uppercase tracking-widest text-gold-light\">פעיל</span>}\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n              <div>\n                <p className=\"text-xs uppercase text-slate-light mb-3\">כלי עזר</p>\n                <div className=\"space-y-2\">\n                  {supportNavigation.map((item) => (\n                    <button\n                      key={item.label}\n                      type=\"button\"\n                      className=\"w-full flex items-center justify-between rounded-xl px-3 py-3 text-sm text-slate-light bg-navy/30 border border-transparent cursor-not-allowed\"\n                    >\n                      <span className=\"flex items-center gap-3 opacity-60\">\n                        <item.icon className=\"w-4 h-4\" />\n                        {item.label}\n                      </span>\n                      <span className=\"text-[10px] text-slate-light\">בקרוב</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </nav>\n            <div className=\"px-4 py-6 border-t border-navy space-y-3 text-sm\">\n              <button\n                onClick={() => handleCreateNewCase(user.username)}\n                className=\"w-full rounded-full bg-gold text-navy font-semibold py-2 hover:bg-gold-light transition flex items-center justify-center gap-2\"\n              >\n                <Upload className=\"w-4 h-4 rotate-180\" />\n                תיק חדש\n              </button>\n              <button\n                onClick={handleExportCase}\n                className=\"w-full rounded-full border border-gold text-gold py-2 hover:bg-gold/10 transition flex items-center justify-center gap-2\"\n              >\n                <Download className=\"w-4 h-4\" />\n                שמור תיק\n              </button>\n              <button\n                onClick={handleImportClick}\n                className=\"w-full rounded-full bg-navy text-pearl py-2 hover:bg-navy/80 transition flex items-center justify-center gap-2\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                טען תיק\n              </button>\n              <input type=\"file\" ref={fileInputRef} onChange={handleImportFile} className=\"hidden\" accept=\".json\" />\n              {isAdmin && (\n                <button\n                  onClick={() => setShowAdminDashboard(true)}\n                  className=\"w-full rounded-full bg-navy text-gold py-2 hover:bg-navy/70 transition flex items-center justify-center gap-2\"\n                >\n                  <LayoutDashboard className=\"w-4 h-4\" />\n                  דשבורד משרדי\n                </button>\n              )}\n            </div>\n          </aside>\n\n          <main className=\"flex-1 bg-pearl overflow-y-auto\">\n            <div className=\"md:hidden px-6 py-4 space-y-3 border-b border-pearl\">\n              <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                {primaryNavigation.map((item) => (\n                  <button\n                    key={item.label}\n                    onClick={() => setActiveStep(item.step)}\n                    className={`rounded-xl border px-3 py-2 flex items-center justify-center gap-2 ${\n                      activeStep === item.step ? 'border-gold text-navy bg-white' : 'border-pearl text-slate'\n                    }`}\n                  >\n                    <item.icon className=\"w-4 h-4\" />\n                    {item.label}\n                  </button>\n                ))}\n              </div>\n            </div>\n            <div className=\"max-w-6xl mx-auto px-6 py-8 space-y-6\">\n              <SectionCard title=\"פרטי תיק\" subtitle=\"שליטה מלאה בבסיס הנתונים\">\n                <div className=\"grid gap-6 md:grid-cols-2\">\n                  <div>\n                    <label className=\"text-xs font-semibold text-slate\">שם התיק</label>\n                    <input\n                      className=\"mt-2 w-full rounded-xl border border-pearl bg-pearl/60 px-3 py-2 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\"\n                      value={currentCase.name}\n                      onChange={(e) => setCurrentCase({ ...currentCase, name: e.target.value })}\n                    />\n                  </div>\n                  <div className=\"text-sm text-slate flex flex-col gap-2\">\n                    <span>עו\"ד אחראי: {currentCase.attorney}</span>\n                    {currentCase.attorney !== user.username && (\n                      <span className=\"text-xs text-danger\">\n                        לצפייה בלבד – בבעלות {currentCase.attorney}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <div className=\"mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-slate\">\n                  <span>\n                    {saveStatus === 'saving' && 'שומר...'}\n                    {saveStatus === 'saved' && 'נשמר בהצלחה'}\n                    {saveStatus === 'error' && 'שמירה נכשלה'}\n                    {saveStatus === 'idle' && 'מוכן לעריכה'}\n                  </span>\n                  <div className=\"flex flex-wrap gap-3\">\n                    <button\n                      onClick={() => setActiveStep((prev) => Math.max(0, prev - 1))}\n                      disabled={activeStep === 0}\n                      className=\"rounded-full border border-gold px-4 py-2 text-xs font-semibold text-gold hover:bg-gold/10 transition disabled:opacity-40\"\n                    >\n                      חזרה\n                    </button>\n                    <button\n                      onClick={() => setActiveStep((prev) => Math.min(4, prev + 1))}\n                      disabled={activeStep === 4}\n                      className=\"rounded-full bg-gold px-5 py-2 text-xs font-semibold text-navy flex items-center gap-2 hover:bg-gold-light transition disabled:opacity-40\"\n                    >\n                      {activeStep === 0 ? 'התחל עבודה' : 'לשלב הבא'}\n                      <ChevronLeft className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              </SectionCard>\n\n              {activeStep === 0 && (\n                <SectionCard title=\"לוח בקרה כללי\">\n                  <CaseDashboard caseData={currentCase} navigateToStep={setActiveStep} />\n                </SectionCard>\n              )}\n\n              {activeStep === 1 && (\n                <SectionCard title=\"ניתוח רפואי־משפטי\" subtitle=\"רקע עובדתי ועיבוד חבות\">\n                  <div className=\"space-y-6\">\n                    <div className=\"rounded-card border border-pearl bg-pearl/50 p-4\">\n                      <div className=\"flex flex-col gap-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <label className=\"text-sm font-semibold text-navy\">רקע עובדתי / סיכום תיק</label>\n                          <div>\n                            <input\n                              type=\"file\"\n                              id=\"summary-upload\"\n                              className=\"hidden\"\n                              accept=\".pdf,.doc,.docx,.txt\"\n                              onChange={handleSummaryFileUpload}\n                            />\n                            <label\n                              htmlFor=\"summary-upload\"\n                              className=\"inline-flex cursor-pointer items-center gap-1 rounded-full border border-gold px-3 py-1 text-xs text-gold hover:bg-gold/10 transition\"\n                            >\n                              <UploadCloud className=\"w-3 h-3\" />\n                              צרף קובץ\n                            </label>\n                          </div>\n                        </div>\n                        <textarea\n                          className=\"w-full rounded-2xl border border-pearl bg-white p-4 text-sm text-navy focus:border-gold focus:ring-1 focus:ring-gold outline-none transition h-32\"\n                          placeholder=\"הזן כאן את העובדות המעובדות...\"\n                          value={currentCase.summary}\n                          onChange={(e) => setCurrentCase({ ...currentCase, summary: e.target.value })}\n                        />\n                        {currentCase.summaryFiles && currentCase.summaryFiles.length > 0 && (\n                          <div className=\"flex flex-wrap gap-2\">\n                            {currentCase.summaryFiles.map((file: AttachedFile, idx: number) => (\n                              <div\n                                key={idx}\n                                className=\"flex items-center gap-2 rounded-full border border-pearl bg-white px-3 py-1 text-xs text-slate\"\n                              >\n                                <FileText className=\"w-3 h-3\" />\n                                <span className=\"truncate max-w-[140px]\">{file.name}</span>\n                                <button\n                                  onClick={() => removeSummaryFile(file.name)}\n                                  className=\"text-danger hover:text-red-600\"\n                                >\n                                  ×\n                                </button>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"rounded-card border border-pearl bg-white p-4\">\n                      <LiabilityStep caseData={currentCase} updateCaseData={setCurrentCase} />\n                    </div>\n                  </div>\n                </SectionCard>\n              )}\n\n              {activeStep === 2 && (\n                <SectionCard title=\"תחשיבי נזק כספיים\">\n                  <DamagesStep caseData={currentCase} updateCaseData={setCurrentCase} />\n                </SectionCard>\n              )}\n\n              {activeStep === 3 && (\n                <SectionCard title=\"נימוקים משפטיים\">\n                  <ReasoningStep caseData={currentCase} />\n                </SectionCard>\n              )}\n\n              {activeStep === 4 && (\n                <SectionCard title=\"דוח מסכם\">\n                  <ReportStep caseData={currentCase} />\n                </SectionCard>\n              )}\n            </div>\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}