{"ast":null,"code":"export const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:4000/api';\nlet authToken = null;\nexport const setAuthToken = token => {\n  authToken = token;\n};\nconst withAuth = init => {\n  const headers = new Headers((init === null || init === void 0 ? void 0 : init.headers) || {});\n  if (authToken) {\n    headers.set('Authorization', `Bearer ${authToken}`);\n  }\n  return {\n    ...init,\n    headers\n  };\n};\nconst request = async (path, init) => {\n  const response = await fetch(`${API_BASE_URL}${path}`, withAuth(init));\n  if (!response.ok) {\n    const errorText = await response.text().catch(() => '');\n    throw new Error(errorText || 'request_failed');\n  }\n  if (response.status === 204) {\n    return undefined;\n  }\n  return await response.json();\n};\nexport { request as apiRequest };\nexport const isApiConfigured = () => Boolean(API_BASE_URL);\nexport const uploadChapterPdf = async (file, options = {}) => {\n  var _options$docType, _options$tags;\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('docType', (_options$docType = options.docType) !== null && _options$docType !== void 0 ? _options$docType : 'chapter');\n  if ((_options$tags = options.tags) !== null && _options$tags !== void 0 && _options$tags.length) {\n    formData.append('tags', options.tags.join(','));\n  }\n  if (options.metadata) {\n    formData.append('metadata', JSON.stringify(options.metadata));\n  }\n  const response = await fetch(`${API_BASE_URL}/ingest/pdf`, withAuth({\n    method: 'POST',\n    body: formData\n  }));\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(errorText || 'api-upload-failed');\n  }\n  const data = await response.json();\n  return data;\n};\nexport const listCases = async () => {\n  var _payload$ownCases, _payload$otherCases;\n  const payload = await request('/cases', {\n    method: 'GET'\n  });\n  return {\n    ownCases: (_payload$ownCases = payload.ownCases) !== null && _payload$ownCases !== void 0 ? _payload$ownCases : [],\n    otherCases: (_payload$otherCases = payload.otherCases) !== null && _payload$otherCases !== void 0 ? _payload$otherCases : []\n  };\n};\nexport const createCase = async data => {\n  const payload = await request('/cases', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  return payload.case;\n};\nexport const getCase = async id => {\n  const payload = await request(`/cases/${id}`, {\n    method: 'GET'\n  });\n  return payload.case;\n};\nexport const updateCase = async (id, data) => {\n  const payload = await request(`/cases/${id}`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  return payload.case;\n};\nexport const updateCaseMetadata = async (id, data) => {\n  const payload = await request(`/cases/${id}/metadata`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  });\n  return payload.case;\n};\nexport const archiveCase = async id => {\n  const payload = await request(`/cases/${id}/archive`, {\n    method: 'POST'\n  });\n  return payload.case;\n};\nexport const renewCase = async id => {\n  const payload = await request(`/cases/${id}/renew`, {\n    method: 'POST'\n  });\n  return payload.case;\n};\nexport const deleteCase = async id => {\n  await request(`/cases/${id}`, {\n    method: 'DELETE'\n  });\n};\nexport const exportCaseFile = async (id, format) => {\n  const response = await fetch(`${API_BASE_URL}/cases/${id}/export`, withAuth({\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      format\n    })\n  }));\n  if (!response.ok) {\n    const text = await response.text();\n    throw new Error(text || 'export_failed');\n  }\n  return response.blob();\n};\nexport const listNotifications = async () => {\n  var _payload$notification;\n  const payload = await request('/notifications', {\n    method: 'GET'\n  });\n  return (_payload$notification = payload.notifications) !== null && _payload$notification !== void 0 ? _payload$notification : [];\n};\nexport const markNotificationRead = async id => {\n  await request(`/notifications/${id}/read`, {\n    method: 'POST'\n  });\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_BASE_URL","authToken","setAuthToken","token","withAuth","init","headers","Headers","set","request","path","response","fetch","ok","errorText","text","catch","Error","status","undefined","json","apiRequest","isApiConfigured","Boolean","uploadChapterPdf","file","options","_options$docType","_options$tags","formData","FormData","append","docType","tags","length","join","metadata","JSON","stringify","method","body","data","listCases","_payload$ownCases","_payload$otherCases","payload","ownCases","otherCases","createCase","case","getCase","id","updateCase","updateCaseMetadata","archiveCase","renewCase","deleteCase","exportCaseFile","format","blob","listNotifications","_payload$notification","notifications","markNotificationRead"],"sources":["C:/Office-Apps/LexMedical-App/src/services/api.ts"],"sourcesContent":["import { CaseData, CaseRecord, CaseSummaryRecord, IngestedDocument, NotificationRecord } from '../types';\r\n\r\nexport const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:4000/api';\r\n\r\ninterface UploadChapterOptions {\r\n  docType?: 'chapter' | 'precedent';\r\n  tags?: string[];\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\nlet authToken: string | null = null;\r\n\r\nexport const setAuthToken = (token: string | null): void => {\r\n  authToken = token;\r\n};\r\n\r\nconst withAuth = (init?: RequestInit): RequestInit => {\r\n  const headers = new Headers(init?.headers || {});\r\n  if (authToken) {\r\n    headers.set('Authorization', `Bearer ${authToken}`);\r\n  }\r\n  return {\r\n    ...init,\r\n    headers,\r\n  };\r\n};\r\n\r\nconst request = async <T>(path: string, init?: RequestInit): Promise<T> => {\r\n  const response = await fetch(`${API_BASE_URL}${path}`, withAuth(init));\r\n  if (!response.ok) {\r\n    const errorText = await response.text().catch(() => '');\r\n    throw new Error(errorText || 'request_failed');\r\n  }\r\n  if (response.status === 204) {\r\n    return undefined as T;\r\n  }\r\n  return (await response.json()) as T;\r\n};\r\n\r\nexport { request as apiRequest };\r\n\r\nexport const isApiConfigured = (): boolean => Boolean(API_BASE_URL);\r\n\r\nexport const uploadChapterPdf = async (file: File, options: UploadChapterOptions = {}): Promise<IngestedDocument> => {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  formData.append('docType', options.docType ?? 'chapter');\r\n  if (options.tags?.length) {\r\n    formData.append('tags', options.tags.join(','));\r\n  }\r\n  if (options.metadata) {\r\n    formData.append('metadata', JSON.stringify(options.metadata));\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}/ingest/pdf`, withAuth({ method: 'POST', body: formData }));\r\n\r\n  if (!response.ok) {\r\n    const errorText = await response.text();\r\n    throw new Error(errorText || 'api-upload-failed');\r\n  }\r\n\r\n  const data = (await response.json()) as IngestedDocument;\r\n  return data;\r\n};\r\n\r\nexport interface CaseListResponse {\r\n  ownCases: CaseRecord[];\r\n  otherCases: CaseSummaryRecord[];\r\n}\r\n\r\nexport const listCases = async (): Promise<CaseListResponse> => {\r\n  const payload = await request<CaseListResponse>('/cases', { method: 'GET' });\r\n  return {\r\n    ownCases: payload.ownCases ?? [],\r\n    otherCases: payload.otherCases ?? [],\r\n  };\r\n};\r\n\r\nexport const createCase = async (data: { title: string; data: CaseData }): Promise<CaseRecord> => {\r\n  const payload = await request<{ case: CaseRecord }>('/cases', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return payload.case;\r\n};\r\n\r\nexport const getCase = async (id: string): Promise<CaseRecord> => {\r\n  const payload = await request<{ case: CaseRecord }>(`/cases/${id}`, { method: 'GET' });\r\n  return payload.case;\r\n};\r\n\r\nexport const updateCase = async (\r\n  id: string,\r\n  data: { title?: string; data?: CaseData },\r\n): Promise<CaseRecord> => {\r\n  const payload = await request<{ case: CaseRecord }>(`/cases/${id}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return payload.case;\r\n};\r\n\r\nexport const updateCaseMetadata = async (id: string, data: { title?: string; topicSummary?: string }): Promise<CaseRecord> => {\r\n  const payload = await request<{ case: CaseRecord }>(`/cases/${id}/metadata`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return payload.case;\r\n};\r\n\r\nexport const archiveCase = async (id: string): Promise<CaseRecord> => {\r\n  const payload = await request<{ case: CaseRecord }>(`/cases/${id}/archive`, { method: 'POST' });\r\n  return payload.case;\r\n};\r\n\r\nexport const renewCase = async (id: string): Promise<CaseRecord> => {\r\n  const payload = await request<{ case: CaseRecord }>(`/cases/${id}/renew`, { method: 'POST' });\r\n  return payload.case;\r\n};\r\n\r\nexport const deleteCase = async (id: string): Promise<void> => {\r\n  await request<void>(`/cases/${id}`, { method: 'DELETE' });\r\n};\r\n\r\nexport const exportCaseFile = async (id: string, format: 'pdf' | 'json'): Promise<Blob> => {\r\n  const response = await fetch(`${API_BASE_URL}/cases/${id}/export`, withAuth({\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ format }),\r\n  }));\r\n  if (!response.ok) {\r\n    const text = await response.text();\r\n    throw new Error(text || 'export_failed');\r\n  }\r\n  return response.blob();\r\n};\r\n\r\nexport const listNotifications = async (): Promise<NotificationRecord[]> => {\r\n  const payload = await request<{ notifications: NotificationRecord[] }>('/notifications', { method: 'GET' });\r\n  return payload.notifications ?? [];\r\n};\r\n\r\nexport const markNotificationRead = async (id: string): Promise<void> => {\r\n  await request<void>(`/notifications/${id}/read`, { method: 'POST' });\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}