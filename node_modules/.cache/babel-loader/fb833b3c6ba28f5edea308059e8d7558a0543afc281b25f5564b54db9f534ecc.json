{"ast":null,"code":"import _objectSpread from\"C:/Office-Apps/LexMedical-App/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import{useAuth}from'./context/AuthContext';import{createCase as apiCreateCase,listCases as apiListCases,updateCase as apiUpdateCase}from'./services/api';import LoginScreen from'./components/LoginScreen';import AdminDashboard from'./components/AdminDashboard';import LiabilityStep from'./components/LiabilityStep';import DamagesStep from'./components/DamagesStep';import ReasoningStep from'./components/ReasoningStep';import ReportStep from'./components/ReportStep';import CaseDashboard from'./components/CaseDashboard';import{FolderOpen,ChevronLeft,Shield,Activity,UploadCloud,FileText,LayoutDashboard,BookOpen,Download,Upload,Bell,UserCircle}from'lucide-react';import ContextRibbon from'./components/ContextRibbon';import LegalDisclaimer from'./components/LegalDisclaimer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const createEmptyCase=attorney=>({id:Date.now().toString(),name:'תיק חדש '+new Date().toLocaleDateString('he-IL'),attorney,lastUpdated:new Date().toISOString(),summary:'',summaryFiles:[],liability:{issues:[],medicalRecordQuality:'Complete',doctrines:[],precedents:[],expertsPlaintiff:[],expertsDefense:[],expertCourtOpinions:[],expertCourtStance:'None',aggravatingFactors:2,mitigatingFactors:2,probability:50,probabilityRange:[40,60],uncertainty:'Medium',strengthsPlaintiff:[''],weaknessesPlaintiff:[''],strengthsDefense:[''],weaknessesDefense:['']},damages:{dateOfBirth:'1990-01-01',gender:'Male',dateOfEvent:new Date(new Date().setFullYear(new Date().getFullYear()-2)).toISOString().split('T')[0],dateOfCalc:new Date().toISOString().split('T')[0],dateOfRetirement:'',ageAtInjury:0,currentAge:0,lifeExpectancy:82,wagePreInjury:10000,wagePostInjury:0,permanentDisabilityMedical:10,permanentDisabilityFunctional:10,daysOfHospitalization:0,interestRate:3,heads:[{id:'1',name:'הפסד שכר לעבר',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'2',name:'הפסד שכר לעתיד',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'3',name:'הפסד פנסיה ותנאים סוציאליים',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'4',name:'כאב וסבל',isActive:true,parameters:{},calculatedAmount:0,notes:''},{id:'5',name:'עזרת צד ג׳ לעבר',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'6',name:'עזרת צד ג׳ לעתיד',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'7',name:'הוצאות רפואיות',isActive:false,parameters:{},calculatedAmount:0,notes:''},{id:'8',name:'ניידות ונסיעות',isActive:false,parameters:{},calculatedAmount:0,notes:''}],precedents:[]}});const App=()=>{var _currentCaseRecord$is;const{user,logout}=useAuth();const[activeStep,setActiveStep]=useState(0);const[showAdminDashboard,setShowAdminDashboard]=useState(false);const[caseList,setCaseList]=useState([]);const[currentCaseId,setCurrentCaseId]=useState(null);const[currentCase,setCurrentCase]=useState(null);const[saveStatus,setSaveStatus]=useState('idle');const[isLoadingCases,setIsLoadingCases]=useState(false);const[loadError,setLoadError]=useState(null);const[caseBanner,setCaseBanner]=useState(null);const fileInputRef=useRef(null);const saveTimeoutRef=useRef(null);const resetStatusTimeoutRef=useRef(null);const hydratingRef=useRef(false);const isAdmin=(user===null||user===void 0?void 0:user.role)==='admin';const cleanupClientState=()=>{setCaseList([]);setCurrentCaseId(null);setCurrentCase(null);setShowAdminDashboard(false);setActiveStep(0);setSaveStatus('idle');if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);saveTimeoutRef.current=null;}if(resetStatusTimeoutRef.current){clearTimeout(resetStatusTimeoutRef.current);resetStatusTimeoutRef.current=null;}};const normalizeCaseData=(record,attorneyFallback)=>{const safeData=record.data||createEmptyCase(attorneyFallback);return _objectSpread(_objectSpread(_objectSpread({},createEmptyCase(attorneyFallback)),safeData),{},{id:record.id,name:safeData.name||record.title||\"\\u05EA\\u05D9\\u05E7 \".concat(new Date().toLocaleDateString('he-IL')),attorney:safeData.attorney||attorneyFallback});};const handleCreateNewCase=useCallback(async attorneyName=>{if(!user)return;setIsLoadingCases(true);setLoadError(null);try{const template=createEmptyCase(attorneyName);const created=await apiCreateCase({title:template.name,data:template});setCaseList(prev=>[created,...prev]);const normalized=_objectSpread(_objectSpread({},template),{},{id:created.id});setCurrentCaseId(created.id);hydratingRef.current=true;setCurrentCase(normalized);setActiveStep(0);}catch(error){console.error(error);setLoadError('יצירת תיק חדש נכשלה.');}finally{setIsLoadingCases(false);}},[user]);useEffect(()=>{let cancelled=false;const bootstrap=async()=>{if(!user){cleanupClientState();return;}setIsLoadingCases(true);setLoadError(null);try{const{ownCases}=await apiListCases();if(cancelled)return;setCaseList(ownCases);setShowAdminDashboard(isAdmin);if(!ownCases.length){await handleCreateNewCase(user.username);return;}const sorted=[...ownCases].sort((a,b)=>new Date(b.updatedAt).getTime()-new Date(a.updatedAt).getTime());const primary=sorted[0];setCurrentCaseId(primary.id);hydratingRef.current=true;setCurrentCase(normalizeCaseData(primary,user.username));setActiveStep(0);}catch(error){console.error(error);if(!cancelled){setLoadError('טעינת התיקים נכשלה. נסה שוב בעוד רגע.');}}finally{if(!cancelled){setIsLoadingCases(false);}}};bootstrap();return()=>{cancelled=true;};},[user,isAdmin,handleCreateNewCase]);const handleLogout=()=>{logout();cleanupClientState();};const handleAdminEditCase=caseData=>{setCurrentCaseId(caseData.id);hydratingRef.current=true;setCurrentCase(caseData);setShowAdminDashboard(false);setActiveStep(0);};useEffect(()=>{if(!user||!currentCaseId||!currentCase||showAdminDashboard)return;if(hydratingRef.current){hydratingRef.current=false;return;}if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);}setSaveStatus('saving');saveTimeoutRef.current=setTimeout(async()=>{try{const updated=await apiUpdateCase(currentCaseId,{title:currentCase.name,data:currentCase});setCaseList(prev=>{const filtered=prev.filter(c=>c.id!==updated.id);return[updated,...filtered];});setSaveStatus('saved');if(resetStatusTimeoutRef.current){clearTimeout(resetStatusTimeoutRef.current);}resetStatusTimeoutRef.current=setTimeout(()=>setSaveStatus('idle'),1500);}catch(error){console.error(error);setSaveStatus('error');}},1200);return()=>{if(saveTimeoutRef.current){clearTimeout(saveTimeoutRef.current);saveTimeoutRef.current=null;}};},[currentCase,currentCaseId,user,showAdminDashboard]);const handleSummaryFileUpload=e=>{if(e.target.files&&e.target.files[0]&&currentCase){const file=e.target.files[0];const newFile={name:file.name,size:file.size,type:file.type,lastModified:file.lastModified};setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summaryFiles:[...(currentCase.summaryFiles||[]),newFile]}));}};const removeSummaryFile=fileName=>{if(currentCase){setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summaryFiles:currentCase.summaryFiles.filter(f=>f.name!==fileName)}));}};const handleExportCase=()=>{if(!currentCase)return;const dataStr=JSON.stringify(currentCase,null,2);const blob=new Blob([dataStr],{type:\"application/json\"});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"lexmedical_\".concat(currentCase.name.replace(/\\s+/g,'_'),\".json\");document.body.appendChild(link);link.click();document.body.removeChild(link);};const handleImportClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleImportFile=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;const reader=new FileReader();reader.onload=event=>{try{var _event$target;const json=JSON.parse((_event$target=event.target)===null||_event$target===void 0?void 0:_event$target.result);if(json.id&&json.liability&&json.damages){hydratingRef.current=true;setCurrentCase(json);setCaseBanner({type:'success',message:'התיק נטען בהצלחה. השינויים יישמרו אוטומטית.'});setActiveStep(0);}else{setCaseBanner({type:'error',message:'קובץ לא תקין. אנא השתמש בקובץ שהופק מהמערכת.'});}}catch(err){setCaseBanner({type:'error',message:'שגיאה בטעינת הקובץ. נסה שוב או פנה לתמיכה.'});}};reader.readAsText(file);if(fileInputRef.current)fileInputRef.current.value='';};const SectionCard=_ref=>{let{title,subtitle,children}=_ref;return/*#__PURE__*/_jsxs(\"section\",{className:\"rounded-card border border-pearl bg-white shadow-card-xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-1.5 w-full rounded-t-card bg-navy\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-navy\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:title}),subtitle&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate\",children:subtitle})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 w-12 border-b-2 border-gold rounded-full\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-slate\",children:children})]})]});};const primaryNavigation=[{label:'התיקים שלי',icon:FolderOpen,step:0},{label:'ניתוח רפואי',icon:Shield,step:1},{label:'תחשיבי נזק',icon:Activity,step:2},{label:'נימוקים משפטיים',icon:BookOpen,step:3},{label:'דוח מסכם',icon:FileText,step:4}];const currentCaseRecord=caseList.find(record=>record.id===currentCaseId);const isCaseReadOnly=currentCaseRecord?!((_currentCaseRecord$is=currentCaseRecord.isOwner)!==null&&_currentCaseRecord$is!==void 0?_currentCaseRecord$is:true):false;if(!user){return/*#__PURE__*/_jsx(LoginScreen,{});}if(showAdminDashboard){return/*#__PURE__*/_jsx(AdminDashboard,{currentUserName:user.username,onEditCase:handleAdminEditCase,onLogout:handleLogout});}if(isLoadingCases||!currentCase){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-pearl text-slate\",dir:\"rtl\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-card border border-pearl bg-white px-6 py-4 shadow-card-xl text-sm\",children:loadError||'טוען תיקים מהשרת...'})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-pearl text-navy\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col min-h-screen\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-semibold brand-mark\",children:\"LexMedical\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gold-light hidden md:inline\",children:\"\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA \\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\\u05EA\\u05BE\\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9\\u05EA\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6 text-sm\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"relative text-gold-light hover:text-gold transition\",\"aria-label\":\"\\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA \\u05DE\\u05E2\\u05E8\\u05DB\\u05EA\",children:/*#__PURE__*/_jsx(Bell,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-pearl\",children:[/*#__PURE__*/_jsx(UserCircle,{className:\"w-6 h-6 text-gold-light\"}),/*#__PURE__*/_jsx(\"span\",{children:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"text-gold hover:text-gold-light transition\",children:\"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"})]})]}),/*#__PURE__*/_jsx(ContextRibbon,{mode:isCaseReadOnly?'מצב קריאה בלבד':'מצב עריכת תיק פעיל',caseName:currentCase===null||currentCase===void 0?void 0:currentCase.name,status:currentCaseRecord===null||currentCaseRecord===void 0?void 0:currentCaseRecord.status,isReadOnly:isCaseReadOnly,onBack:isAdmin?()=>setShowAdminDashboard(true):()=>window.history.back()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"hidden md:flex w-72 bg-navy-dark text-pearl flex-col border-l border-navy\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-6 border-b border-navy\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-widest text-slate-light\",children:\"\\u05E0\\u05D9\\u05D5\\u05D5\\u05D8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-white mt-2\",children:\"\\u05E9\\u05DC\\u05D9\\u05D8\\u05D4 \\u05DE\\u05DC\\u05D0\\u05D4 \\u05D1\\u05EA\\u05D9\\u05E7\"})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 overflow-y-auto px-4 py-6 space-y-8\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase text-slate-light mb-3\",children:\"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:primaryNavigation.map(item=>{const isActive=activeStep===item.step;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveStep(item.step),className:\"w-full flex items-center justify-between rounded-xl px-3 py-3 text-sm transition \".concat(isActive?'bg-navy text-gold border-r-4 border-gold':'bg-transparent text-pearl hover:bg-navy/60'),children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(item.icon,{className:\"w-4 h-4\"}),item.label]}),isActive&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest text-gold-light\",children:\"\\u05E4\\u05E2\\u05D9\\u05DC\"})]},item.label);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-6 border-t border-navy space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCreateNewCase(user.username),className:\"w-full rounded-full bg-gold text-navy font-semibold py-2 hover:bg-gold-light transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4 rotate-180\"}),\"\\u05EA\\u05D9\\u05E7 \\u05D7\\u05D3\\u05E9\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleExportCase,className:\"w-full rounded-full border border-gold text-gold py-2 hover:bg-gold/10 transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"\\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05D9\\u05E7\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleImportClick,className:\"w-full rounded-full bg-navy text-pearl py-2 hover:bg-navy/80 transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4\"}),\"\\u05D8\\u05E2\\u05DF \\u05EA\\u05D9\\u05E7\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleImportFile,className:\"hidden\",accept:\".json\"}),isAdmin&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAdminDashboard(true),className:\"w-full rounded-full bg-navy text-gold py-2 hover:bg-navy/70 transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(LayoutDashboard,{className:\"w-4 h-4\"}),\"\\u05D3\\u05E9\\u05D1\\u05D5\\u05E8\\u05D3 \\u05DE\\u05E9\\u05E8\\u05D3\\u05D9\"]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 bg-pearl overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden px-6 py-4 space-y-3 border-b border-pearl\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3 text-sm\",children:primaryNavigation.map(item=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveStep(item.step),className:\"rounded-xl border px-3 py-2 flex items-center justify-center gap-2 \".concat(activeStep===item.step?'border-gold text-navy bg-white':'border-pearl text-slate'),children:[/*#__PURE__*/_jsx(item.icon,{className:\"w-4 h-4\"}),item.label]},item.label))})}),caseBanner&&/*#__PURE__*/_jsx(\"div\",{className:\"max-w-6xl mx-auto px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 \".concat(caseBanner.type==='error'?'state-block state-block--error':'state-block'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"state-block__title text-sm\",children:caseBanner.type==='error'?'ייבוא התיק נכשל':'ייבוא התיק הושלם'}),/*#__PURE__*/_jsx(\"p\",{className:\"state-block__description\",children:caseBanner.message})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-6 py-8 space-y-6\",children:[/*#__PURE__*/_jsxs(SectionCard,{title:\"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05EA\\u05D9\\u05E7\",subtitle:\"\\u05E9\\u05DC\\u05D9\\u05D8\\u05D4 \\u05DE\\u05DC\\u05D0\\u05D4 \\u05D1\\u05D1\\u05E1\\u05D9\\u05E1 \\u05D4\\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6 md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate\",children:\"\\u05E9\\u05DD \\u05D4\\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-2 w-full rounded-xl border border-pearl bg-pearl/60 px-3 py-2 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\",value:currentCase.name,onChange:e=>setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{name:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate flex flex-col gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u05E2\\u05D5\\\"\\u05D3 \\u05D0\\u05D7\\u05E8\\u05D0\\u05D9: \",currentCase.attorney]}),currentCase.attorney!==user.username&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-danger\",children:[\"\\u05DC\\u05E6\\u05E4\\u05D9\\u05D9\\u05D4 \\u05D1\\u05DC\\u05D1\\u05D3 \\u2013 \\u05D1\\u05D1\\u05E2\\u05DC\\u05D5\\u05EA \",currentCase.attorney]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-slate\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[saveStatus==='saving'&&'שומר...',saveStatus==='saved'&&'נשמר בהצלחה',saveStatus==='error'&&'שמירה נכשלה',saveStatus==='idle'&&'מוכן לעריכה']}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveStep(prev=>Math.max(0,prev-1)),disabled:activeStep===0,className:\"rounded-full border border-gold px-4 py-2 text-xs font-semibold text-gold hover:bg-gold/10 transition disabled:opacity-40\",children:\"\\u05D7\\u05D6\\u05E8\\u05D4\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveStep(prev=>Math.min(4,prev+1)),disabled:activeStep===4,className:\"rounded-full bg-gold px-5 py-2 text-xs font-semibold text-navy flex items-center gap-2 hover:bg-gold-light transition disabled:opacity-40\",children:[activeStep===0?'התחל עבודה':'לשלב הבא',/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4\"})]})]})]})]}),activeStep===0&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05DC\\u05D5\\u05D7 \\u05D1\\u05E7\\u05E8\\u05D4 \\u05DB\\u05DC\\u05DC\\u05D9\",children:/*#__PURE__*/_jsx(CaseDashboard,{caseData:currentCase,navigateToStep:setActiveStep})}),activeStep===1&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05BE\\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\",subtitle:\"\\u05E8\\u05E7\\u05E2 \\u05E2\\u05D5\\u05D1\\u05D3\\u05EA\\u05D9 \\u05D5\\u05E2\\u05D9\\u05D1\\u05D5\\u05D3 \\u05D7\\u05D1\\u05D5\\u05EA\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-card border border-pearl bg-pearl/50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-semibold text-navy\",children:\"\\u05E8\\u05E7\\u05E2 \\u05E2\\u05D5\\u05D1\\u05D3\\u05EA\\u05D9 / \\u05E1\\u05D9\\u05DB\\u05D5\\u05DD \\u05EA\\u05D9\\u05E7\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"summary-upload\",className:\"hidden\",accept:\".pdf,.doc,.docx,.txt\",onChange:handleSummaryFileUpload}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"summary-upload\",className:\"inline-flex cursor-pointer items-center gap-1 rounded-full border border-gold px-3 py-1 text-xs text-gold hover:bg-gold/10 transition\",children:[/*#__PURE__*/_jsx(UploadCloud,{className:\"w-3 h-3\"}),\"\\u05E6\\u05E8\\u05E3 \\u05E7\\u05D5\\u05D1\\u05E5\"]})]})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full rounded-2xl border border-pearl bg-white p-4 text-sm text-navy focus:border-gold focus:ring-1 focus:ring-gold outline-none transition h-32\",placeholder:\"\\u05D4\\u05D6\\u05DF \\u05DB\\u05D0\\u05DF \\u05D0\\u05EA \\u05D4\\u05E2\\u05D5\\u05D1\\u05D3\\u05D5\\u05EA \\u05D4\\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D5\\u05EA...\",value:currentCase.summary,onChange:e=>setCurrentCase(_objectSpread(_objectSpread({},currentCase),{},{summary:e.target.value}))}),currentCase.summaryFiles&&currentCase.summaryFiles.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:currentCase.summaryFiles.map((file,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 rounded-full border border-pearl bg-white px-3 py-1 text-xs text-slate\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate max-w-[140px]\",children:file.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSummaryFile(file.name),className:\"text-danger hover:text-danger/80\",\"aria-label\":\"\\u05D4\\u05E1\\u05E8 \\u05D0\\u05EA \\u05D4\\u05E7\\u05D5\\u05D1\\u05E5 \".concat(file.name),children:\"\\xD7\"})]},idx))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-card border border-pearl bg-white p-4\",children:/*#__PURE__*/_jsx(LiabilityStep,{caseData:currentCase,updateCaseData:setCurrentCase})})]})}),activeStep===2&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\\u05D9 \\u05E0\\u05D6\\u05E7 \\u05DB\\u05E1\\u05E4\\u05D9\\u05D9\\u05DD\",children:/*#__PURE__*/_jsx(DamagesStep,{caseData:currentCase,updateCaseData:setCurrentCase})}),activeStep===3&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05E0\\u05D9\\u05DE\\u05D5\\u05E7\\u05D9\\u05DD \\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\\u05D9\\u05DD\",children:/*#__PURE__*/_jsx(ReasoningStep,{caseData:currentCase})}),activeStep===4&&/*#__PURE__*/_jsx(SectionCard,{title:\"\\u05D3\\u05D5\\u05D7 \\u05DE\\u05E1\\u05DB\\u05DD\",children:/*#__PURE__*/_jsx(ReportStep,{caseData:currentCase})})]}),/*#__PURE__*/_jsx(LegalDisclaimer,{})]})]})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useAuth","createCase","apiCreateCase","listCases","apiListCases","updateCase","apiUpdateCase","LoginScreen","AdminDashboard","LiabilityStep","DamagesStep","ReasoningStep","ReportStep","CaseDashboard","FolderOpen","ChevronLeft","Shield","Activity","UploadCloud","FileText","LayoutDashboard","BookOpen","Download","Upload","Bell","UserCircle","ContextRibbon","LegalDisclaimer","jsx","_jsx","jsxs","_jsxs","createEmptyCase","attorney","id","Date","now","toString","name","toLocaleDateString","lastUpdated","toISOString","summary","summaryFiles","liability","issues","medicalRecordQuality","doctrines","precedents","expertsPlaintiff","expertsDefense","expertCourtOpinions","expertCourtStance","aggravatingFactors","mitigatingFactors","probability","probabilityRange","uncertainty","strengthsPlaintiff","weaknessesPlaintiff","strengthsDefense","weaknessesDefense","damages","dateOfBirth","gender","dateOfEvent","setFullYear","getFullYear","split","dateOfCalc","dateOfRetirement","ageAtInjury","currentAge","lifeExpectancy","wagePreInjury","wagePostInjury","permanentDisabilityMedical","permanentDisabilityFunctional","daysOfHospitalization","interestRate","heads","isActive","parameters","calculatedAmount","notes","App","_currentCaseRecord$is","user","logout","activeStep","setActiveStep","showAdminDashboard","setShowAdminDashboard","caseList","setCaseList","currentCaseId","setCurrentCaseId","currentCase","setCurrentCase","saveStatus","setSaveStatus","isLoadingCases","setIsLoadingCases","loadError","setLoadError","caseBanner","setCaseBanner","fileInputRef","saveTimeoutRef","resetStatusTimeoutRef","hydratingRef","isAdmin","role","cleanupClientState","current","clearTimeout","normalizeCaseData","record","attorneyFallback","safeData","data","_objectSpread","title","concat","handleCreateNewCase","attorneyName","template","created","prev","normalized","error","console","cancelled","bootstrap","ownCases","length","username","sorted","sort","a","b","updatedAt","getTime","primary","handleLogout","handleAdminEditCase","caseData","setTimeout","updated","filtered","filter","c","handleSummaryFileUpload","e","target","files","file","newFile","size","type","lastModified","removeSummaryFile","fileName","f","handleExportCase","dataStr","JSON","stringify","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","replace","body","appendChild","click","removeChild","handleImportClick","_fileInputRef$current","handleImportFile","_e$target$files","reader","FileReader","onload","event","_event$target","json","parse","result","message","err","readAsText","value","SectionCard","_ref","subtitle","children","className","primaryNavigation","label","icon","step","currentCaseRecord","find","isCaseReadOnly","isOwner","currentUserName","onEditCase","onLogout","dir","onClick","mode","caseName","status","isReadOnly","onBack","window","history","back","map","item","ref","onChange","accept","Math","max","disabled","min","navigateToStep","htmlFor","placeholder","idx","updateCaseData"],"sources":["C:/Office-Apps/LexMedical-App/src/App.tsx"],"sourcesContent":["import React, { ReactNode, useState, useEffect, useRef, useCallback } from 'react';\nimport { CaseData, AttachedFile, CaseRecord } from './types';\nimport { useAuth } from './context/AuthContext';\nimport {\n  createCase as apiCreateCase,\n  listCases as apiListCases,\n  updateCase as apiUpdateCase,\n} from './services/api';\nimport LoginScreen from './components/LoginScreen';\nimport AdminDashboard from './components/AdminDashboard';\nimport LiabilityStep from './components/LiabilityStep';\nimport DamagesStep from './components/DamagesStep';\nimport ReasoningStep from './components/ReasoningStep';\nimport ReportStep from './components/ReportStep';\nimport CaseDashboard from './components/CaseDashboard';\nimport {\n  FolderOpen,\n  ChevronLeft,\n  Shield,\n  Activity,\n  UploadCloud,\n  FileText,\n  LayoutDashboard,\n  BookOpen,\n  Download,\n  Upload,\n  Bell,\n  UserCircle,\n} from 'lucide-react';\nimport ContextRibbon from './components/ContextRibbon';\nimport LegalDisclaimer from './components/LegalDisclaimer';\n\nconst createEmptyCase = (attorney: string): CaseData => ({\n  id: Date.now().toString(),\n  name: 'תיק חדש ' + new Date().toLocaleDateString('he-IL'),\n  attorney,\n  lastUpdated: new Date().toISOString(),\n  summary: '',\n  summaryFiles: [],\n  liability: {\n    issues: [],\n    medicalRecordQuality: 'Complete',\n    doctrines: [],\n    precedents: [],\n    expertsPlaintiff: [],\n    expertsDefense: [],\n    expertCourtOpinions: [], \n    expertCourtStance: 'None', \n    aggravatingFactors: 2,\n    mitigatingFactors: 2,\n    probability: 50,\n    probabilityRange: [40, 60],\n    uncertainty: 'Medium',\n    strengthsPlaintiff: [''],\n    weaknessesPlaintiff: [''],\n    strengthsDefense: [''],\n    weaknessesDefense: ['']\n  },\n  damages: {\n    dateOfBirth: '1990-01-01', \n    gender: 'Male',\n    dateOfEvent: new Date(new Date().setFullYear(new Date().getFullYear() - 2)).toISOString().split('T')[0], \n    dateOfCalc: new Date().toISOString().split('T')[0],\n    dateOfRetirement: '',\n    ageAtInjury: 0, \n    currentAge: 0, \n    lifeExpectancy: 82, \n    wagePreInjury: 10000,\n    wagePostInjury: 0,\n    permanentDisabilityMedical: 10,\n    permanentDisabilityFunctional: 10,\n    daysOfHospitalization: 0,\n    interestRate: 3,\n    heads: [\n      { id: '1', name: 'הפסד שכר לעבר', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '2', name: 'הפסד שכר לעתיד', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '3', name: 'הפסד פנסיה ותנאים סוציאליים', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '4', name: 'כאב וסבל', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '5', name: 'עזרת צד ג׳ לעבר', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '6', name: 'עזרת צד ג׳ לעתיד', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '7', name: 'הוצאות רפואיות', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '8', name: 'ניידות ונסיעות', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n    ],\n    precedents: []\n  }\n});\n\nconst App: React.FC = () => {\n  const { user, logout } = useAuth();\n  const [activeStep, setActiveStep] = useState<number>(0);\n  const [showAdminDashboard, setShowAdminDashboard] = useState(false);\n  const [caseList, setCaseList] = useState<CaseRecord[]>([]);\n  const [currentCaseId, setCurrentCaseId] = useState<string | null>(null);\n  const [currentCase, setCurrentCase] = useState<CaseData | null>(null);\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'saved' | 'error'>('idle');\n  const [isLoadingCases, setIsLoadingCases] = useState(false);\n  const [loadError, setLoadError] = useState<string | null>(null);\n  const [caseBanner, setCaseBanner] = useState<{ type: 'success' | 'error'; message: string } | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const saveTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const resetStatusTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const hydratingRef = useRef(false);\n\n  const isAdmin = user?.role === 'admin';\n\n  const cleanupClientState = () => {\n    setCaseList([]);\n    setCurrentCaseId(null);\n    setCurrentCase(null);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n    setSaveStatus('idle');\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n      saveTimeoutRef.current = null;\n    }\n    if (resetStatusTimeoutRef.current) {\n      clearTimeout(resetStatusTimeoutRef.current);\n      resetStatusTimeoutRef.current = null;\n    }\n  };\n\n  const normalizeCaseData = (record: CaseRecord, attorneyFallback: string): CaseData => {\n    const safeData = (record.data as CaseData) || createEmptyCase(attorneyFallback);\n    return {\n      ...createEmptyCase(attorneyFallback),\n      ...safeData,\n      id: record.id,\n      name: safeData.name || record.title || `תיק ${new Date().toLocaleDateString('he-IL')}`,\n      attorney: safeData.attorney || attorneyFallback,\n    };\n  };\n\n  const handleCreateNewCase = useCallback(async (attorneyName: string) => {\n    if (!user) return;\n    setIsLoadingCases(true);\n    setLoadError(null);\n    try {\n      const template = createEmptyCase(attorneyName);\n      const created = await apiCreateCase({ title: template.name, data: template });\n      setCaseList((prev) => [created, ...prev]);\n      const normalized = { ...template, id: created.id };\n      setCurrentCaseId(created.id);\n      hydratingRef.current = true;\n      setCurrentCase(normalized);\n      setActiveStep(0);\n    } catch (error) {\n      console.error(error);\n      setLoadError('יצירת תיק חדש נכשלה.');\n    } finally {\n      setIsLoadingCases(false);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    let cancelled = false;\n    const bootstrap = async () => {\n      if (!user) {\n        cleanupClientState();\n        return;\n      }\n      setIsLoadingCases(true);\n      setLoadError(null);\n      try {\n        const { ownCases } = await apiListCases();\n        if (cancelled) return;\n        setCaseList(ownCases);\n        setShowAdminDashboard(isAdmin);\n        if (!ownCases.length) {\n          await handleCreateNewCase(user.username);\n          return;\n        }\n        const sorted = [...ownCases].sort(\n          (a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime(),\n        );\n        const primary = sorted[0];\n        setCurrentCaseId(primary.id);\n        hydratingRef.current = true;\n        setCurrentCase(normalizeCaseData(primary, user.username));\n        setActiveStep(0);\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setLoadError('טעינת התיקים נכשלה. נסה שוב בעוד רגע.');\n        }\n      } finally {\n        if (!cancelled) {\n          setIsLoadingCases(false);\n        }\n      }\n    };\n\n    bootstrap();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [user, isAdmin, handleCreateNewCase]);\n\n  const handleLogout = () => {\n    logout();\n    cleanupClientState();\n  };\n\n  const handleAdminEditCase = (caseData: CaseData) => {\n    setCurrentCaseId(caseData.id);\n    hydratingRef.current = true;\n    setCurrentCase(caseData);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n  };\n\n  useEffect(() => {\n    if (!user || !currentCaseId || !currentCase || showAdminDashboard) return;\n    if (hydratingRef.current) {\n      hydratingRef.current = false;\n      return;\n    }\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n    }\n    setSaveStatus('saving');\n    saveTimeoutRef.current = setTimeout(async () => {\n      try {\n        const updated = await apiUpdateCase(currentCaseId, {\n          title: currentCase.name,\n          data: currentCase,\n        });\n        setCaseList((prev) => {\n          const filtered = prev.filter((c) => c.id !== updated.id);\n          return [updated, ...filtered];\n        });\n        setSaveStatus('saved');\n        if (resetStatusTimeoutRef.current) {\n          clearTimeout(resetStatusTimeoutRef.current);\n        }\n        resetStatusTimeoutRef.current = setTimeout(() => setSaveStatus('idle'), 1500);\n      } catch (error) {\n        console.error(error);\n        setSaveStatus('error');\n      }\n    }, 1200);\n\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n        saveTimeoutRef.current = null;\n      }\n    };\n  }, [currentCase, currentCaseId, user, showAdminDashboard]);\n\n  const handleSummaryFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0] && currentCase) {\n      const file = e.target.files[0];\n      const newFile: AttachedFile = {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        lastModified: file.lastModified\n      };\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: [...(currentCase.summaryFiles || []), newFile]\n      });\n    }\n  };\n\n  const removeSummaryFile = (fileName: string) => {\n    if (currentCase) {\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: currentCase.summaryFiles.filter((f: AttachedFile) => f.name !== fileName)\n      });\n    }\n  };\n\n  const handleExportCase = () => {\n    if (!currentCase) return;\n    const dataStr = JSON.stringify(currentCase, null, 2);\n    const blob = new Blob([dataStr], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `lexmedical_${currentCase.name.replace(/\\s+/g, '_')}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleImportClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleImportFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try {\n        const json = JSON.parse(event.target?.result as string);\n        if (json.id && json.liability && json.damages) {\n          hydratingRef.current = true;\n          setCurrentCase(json);\n          setCaseBanner({ type: 'success', message: 'התיק נטען בהצלחה. השינויים יישמרו אוטומטית.' });\n          setActiveStep(0);\n        } else {\n          setCaseBanner({ type: 'error', message: 'קובץ לא תקין. אנא השתמש בקובץ שהופק מהמערכת.' });\n        }\n      } catch (err) {\n        setCaseBanner({ type: 'error', message: 'שגיאה בטעינת הקובץ. נסה שוב או פנה לתמיכה.' });\n      }\n    };\n    reader.readAsText(file);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n\n  const SectionCard: React.FC<{ title: string; subtitle?: string; children: ReactNode }> = ({\n    title,\n    subtitle,\n    children,\n  }) => (\n    <section className=\"rounded-card border border-pearl bg-white shadow-card-xl\">\n      <div className=\"h-1.5 w-full rounded-t-card bg-navy\" />\n      <div className=\"p-6\">\n        <div className=\"flex items-center justify-between text-navy\">\n          <h2 className=\"text-lg font-semibold\">{title}</h2>\n          {subtitle && <span className=\"text-xs text-slate\">{subtitle}</span>}\n        </div>\n        <div className=\"mt-2 w-12 border-b-2 border-gold rounded-full\" />\n        <div className=\"mt-6 text-slate\">{children}</div>\n      </div>\n    </section>\n  );\n\n  const primaryNavigation = [\n    { label: 'התיקים שלי', icon: FolderOpen, step: 0 },\n    { label: 'ניתוח רפואי', icon: Shield, step: 1 },\n    { label: 'תחשיבי נזק', icon: Activity, step: 2 },\n    { label: 'נימוקים משפטיים', icon: BookOpen, step: 3 },\n    { label: 'דוח מסכם', icon: FileText, step: 4 },\n  ];\n\n  const currentCaseRecord = caseList.find((record) => record.id === currentCaseId);\n  const isCaseReadOnly = currentCaseRecord ? !(currentCaseRecord.isOwner ?? true) : false;\n\n  if (!user) {\n    return <LoginScreen />;\n  }\n\n  if (showAdminDashboard) {\n    return (\n      <AdminDashboard\n        currentUserName={user.username}\n        onEditCase={handleAdminEditCase}\n        onLogout={handleLogout}\n      />\n    );\n  }\n\n  if (isLoadingCases || !currentCase) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-pearl text-slate\" dir=\"rtl\">\n        <div className=\"rounded-card border border-pearl bg-white px-6 py-4 shadow-card-xl text-sm\">\n          {loadError || 'טוען תיקים מהשרת...'}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pearl text-navy\" dir=\"rtl\">\n      <div className=\"flex flex-col min-h-screen\">\n        <header className=\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-xl font-semibold brand-mark\">LexMedical</span>\n            <span className=\"text-xs text-gold-light hidden md:inline\">מערכת משפטית־רפואית פנימית</span>\n          </div>\n          <div className=\"flex items-center gap-6 text-sm\">\n            <button className=\"relative text-gold-light hover:text-gold transition\" aria-label=\"התראות מערכת\">\n              <Bell className=\"w-5 h-5\" />\n            </button>\n            <div className=\"flex items-center gap-2 text-pearl\">\n              <UserCircle className=\"w-6 h-6 text-gold-light\" />\n              <span>{user.username}</span>\n            </div>\n            <button onClick={handleLogout} className=\"text-gold hover:text-gold-light transition\">\n              התנתק\n            </button>\n          </div>\n        </header>\n\n        <ContextRibbon\n          mode={isCaseReadOnly ? 'מצב קריאה בלבד' : 'מצב עריכת תיק פעיל'}\n          caseName={currentCase?.name}\n          status={currentCaseRecord?.status}\n          isReadOnly={isCaseReadOnly}\n          onBack={isAdmin ? () => setShowAdminDashboard(true) : () => window.history.back()}\n        />\n        <div className=\"flex flex-1\">\n          <aside className=\"hidden md:flex w-72 bg-navy-dark text-pearl flex-col border-l border-navy\">\n            <div className=\"px-6 py-6 border-b border-navy\">\n              <p className=\"text-xs uppercase tracking-widest text-slate-light\">ניווט</p>\n              <p className=\"text-2xl font-semibold text-white mt-2\">שליטה מלאה בתיק</p>\n            </div>\n            <nav className=\"flex-1 overflow-y-auto px-4 py-6 space-y-8\">\n              <div>\n                <p className=\"text-xs uppercase text-slate-light mb-3\">ניהול תיק</p>\n                <div className=\"space-y-2\">\n                  {primaryNavigation.map((item) => {\n                    const isActive = activeStep === item.step;\n                    return (\n                      <button\n                        key={item.label}\n                        onClick={() => setActiveStep(item.step)}\n                        className={`w-full flex items-center justify-between rounded-xl px-3 py-3 text-sm transition ${\n                          isActive\n                            ? 'bg-navy text-gold border-r-4 border-gold'\n                            : 'bg-transparent text-pearl hover:bg-navy/60'\n                        }`}\n                      >\n                        <span className=\"flex items-center gap-3\">\n                          <item.icon className=\"w-4 h-4\" />\n                          {item.label}\n                        </span>\n                        {isActive && <span className=\"text-[10px] uppercase tracking-widest text-gold-light\">פעיל</span>}\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n            </nav>\n            <div className=\"px-4 py-6 border-t border-navy space-y-3 text-sm\">\n              <button\n                onClick={() => handleCreateNewCase(user.username)}\n                className=\"w-full rounded-full bg-gold text-navy font-semibold py-2 hover:bg-gold-light transition flex items-center justify-center gap-2\"\n              >\n                <Upload className=\"w-4 h-4 rotate-180\" />\n                תיק חדש\n              </button>\n              <button\n                onClick={handleExportCase}\n                className=\"w-full rounded-full border border-gold text-gold py-2 hover:bg-gold/10 transition flex items-center justify-center gap-2\"\n              >\n                <Download className=\"w-4 h-4\" />\n                שמור תיק\n              </button>\n              <button\n                onClick={handleImportClick}\n                className=\"w-full rounded-full bg-navy text-pearl py-2 hover:bg-navy/80 transition flex items-center justify-center gap-2\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                טען תיק\n              </button>\n              <input type=\"file\" ref={fileInputRef} onChange={handleImportFile} className=\"hidden\" accept=\".json\" />\n              {isAdmin && (\n                <button\n                  onClick={() => setShowAdminDashboard(true)}\n                  className=\"w-full rounded-full bg-navy text-gold py-2 hover:bg-navy/70 transition flex items-center justify-center gap-2\"\n                >\n                  <LayoutDashboard className=\"w-4 h-4\" />\n                  דשבורד משרדי\n                </button>\n              )}\n            </div>\n          </aside>\n\n          <main className=\"flex-1 bg-pearl overflow-y-auto\">\n            <div className=\"md:hidden px-6 py-4 space-y-3 border-b border-pearl\">\n              <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                {primaryNavigation.map((item) => (\n                  <button\n                    key={item.label}\n                    onClick={() => setActiveStep(item.step)}\n                    className={`rounded-xl border px-3 py-2 flex items-center justify-center gap-2 ${\n                      activeStep === item.step ? 'border-gold text-navy bg-white' : 'border-pearl text-slate'\n                    }`}\n                  >\n                    <item.icon className=\"w-4 h-4\" />\n                    {item.label}\n                  </button>\n                ))}\n              </div>\n            </div>\n            {caseBanner && (\n              <div className=\"max-w-6xl mx-auto px-6\">\n                <div className={`mt-4 ${caseBanner.type === 'error' ? 'state-block state-block--error' : 'state-block'}`}>\n                  <p className=\"state-block__title text-sm\">\n                    {caseBanner.type === 'error' ? 'ייבוא התיק נכשל' : 'ייבוא התיק הושלם'}\n                  </p>\n                  <p className=\"state-block__description\">{caseBanner.message}</p>\n                </div>\n              </div>\n            )}\n            <div className=\"max-w-6xl mx-auto px-6 py-8 space-y-6\">\n              <SectionCard title=\"פרטי תיק\" subtitle=\"שליטה מלאה בבסיס הנתונים\">\n                <div className=\"grid gap-6 md:grid-cols-2\">\n                  <div>\n                    <label className=\"text-xs font-semibold text-slate\">שם התיק</label>\n                    <input\n                      className=\"mt-2 w-full rounded-xl border border-pearl bg-pearl/60 px-3 py-2 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\"\n                      value={currentCase.name}\n                      onChange={(e) => setCurrentCase({ ...currentCase, name: e.target.value })}\n                    />\n                  </div>\n                  <div className=\"text-sm text-slate flex flex-col gap-2\">\n                    <span>עו\"ד אחראי: {currentCase.attorney}</span>\n                    {currentCase.attorney !== user.username && (\n                      <span className=\"text-xs text-danger\">\n                        לצפייה בלבד – בבעלות {currentCase.attorney}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <div className=\"mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-slate\">\n                  <span>\n                    {saveStatus === 'saving' && 'שומר...'}\n                    {saveStatus === 'saved' && 'נשמר בהצלחה'}\n                    {saveStatus === 'error' && 'שמירה נכשלה'}\n                    {saveStatus === 'idle' && 'מוכן לעריכה'}\n                  </span>\n                  <div className=\"flex flex-wrap gap-3\">\n                    <button\n                      onClick={() => setActiveStep((prev) => Math.max(0, prev - 1))}\n                      disabled={activeStep === 0}\n                      className=\"rounded-full border border-gold px-4 py-2 text-xs font-semibold text-gold hover:bg-gold/10 transition disabled:opacity-40\"\n                    >\n                      חזרה\n                    </button>\n                    <button\n                      onClick={() => setActiveStep((prev) => Math.min(4, prev + 1))}\n                      disabled={activeStep === 4}\n                      className=\"rounded-full bg-gold px-5 py-2 text-xs font-semibold text-navy flex items-center gap-2 hover:bg-gold-light transition disabled:opacity-40\"\n                    >\n                      {activeStep === 0 ? 'התחל עבודה' : 'לשלב הבא'}\n                      <ChevronLeft className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              </SectionCard>\n\n              {activeStep === 0 && (\n                <SectionCard title=\"לוח בקרה כללי\">\n                  <CaseDashboard caseData={currentCase} navigateToStep={setActiveStep} />\n                </SectionCard>\n              )}\n\n              {activeStep === 1 && (\n                <SectionCard title=\"ניתוח רפואי־משפטי\" subtitle=\"רקע עובדתי ועיבוד חבות\">\n                  <div className=\"space-y-6\">\n                    <div className=\"rounded-card border border-pearl bg-pearl/50 p-4\">\n                      <div className=\"flex flex-col gap-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <label className=\"text-sm font-semibold text-navy\">רקע עובדתי / סיכום תיק</label>\n                          <div>\n                            <input\n                              type=\"file\"\n                              id=\"summary-upload\"\n                              className=\"hidden\"\n                              accept=\".pdf,.doc,.docx,.txt\"\n                              onChange={handleSummaryFileUpload}\n                            />\n                            <label\n                              htmlFor=\"summary-upload\"\n                              className=\"inline-flex cursor-pointer items-center gap-1 rounded-full border border-gold px-3 py-1 text-xs text-gold hover:bg-gold/10 transition\"\n                            >\n                              <UploadCloud className=\"w-3 h-3\" />\n                              צרף קובץ\n                            </label>\n                          </div>\n                        </div>\n                        <textarea\n                          className=\"w-full rounded-2xl border border-pearl bg-white p-4 text-sm text-navy focus:border-gold focus:ring-1 focus:ring-gold outline-none transition h-32\"\n                          placeholder=\"הזן כאן את העובדות המעובדות...\"\n                          value={currentCase.summary}\n                          onChange={(e) => setCurrentCase({ ...currentCase, summary: e.target.value })}\n                        />\n                        {currentCase.summaryFiles && currentCase.summaryFiles.length > 0 && (\n                          <div className=\"flex flex-wrap gap-2\">\n                            {currentCase.summaryFiles.map((file: AttachedFile, idx: number) => (\n                              <div\n                                key={idx}\n                                className=\"flex items-center gap-2 rounded-full border border-pearl bg-white px-3 py-1 text-xs text-slate\"\n                              >\n                                <FileText className=\"w-3 h-3\" />\n                                <span className=\"truncate max-w-[140px]\">{file.name}</span>\n                                <button\n                                  onClick={() => removeSummaryFile(file.name)}\n                                  className=\"text-danger hover:text-danger/80\"\n                                  aria-label={`הסר את הקובץ ${file.name}`}\n                                >\n                                  ×\n                                </button>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"rounded-card border border-pearl bg-white p-4\">\n                      <LiabilityStep caseData={currentCase} updateCaseData={setCurrentCase} />\n                    </div>\n                  </div>\n                </SectionCard>\n              )}\n\n              {activeStep === 2 && (\n                <SectionCard title=\"תחשיבי נזק כספיים\">\n                  <DamagesStep caseData={currentCase} updateCaseData={setCurrentCase} />\n                </SectionCard>\n              )}\n\n              {activeStep === 3 && (\n                <SectionCard title=\"נימוקים משפטיים\">\n                  <ReasoningStep caseData={currentCase} />\n                </SectionCard>\n              )}\n\n              {activeStep === 4 && (\n                <SectionCard title=\"דוח מסכם\">\n                  <ReportStep caseData={currentCase} />\n                </SectionCard>\n              )}\n            </div>\n            <LegalDisclaimer />\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}