{"ast":null,"code":"var _jsxFileName = \"C:\\\\Office-Apps\\\\LexMedical-App\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useAuth } from './context/AuthContext';\nimport { createCase as apiCreateCase, listCases as apiListCases, updateCase as apiUpdateCase } from './services/api';\nimport LoginScreen from './components/LoginScreen';\nimport AdminDashboard from './components/AdminDashboard';\nimport LiabilityStep from './components/LiabilityStep';\nimport DamagesStep from './components/DamagesStep';\nimport ReasoningStep from './components/ReasoningStep';\nimport ReportStep from './components/ReportStep';\nimport CaseDashboard from './components/CaseDashboard';\nimport { FolderOpen, ChevronLeft, Shield, Activity, UploadCloud, FileText, LayoutDashboard, BookOpen, Download, Upload, Bell, UserCircle } from 'lucide-react';\nimport ContextRibbon from './components/ContextRibbon';\nimport LegalDisclaimer from './components/LegalDisclaimer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst createEmptyCase = attorney => ({\n  id: Date.now().toString(),\n  name: 'תיק חדש ' + new Date().toLocaleDateString('he-IL'),\n  attorney,\n  lastUpdated: new Date().toISOString(),\n  summary: '',\n  summaryFiles: [],\n  liability: {\n    issues: [],\n    medicalRecordQuality: 'Complete',\n    doctrines: [],\n    precedents: [],\n    expertsPlaintiff: [],\n    expertsDefense: [],\n    expertCourtOpinions: [],\n    expertCourtStance: 'None',\n    aggravatingFactors: 2,\n    mitigatingFactors: 2,\n    probability: 50,\n    probabilityRange: [40, 60],\n    uncertainty: 'Medium',\n    strengthsPlaintiff: [''],\n    weaknessesPlaintiff: [''],\n    strengthsDefense: [''],\n    weaknessesDefense: ['']\n  },\n  damages: {\n    dateOfBirth: '1990-01-01',\n    gender: 'Male',\n    dateOfEvent: new Date(new Date().setFullYear(new Date().getFullYear() - 2)).toISOString().split('T')[0],\n    dateOfCalc: new Date().toISOString().split('T')[0],\n    dateOfRetirement: '',\n    ageAtInjury: 0,\n    currentAge: 0,\n    lifeExpectancy: 82,\n    wagePreInjury: 10000,\n    wagePostInjury: 0,\n    permanentDisabilityMedical: 10,\n    permanentDisabilityFunctional: 10,\n    daysOfHospitalization: 0,\n    interestRate: 3,\n    heads: [{\n      id: '1',\n      name: 'הפסד שכר לעבר',\n      isActive: true,\n      parameters: {},\n      calculatedAmount: 0,\n      notes: ''\n    }, {\n      id: '2',\n      name: 'הפסד שכר לעתיד',\n      isActive: true,\n      parameters: {},\n      calculatedAmount: 0,\n      notes: ''\n    }, {\n      id: '3',\n      name: 'הפסד פנסיה ותנאים סוציאליים',\n      isActive: true,\n      parameters: {},\n      calculatedAmount: 0,\n      notes: ''\n    }, {\n      id: '4',\n      name: 'כאב וסבל',\n      isActive: true,\n      parameters: {},\n      calculatedAmount: 0,\n      notes: ''\n    }, {\n      id: '5',\n      name: 'עזרת צד ג׳ לעבר',\n      isActive: false,\n      parameters: {},\n      calculatedAmount: 0,\n      notes: ''\n    }, {\n      id: '6',\n      name: 'עזרת צד ג׳ לעתיד',\n      isActive: false,\n      parameters: {},\n      calculatedAmount: 0,\n      notes: ''\n    }, {\n      id: '7',\n      name: 'הוצאות רפואיות',\n      isActive: false,\n      parameters: {},\n      calculatedAmount: 0,\n      notes: ''\n    }, {\n      id: '8',\n      name: 'ניידות ונסיעות',\n      isActive: false,\n      parameters: {},\n      calculatedAmount: 0,\n      notes: ''\n    }],\n    precedents: []\n  }\n});\nconst App = () => {\n  _s();\n  var _currentCaseRecord$is;\n  const {\n    user,\n    logout\n  } = useAuth();\n  const [activeStep, setActiveStep] = useState(0);\n  const [showAdminDashboard, setShowAdminDashboard] = useState(false);\n  const [caseList, setCaseList] = useState([]);\n  const [currentCaseId, setCurrentCaseId] = useState(null);\n  const [currentCase, setCurrentCase] = useState(null);\n  const [saveStatus, setSaveStatus] = useState('idle');\n  const [isLoadingCases, setIsLoadingCases] = useState(false);\n  const [loadError, setLoadError] = useState(null);\n  const [caseBanner, setCaseBanner] = useState(null);\n  const fileInputRef = useRef(null);\n  const saveTimeoutRef = useRef(null);\n  const resetStatusTimeoutRef = useRef(null);\n  const hydratingRef = useRef(false);\n  const isAdmin = (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n  const cleanupClientState = () => {\n    setCaseList([]);\n    setCurrentCaseId(null);\n    setCurrentCase(null);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n    setSaveStatus('idle');\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n      saveTimeoutRef.current = null;\n    }\n    if (resetStatusTimeoutRef.current) {\n      clearTimeout(resetStatusTimeoutRef.current);\n      resetStatusTimeoutRef.current = null;\n    }\n  };\n  const normalizeCaseData = (record, attorneyFallback) => {\n    const safeData = record.data || createEmptyCase(attorneyFallback);\n    return {\n      ...createEmptyCase(attorneyFallback),\n      ...safeData,\n      id: record.id,\n      name: safeData.name || record.title || `תיק ${new Date().toLocaleDateString('he-IL')}`,\n      attorney: safeData.attorney || attorneyFallback\n    };\n  };\n  const handleCreateNewCase = useCallback(async attorneyName => {\n    if (!user) return;\n    setIsLoadingCases(true);\n    setLoadError(null);\n    try {\n      const template = createEmptyCase(attorneyName);\n      const created = await apiCreateCase({\n        title: template.name,\n        data: template\n      });\n      setCaseList(prev => [created, ...prev]);\n      const normalized = {\n        ...template,\n        id: created.id\n      };\n      setCurrentCaseId(created.id);\n      hydratingRef.current = true;\n      setCurrentCase(normalized);\n      setActiveStep(0);\n    } catch (error) {\n      console.error(error);\n      setLoadError('יצירת תיק חדש נכשלה.');\n    } finally {\n      setIsLoadingCases(false);\n    }\n  }, [user]);\n  useEffect(() => {\n    let cancelled = false;\n    const bootstrap = async () => {\n      if (!user) {\n        cleanupClientState();\n        return;\n      }\n      setIsLoadingCases(true);\n      setLoadError(null);\n      try {\n        const {\n          ownCases\n        } = await apiListCases();\n        if (cancelled) return;\n        setCaseList(ownCases);\n        setShowAdminDashboard(isAdmin);\n        if (!ownCases.length) {\n          await handleCreateNewCase(user.username);\n          return;\n        }\n        const sorted = [...ownCases].sort((a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime());\n        const primary = sorted[0];\n        setCurrentCaseId(primary.id);\n        hydratingRef.current = true;\n        setCurrentCase(normalizeCaseData(primary, user.username));\n        setActiveStep(0);\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setLoadError('טעינת התיקים נכשלה. נסה שוב בעוד רגע.');\n        }\n      } finally {\n        if (!cancelled) {\n          setIsLoadingCases(false);\n        }\n      }\n    };\n    bootstrap();\n    return () => {\n      cancelled = true;\n    };\n  }, [user, isAdmin, handleCreateNewCase]);\n  const handleLogout = () => {\n    logout();\n    cleanupClientState();\n  };\n  const handleAdminEditCase = caseData => {\n    setCurrentCaseId(caseData.id);\n    hydratingRef.current = true;\n    setCurrentCase(caseData);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n  };\n  useEffect(() => {\n    if (!user || !currentCaseId || !currentCase || showAdminDashboard) return;\n    if (hydratingRef.current) {\n      hydratingRef.current = false;\n      return;\n    }\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n    }\n    setSaveStatus('saving');\n    saveTimeoutRef.current = setTimeout(async () => {\n      try {\n        const updated = await apiUpdateCase(currentCaseId, {\n          title: currentCase.name,\n          data: currentCase\n        });\n        setCaseList(prev => {\n          const filtered = prev.filter(c => c.id !== updated.id);\n          return [updated, ...filtered];\n        });\n        setSaveStatus('saved');\n        if (resetStatusTimeoutRef.current) {\n          clearTimeout(resetStatusTimeoutRef.current);\n        }\n        resetStatusTimeoutRef.current = setTimeout(() => setSaveStatus('idle'), 1500);\n      } catch (error) {\n        console.error(error);\n        setSaveStatus('error');\n      }\n    }, 1200);\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n        saveTimeoutRef.current = null;\n      }\n    };\n  }, [currentCase, currentCaseId, user, showAdminDashboard]);\n  const handleSummaryFileUpload = e => {\n    if (e.target.files && e.target.files[0] && currentCase) {\n      const file = e.target.files[0];\n      const newFile = {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        lastModified: file.lastModified\n      };\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: [...(currentCase.summaryFiles || []), newFile]\n      });\n    }\n  };\n  const removeSummaryFile = fileName => {\n    if (currentCase) {\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: currentCase.summaryFiles.filter(f => f.name !== fileName)\n      });\n    }\n  };\n  const handleExportCase = () => {\n    if (!currentCase) return;\n    const dataStr = JSON.stringify(currentCase, null, 2);\n    const blob = new Blob([dataStr], {\n      type: \"application/json\"\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `lexmedical_${currentCase.name.replace(/\\s+/g, '_')}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const handleImportClick = () => {\n    var _fileInputRef$current;\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const handleImportFile = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = event => {\n      try {\n        var _event$target;\n        const json = JSON.parse((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n        if (json.id && json.liability && json.damages) {\n          hydratingRef.current = true;\n          setCurrentCase(json);\n          setCaseBanner({\n            type: 'success',\n            message: 'התיק נטען בהצלחה. השינויים יישמרו אוטומטית.'\n          });\n          setActiveStep(0);\n        } else {\n          setCaseBanner({\n            type: 'error',\n            message: 'קובץ לא תקין. אנא השתמש בקובץ שהופק מהמערכת.'\n          });\n        }\n      } catch (err) {\n        setCaseBanner({\n          type: 'error',\n          message: 'שגיאה בטעינת הקובץ. נסה שוב או פנה לתמיכה.'\n        });\n      }\n    };\n    reader.readAsText(file);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n  const SectionCard = ({\n    title,\n    subtitle,\n    children\n  }) => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"rounded-card border border-pearl bg-white shadow-card-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-1.5 w-full rounded-t-card bg-navy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between text-navy\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this), subtitle && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs text-slate\",\n          children: subtitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 w-12 border-b-2 border-gold rounded-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 text-slate\",\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 322,\n    columnNumber: 5\n  }, this);\n  const primaryNavigation = [{\n    label: 'התיקים שלי',\n    icon: FolderOpen,\n    step: 0\n  }, {\n    label: 'ניתוח רפואי',\n    icon: Shield,\n    step: 1\n  }, {\n    label: 'תחשיבי נזק',\n    icon: Activity,\n    step: 2\n  }, {\n    label: 'נימוקים משפטיים',\n    icon: BookOpen,\n    step: 3\n  }, {\n    label: 'דוח מסכם',\n    icon: FileText,\n    step: 4\n  }];\n  const currentCaseRecord = caseList.find(record => record.id === currentCaseId);\n  const isCaseReadOnly = currentCaseRecord ? !((_currentCaseRecord$is = currentCaseRecord.isOwner) !== null && _currentCaseRecord$is !== void 0 ? _currentCaseRecord$is : true) : false;\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(LoginScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 12\n    }, this);\n  }\n  if (showAdminDashboard) {\n    return /*#__PURE__*/_jsxDEV(AdminDashboard, {\n      currentUserName: user.username,\n      onEditCase: handleAdminEditCase,\n      onLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 7\n    }, this);\n  }\n  if (isLoadingCases || !currentCase) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-pearl text-slate\",\n      dir: \"rtl\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rounded-card border border-pearl bg-white px-6 py-4 shadow-card-xl text-sm\",\n        children: loadError || 'טוען תיקים מהשרת...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-pearl text-navy\",\n    dir: \"rtl\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl font-semibold brand-mark\",\n            children: \"LexMedical\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gold-light hidden md:inline\",\n            children: \"\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA \\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\\u05EA\\u05BE\\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05EA \\u05E4\\u05E0\\u05D9\\u05DE\\u05D9\\u05EA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-6 text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"relative text-gold-light hover:text-gold transition\",\n            \"aria-label\": \"\\u05D4\\u05EA\\u05E8\\u05D0\\u05D5\\u05EA \\u05DE\\u05E2\\u05E8\\u05DB\\u05EA\",\n            children: /*#__PURE__*/_jsxDEV(Bell, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-pearl\",\n            children: [/*#__PURE__*/_jsxDEV(UserCircle, {\n              className: \"w-6 h-6 text-gold-light\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"text-gold hover:text-gold-light transition\",\n            children: \"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ContextRibbon, {\n        mode: isCaseReadOnly ? 'מצב קריאה בלבד' : 'מצב עריכת תיק פעיל',\n        caseName: currentCase === null || currentCase === void 0 ? void 0 : currentCase.name,\n        status: currentCaseRecord === null || currentCaseRecord === void 0 ? void 0 : currentCaseRecord.status,\n        isReadOnly: isCaseReadOnly,\n        onBack: isAdmin ? () => setShowAdminDashboard(true) : () => window.history.back()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n          className: \"hidden md:flex w-72 bg-navy-dark text-pearl flex-col border-l border-navy\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-6 py-6 border-b border-navy\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs uppercase tracking-widest text-slate-light\",\n              children: \"\\u05E0\\u05D9\\u05D5\\u05D5\\u05D8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-semibold text-white mt-2\",\n              children: \"\\u05E9\\u05DC\\u05D9\\u05D8\\u05D4 \\u05DE\\u05DC\\u05D0\\u05D4 \\u05D1\\u05EA\\u05D9\\u05E7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n            className: \"flex-1 overflow-y-auto px-4 py-6 space-y-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs uppercase text-slate-light mb-3\",\n                children: \"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05EA\\u05D9\\u05E7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: primaryNavigation.map(item => {\n                  const isActive = activeStep === item.step;\n                  return /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setActiveStep(item.step),\n                    className: `w-full flex items-center justify-between rounded-xl px-3 py-3 text-sm transition ${isActive ? 'bg-navy text-gold border-r-4 border-gold' : 'bg-transparent text-pearl hover:bg-navy/60'}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"flex items-center gap-3\",\n                      children: [/*#__PURE__*/_jsxDEV(item.icon, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 422,\n                        columnNumber: 27\n                      }, this), item.label]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 421,\n                      columnNumber: 25\n                    }, this), isActive && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-[10px] uppercase tracking-widest text-gold-light\",\n                      children: \"\\u05E4\\u05E2\\u05D9\\u05DC\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 425,\n                      columnNumber: 38\n                    }, this)]\n                  }, item.label, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-6 border-t border-navy space-y-3 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleCreateNewCase(user.username),\n              className: \"w-full rounded-full bg-gold text-navy font-semibold py-2 hover:bg-gold-light transition flex items-center justify-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                className: \"w-4 h-4 rotate-180\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 17\n              }, this), \"\\u05EA\\u05D9\\u05E7 \\u05D7\\u05D3\\u05E9\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleExportCase,\n              className: \"w-full rounded-full border border-gold text-gold py-2 hover:bg-gold/10 transition flex items-center justify-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Download, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 17\n              }, this), \"\\u05E9\\u05DE\\u05D5\\u05E8 \\u05EA\\u05D9\\u05E7\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleImportClick,\n              className: \"w-full rounded-full bg-navy text-pearl py-2 hover:bg-navy/80 transition flex items-center justify-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 17\n              }, this), \"\\u05D8\\u05E2\\u05DF \\u05EA\\u05D9\\u05E7\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              onChange: handleImportFile,\n              className: \"hidden\",\n              accept: \".json\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowAdminDashboard(true),\n              className: \"w-full rounded-full bg-navy text-gold py-2 hover:bg-navy/70 transition flex items-center justify-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(LayoutDashboard, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this), \"\\u05D3\\u05E9\\u05D1\\u05D5\\u05E8\\u05D3 \\u05DE\\u05E9\\u05E8\\u05D3\\u05D9\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          className: \"flex-1 bg-pearl overflow-y-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"md:hidden px-6 py-4 space-y-3 border-b border-pearl\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: primaryNavigation.map(item => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setActiveStep(item.step),\n                className: `rounded-xl border px-3 py-2 flex items-center justify-center gap-2 ${activeStep === item.step ? 'border-gold text-navy bg-white' : 'border-pearl text-slate'}`,\n                children: [/*#__PURE__*/_jsxDEV(item.icon, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 21\n                }, this), item.label]\n              }, item.label, true, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this), caseBanner && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-6xl mx-auto px-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `mt-4 ${caseBanner.type === 'error' ? 'state-block state-block--error' : 'state-block'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"state-block__title text-sm\",\n                children: caseBanner.type === 'error' ? 'ייבוא התיק נכשל' : 'ייבוא התיק הושלם'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"state-block__description\",\n                children: caseBanner.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-6xl mx-auto px-6 py-8 space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(SectionCard, {\n              title: \"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05EA\\u05D9\\u05E7\",\n              subtitle: \"\\u05E9\\u05DC\\u05D9\\u05D8\\u05D4 \\u05DE\\u05DC\\u05D0\\u05D4 \\u05D1\\u05D1\\u05E1\\u05D9\\u05E1 \\u05D4\\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid gap-6 md:grid-cols-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"text-xs font-semibold text-slate\",\n                    children: \"\\u05E9\\u05DD \\u05D4\\u05EA\\u05D9\\u05E7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 498,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"mt-2 w-full rounded-xl border border-pearl bg-pearl/60 px-3 py-2 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\",\n                    value: currentCase.name,\n                    onChange: e => setCurrentCase({\n                      ...currentCase,\n                      name: e.target.value\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-slate flex flex-col gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"\\u05E2\\u05D5\\\"\\u05D3 \\u05D0\\u05D7\\u05E8\\u05D0\\u05D9: \", currentCase.attorney]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 21\n                  }, this), currentCase.attorney !== user.username && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-danger\",\n                    children: [\"\\u05DC\\u05E6\\u05E4\\u05D9\\u05D9\\u05D4 \\u05D1\\u05DC\\u05D1\\u05D3 \\u2013 \\u05D1\\u05D1\\u05E2\\u05DC\\u05D5\\u05EA \", currentCase.attorney]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 508,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-slate\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [saveStatus === 'saving' && 'שומר...', saveStatus === 'saved' && 'נשמר בהצלחה', saveStatus === 'error' && 'שמירה נכשלה', saveStatus === 'idle' && 'מוכן לעריכה']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-wrap gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setActiveStep(prev => Math.max(0, prev - 1)),\n                    disabled: activeStep === 0,\n                    className: \"rounded-full border border-gold px-4 py-2 text-xs font-semibold text-gold hover:bg-gold/10 transition disabled:opacity-40\",\n                    children: \"\\u05D7\\u05D6\\u05E8\\u05D4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 522,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setActiveStep(prev => Math.min(4, prev + 1)),\n                    disabled: activeStep === 4,\n                    className: \"rounded-full bg-gold px-5 py-2 text-xs font-semibold text-navy flex items-center gap-2 hover:bg-gold-light transition disabled:opacity-40\",\n                    children: [activeStep === 0 ? 'התחל עבודה' : 'לשלב הבא', /*#__PURE__*/_jsxDEV(ChevronLeft, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 535,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 529,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this), activeStep === 0 && /*#__PURE__*/_jsxDEV(SectionCard, {\n              title: \"\\u05DC\\u05D5\\u05D7 \\u05D1\\u05E7\\u05E8\\u05D4 \\u05DB\\u05DC\\u05DC\\u05D9\",\n              children: /*#__PURE__*/_jsxDEV(CaseDashboard, {\n                caseData: currentCase,\n                navigateToStep: setActiveStep\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 17\n            }, this), activeStep === 1 && /*#__PURE__*/_jsxDEV(SectionCard, {\n              title: \"\\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E8\\u05E4\\u05D5\\u05D0\\u05D9\\u05BE\\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\",\n              subtitle: \"\\u05E8\\u05E7\\u05E2 \\u05E2\\u05D5\\u05D1\\u05D3\\u05EA\\u05D9 \\u05D5\\u05E2\\u05D9\\u05D1\\u05D5\\u05D3 \\u05D7\\u05D1\\u05D5\\u05EA\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rounded-card border border-pearl bg-pearl/50 p-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center justify-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"text-sm font-semibold text-navy\",\n                        children: \"\\u05E8\\u05E7\\u05E2 \\u05E2\\u05D5\\u05D1\\u05D3\\u05EA\\u05D9 / \\u05E1\\u05D9\\u05DB\\u05D5\\u05DD \\u05EA\\u05D9\\u05E7\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 553,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"file\",\n                          id: \"summary-upload\",\n                          className: \"hidden\",\n                          accept: \".pdf,.doc,.docx,.txt\",\n                          onChange: handleSummaryFileUpload\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 555,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: \"summary-upload\",\n                          className: \"inline-flex cursor-pointer items-center gap-1 rounded-full border border-gold px-3 py-1 text-xs text-gold hover:bg-gold/10 transition\",\n                          children: [/*#__PURE__*/_jsxDEV(UploadCloud, {\n                            className: \"w-3 h-3\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 566,\n                            columnNumber: 31\n                          }, this), \"\\u05E6\\u05E8\\u05E3 \\u05E7\\u05D5\\u05D1\\u05E5\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 562,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 554,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 552,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                      className: \"w-full rounded-2xl border border-pearl bg-white p-4 text-sm text-navy focus:border-gold focus:ring-1 focus:ring-gold outline-none transition h-32\",\n                      placeholder: \"\\u05D4\\u05D6\\u05DF \\u05DB\\u05D0\\u05DF \\u05D0\\u05EA \\u05D4\\u05E2\\u05D5\\u05D1\\u05D3\\u05D5\\u05EA \\u05D4\\u05DE\\u05E2\\u05D5\\u05D1\\u05D3\\u05D5\\u05EA...\",\n                      value: currentCase.summary,\n                      onChange: e => setCurrentCase({\n                        ...currentCase,\n                        summary: e.target.value\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 571,\n                      columnNumber: 25\n                    }, this), currentCase.summaryFiles && currentCase.summaryFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-wrap gap-2\",\n                      children: currentCase.summaryFiles.map((file, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center gap-2 rounded-full border border-pearl bg-white px-3 py-1 text-xs text-slate\",\n                        children: [/*#__PURE__*/_jsxDEV(FileText, {\n                          className: \"w-3 h-3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 584,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"truncate max-w-[140px]\",\n                          children: file.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 585,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => removeSummaryFile(file.name),\n                          className: \"text-danger hover:text-danger/80\",\n                          \"aria-label\": `הסר את הקובץ ${file.name}`,\n                          children: \"\\xD7\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 586,\n                          columnNumber: 33\n                        }, this)]\n                      }, idx, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 580,\n                        columnNumber: 31\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 578,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 550,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rounded-card border border-pearl bg-white p-4\",\n                  children: /*#__PURE__*/_jsxDEV(LiabilityStep, {\n                    caseData: currentCase,\n                    updateCaseData: setCurrentCase\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 600,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 599,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 17\n            }, this), activeStep === 2 && /*#__PURE__*/_jsxDEV(SectionCard, {\n              title: \"\\u05EA\\u05D7\\u05E9\\u05D9\\u05D1\\u05D9 \\u05E0\\u05D6\\u05E7 \\u05DB\\u05E1\\u05E4\\u05D9\\u05D9\\u05DD\",\n              children: /*#__PURE__*/_jsxDEV(DamagesStep, {\n                caseData: currentCase,\n                updateCaseData: setCurrentCase\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 17\n            }, this), activeStep === 3 && /*#__PURE__*/_jsxDEV(SectionCard, {\n              title: \"\\u05E0\\u05D9\\u05DE\\u05D5\\u05E7\\u05D9\\u05DD \\u05DE\\u05E9\\u05E4\\u05D8\\u05D9\\u05D9\\u05DD\",\n              children: /*#__PURE__*/_jsxDEV(ReasoningStep, {\n                caseData: currentCase\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 17\n            }, this), activeStep === 4 && /*#__PURE__*/_jsxDEV(SectionCard, {\n              title: \"\\u05D3\\u05D5\\u05D7 \\u05DE\\u05E1\\u05DB\\u05DD\",\n              children: /*#__PURE__*/_jsxDEV(ReportStep, {\n                caseData: currentCase\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(LegalDisclaimer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 371,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"W2CwIDFVN/vSXm/1x6n6sJp/vgk=\", false, function () {\n  return [useAuth];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useAuth","createCase","apiCreateCase","listCases","apiListCases","updateCase","apiUpdateCase","LoginScreen","AdminDashboard","LiabilityStep","DamagesStep","ReasoningStep","ReportStep","CaseDashboard","FolderOpen","ChevronLeft","Shield","Activity","UploadCloud","FileText","LayoutDashboard","BookOpen","Download","Upload","Bell","UserCircle","ContextRibbon","LegalDisclaimer","jsxDEV","_jsxDEV","createEmptyCase","attorney","id","Date","now","toString","name","toLocaleDateString","lastUpdated","toISOString","summary","summaryFiles","liability","issues","medicalRecordQuality","doctrines","precedents","expertsPlaintiff","expertsDefense","expertCourtOpinions","expertCourtStance","aggravatingFactors","mitigatingFactors","probability","probabilityRange","uncertainty","strengthsPlaintiff","weaknessesPlaintiff","strengthsDefense","weaknessesDefense","damages","dateOfBirth","gender","dateOfEvent","setFullYear","getFullYear","split","dateOfCalc","dateOfRetirement","ageAtInjury","currentAge","lifeExpectancy","wagePreInjury","wagePostInjury","permanentDisabilityMedical","permanentDisabilityFunctional","daysOfHospitalization","interestRate","heads","isActive","parameters","calculatedAmount","notes","App","_s","_currentCaseRecord$is","user","logout","activeStep","setActiveStep","showAdminDashboard","setShowAdminDashboard","caseList","setCaseList","currentCaseId","setCurrentCaseId","currentCase","setCurrentCase","saveStatus","setSaveStatus","isLoadingCases","setIsLoadingCases","loadError","setLoadError","caseBanner","setCaseBanner","fileInputRef","saveTimeoutRef","resetStatusTimeoutRef","hydratingRef","isAdmin","role","cleanupClientState","current","clearTimeout","normalizeCaseData","record","attorneyFallback","safeData","data","title","handleCreateNewCase","attorneyName","template","created","prev","normalized","error","console","cancelled","bootstrap","ownCases","length","username","sorted","sort","a","b","updatedAt","getTime","primary","handleLogout","handleAdminEditCase","caseData","setTimeout","updated","filtered","filter","c","handleSummaryFileUpload","e","target","files","file","newFile","size","type","lastModified","removeSummaryFile","fileName","f","handleExportCase","dataStr","JSON","stringify","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","replace","body","appendChild","click","removeChild","handleImportClick","_fileInputRef$current","handleImportFile","_e$target$files","reader","FileReader","onload","event","_event$target","json","parse","result","message","err","readAsText","value","SectionCard","subtitle","children","className","_jsxFileName","lineNumber","columnNumber","primaryNavigation","label","icon","step","currentCaseRecord","find","isCaseReadOnly","isOwner","currentUserName","onEditCase","onLogout","dir","onClick","mode","caseName","status","isReadOnly","onBack","window","history","back","map","item","ref","onChange","accept","Math","max","disabled","min","navigateToStep","htmlFor","placeholder","idx","updateCaseData","_c","$RefreshReg$"],"sources":["C:/Office-Apps/LexMedical-App/src/App.tsx"],"sourcesContent":["import React, { ReactNode, useState, useEffect, useRef, useCallback } from 'react';\nimport { CaseData, AttachedFile, CaseRecord } from './types';\nimport { useAuth } from './context/AuthContext';\nimport {\n  createCase as apiCreateCase,\n  listCases as apiListCases,\n  updateCase as apiUpdateCase,\n} from './services/api';\nimport LoginScreen from './components/LoginScreen';\nimport AdminDashboard from './components/AdminDashboard';\nimport LiabilityStep from './components/LiabilityStep';\nimport DamagesStep from './components/DamagesStep';\nimport ReasoningStep from './components/ReasoningStep';\nimport ReportStep from './components/ReportStep';\nimport CaseDashboard from './components/CaseDashboard';\nimport {\n  FolderOpen,\n  ChevronLeft,\n  Shield,\n  Activity,\n  UploadCloud,\n  FileText,\n  LayoutDashboard,\n  BookOpen,\n  Download,\n  Upload,\n  Bell,\n  UserCircle,\n} from 'lucide-react';\nimport ContextRibbon from './components/ContextRibbon';\nimport LegalDisclaimer from './components/LegalDisclaimer';\n\nconst createEmptyCase = (attorney: string): CaseData => ({\n  id: Date.now().toString(),\n  name: 'תיק חדש ' + new Date().toLocaleDateString('he-IL'),\n  attorney,\n  lastUpdated: new Date().toISOString(),\n  summary: '',\n  summaryFiles: [],\n  liability: {\n    issues: [],\n    medicalRecordQuality: 'Complete',\n    doctrines: [],\n    precedents: [],\n    expertsPlaintiff: [],\n    expertsDefense: [],\n    expertCourtOpinions: [], \n    expertCourtStance: 'None', \n    aggravatingFactors: 2,\n    mitigatingFactors: 2,\n    probability: 50,\n    probabilityRange: [40, 60],\n    uncertainty: 'Medium',\n    strengthsPlaintiff: [''],\n    weaknessesPlaintiff: [''],\n    strengthsDefense: [''],\n    weaknessesDefense: ['']\n  },\n  damages: {\n    dateOfBirth: '1990-01-01', \n    gender: 'Male',\n    dateOfEvent: new Date(new Date().setFullYear(new Date().getFullYear() - 2)).toISOString().split('T')[0], \n    dateOfCalc: new Date().toISOString().split('T')[0],\n    dateOfRetirement: '',\n    ageAtInjury: 0, \n    currentAge: 0, \n    lifeExpectancy: 82, \n    wagePreInjury: 10000,\n    wagePostInjury: 0,\n    permanentDisabilityMedical: 10,\n    permanentDisabilityFunctional: 10,\n    daysOfHospitalization: 0,\n    interestRate: 3,\n    heads: [\n      { id: '1', name: 'הפסד שכר לעבר', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '2', name: 'הפסד שכר לעתיד', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '3', name: 'הפסד פנסיה ותנאים סוציאליים', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '4', name: 'כאב וסבל', isActive: true, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '5', name: 'עזרת צד ג׳ לעבר', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '6', name: 'עזרת צד ג׳ לעתיד', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '7', name: 'הוצאות רפואיות', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n      { id: '8', name: 'ניידות ונסיעות', isActive: false, parameters: {}, calculatedAmount: 0, notes: '' },\n    ],\n    precedents: []\n  }\n});\n\nconst App: React.FC = () => {\n  const { user, logout } = useAuth();\n  const [activeStep, setActiveStep] = useState<number>(0);\n  const [showAdminDashboard, setShowAdminDashboard] = useState(false);\n  const [caseList, setCaseList] = useState<CaseRecord[]>([]);\n  const [currentCaseId, setCurrentCaseId] = useState<string | null>(null);\n  const [currentCase, setCurrentCase] = useState<CaseData | null>(null);\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'saved' | 'error'>('idle');\n  const [isLoadingCases, setIsLoadingCases] = useState(false);\n  const [loadError, setLoadError] = useState<string | null>(null);\n  const [caseBanner, setCaseBanner] = useState<{ type: 'success' | 'error'; message: string } | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const saveTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const resetStatusTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const hydratingRef = useRef(false);\n\n  const isAdmin = user?.role === 'admin';\n\n  const cleanupClientState = () => {\n    setCaseList([]);\n    setCurrentCaseId(null);\n    setCurrentCase(null);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n    setSaveStatus('idle');\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n      saveTimeoutRef.current = null;\n    }\n    if (resetStatusTimeoutRef.current) {\n      clearTimeout(resetStatusTimeoutRef.current);\n      resetStatusTimeoutRef.current = null;\n    }\n  };\n\n  const normalizeCaseData = (record: CaseRecord, attorneyFallback: string): CaseData => {\n    const safeData = (record.data as CaseData) || createEmptyCase(attorneyFallback);\n    return {\n      ...createEmptyCase(attorneyFallback),\n      ...safeData,\n      id: record.id,\n      name: safeData.name || record.title || `תיק ${new Date().toLocaleDateString('he-IL')}`,\n      attorney: safeData.attorney || attorneyFallback,\n    };\n  };\n\n  const handleCreateNewCase = useCallback(async (attorneyName: string) => {\n    if (!user) return;\n    setIsLoadingCases(true);\n    setLoadError(null);\n    try {\n      const template = createEmptyCase(attorneyName);\n      const created = await apiCreateCase({ title: template.name, data: template });\n      setCaseList((prev) => [created, ...prev]);\n      const normalized = { ...template, id: created.id };\n      setCurrentCaseId(created.id);\n      hydratingRef.current = true;\n      setCurrentCase(normalized);\n      setActiveStep(0);\n    } catch (error) {\n      console.error(error);\n      setLoadError('יצירת תיק חדש נכשלה.');\n    } finally {\n      setIsLoadingCases(false);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    let cancelled = false;\n    const bootstrap = async () => {\n      if (!user) {\n        cleanupClientState();\n        return;\n      }\n      setIsLoadingCases(true);\n      setLoadError(null);\n      try {\n        const { ownCases } = await apiListCases();\n        if (cancelled) return;\n        setCaseList(ownCases);\n        setShowAdminDashboard(isAdmin);\n        if (!ownCases.length) {\n          await handleCreateNewCase(user.username);\n          return;\n        }\n        const sorted = [...ownCases].sort(\n          (a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime(),\n        );\n        const primary = sorted[0];\n        setCurrentCaseId(primary.id);\n        hydratingRef.current = true;\n        setCurrentCase(normalizeCaseData(primary, user.username));\n        setActiveStep(0);\n      } catch (error) {\n        console.error(error);\n        if (!cancelled) {\n          setLoadError('טעינת התיקים נכשלה. נסה שוב בעוד רגע.');\n        }\n      } finally {\n        if (!cancelled) {\n          setIsLoadingCases(false);\n        }\n      }\n    };\n\n    bootstrap();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [user, isAdmin, handleCreateNewCase]);\n\n  const handleLogout = () => {\n    logout();\n    cleanupClientState();\n  };\n\n  const handleAdminEditCase = (caseData: CaseData) => {\n    setCurrentCaseId(caseData.id);\n    hydratingRef.current = true;\n    setCurrentCase(caseData);\n    setShowAdminDashboard(false);\n    setActiveStep(0);\n  };\n\n  useEffect(() => {\n    if (!user || !currentCaseId || !currentCase || showAdminDashboard) return;\n    if (hydratingRef.current) {\n      hydratingRef.current = false;\n      return;\n    }\n    if (saveTimeoutRef.current) {\n      clearTimeout(saveTimeoutRef.current);\n    }\n    setSaveStatus('saving');\n    saveTimeoutRef.current = setTimeout(async () => {\n      try {\n        const updated = await apiUpdateCase(currentCaseId, {\n          title: currentCase.name,\n          data: currentCase,\n        });\n        setCaseList((prev) => {\n          const filtered = prev.filter((c) => c.id !== updated.id);\n          return [updated, ...filtered];\n        });\n        setSaveStatus('saved');\n        if (resetStatusTimeoutRef.current) {\n          clearTimeout(resetStatusTimeoutRef.current);\n        }\n        resetStatusTimeoutRef.current = setTimeout(() => setSaveStatus('idle'), 1500);\n      } catch (error) {\n        console.error(error);\n        setSaveStatus('error');\n      }\n    }, 1200);\n\n    return () => {\n      if (saveTimeoutRef.current) {\n        clearTimeout(saveTimeoutRef.current);\n        saveTimeoutRef.current = null;\n      }\n    };\n  }, [currentCase, currentCaseId, user, showAdminDashboard]);\n\n  const handleSummaryFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0] && currentCase) {\n      const file = e.target.files[0];\n      const newFile: AttachedFile = {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        lastModified: file.lastModified\n      };\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: [...(currentCase.summaryFiles || []), newFile]\n      });\n    }\n  };\n\n  const removeSummaryFile = (fileName: string) => {\n    if (currentCase) {\n      setCurrentCase({\n        ...currentCase,\n        summaryFiles: currentCase.summaryFiles.filter((f: AttachedFile) => f.name !== fileName)\n      });\n    }\n  };\n\n  const handleExportCase = () => {\n    if (!currentCase) return;\n    const dataStr = JSON.stringify(currentCase, null, 2);\n    const blob = new Blob([dataStr], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `lexmedical_${currentCase.name.replace(/\\s+/g, '_')}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleImportClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleImportFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try {\n        const json = JSON.parse(event.target?.result as string);\n        if (json.id && json.liability && json.damages) {\n          hydratingRef.current = true;\n          setCurrentCase(json);\n          setCaseBanner({ type: 'success', message: 'התיק נטען בהצלחה. השינויים יישמרו אוטומטית.' });\n          setActiveStep(0);\n        } else {\n          setCaseBanner({ type: 'error', message: 'קובץ לא תקין. אנא השתמש בקובץ שהופק מהמערכת.' });\n        }\n      } catch (err) {\n        setCaseBanner({ type: 'error', message: 'שגיאה בטעינת הקובץ. נסה שוב או פנה לתמיכה.' });\n      }\n    };\n    reader.readAsText(file);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n\n  const SectionCard: React.FC<{ title: string; subtitle?: string; children: ReactNode }> = ({\n    title,\n    subtitle,\n    children,\n  }) => (\n    <section className=\"rounded-card border border-pearl bg-white shadow-card-xl\">\n      <div className=\"h-1.5 w-full rounded-t-card bg-navy\" />\n      <div className=\"p-6\">\n        <div className=\"flex items-center justify-between text-navy\">\n          <h2 className=\"text-lg font-semibold\">{title}</h2>\n          {subtitle && <span className=\"text-xs text-slate\">{subtitle}</span>}\n        </div>\n        <div className=\"mt-2 w-12 border-b-2 border-gold rounded-full\" />\n        <div className=\"mt-6 text-slate\">{children}</div>\n      </div>\n    </section>\n  );\n\n  const primaryNavigation = [\n    { label: 'התיקים שלי', icon: FolderOpen, step: 0 },\n    { label: 'ניתוח רפואי', icon: Shield, step: 1 },\n    { label: 'תחשיבי נזק', icon: Activity, step: 2 },\n    { label: 'נימוקים משפטיים', icon: BookOpen, step: 3 },\n    { label: 'דוח מסכם', icon: FileText, step: 4 },\n  ];\n\n  const currentCaseRecord = caseList.find((record) => record.id === currentCaseId);\n  const isCaseReadOnly = currentCaseRecord ? !(currentCaseRecord.isOwner ?? true) : false;\n\n  if (!user) {\n    return <LoginScreen />;\n  }\n\n  if (showAdminDashboard) {\n    return (\n      <AdminDashboard\n        currentUserName={user.username}\n        onEditCase={handleAdminEditCase}\n        onLogout={handleLogout}\n      />\n    );\n  }\n\n  if (isLoadingCases || !currentCase) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-pearl text-slate\" dir=\"rtl\">\n        <div className=\"rounded-card border border-pearl bg-white px-6 py-4 shadow-card-xl text-sm\">\n          {loadError || 'טוען תיקים מהשרת...'}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pearl text-navy\" dir=\"rtl\">\n      <div className=\"flex flex-col min-h-screen\">\n        <header className=\"h-16 bg-navy text-gold flex items-center justify-between px-6 shadow-lg\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-xl font-semibold brand-mark\">LexMedical</span>\n            <span className=\"text-xs text-gold-light hidden md:inline\">מערכת משפטית־רפואית פנימית</span>\n          </div>\n          <div className=\"flex items-center gap-6 text-sm\">\n            <button className=\"relative text-gold-light hover:text-gold transition\" aria-label=\"התראות מערכת\">\n              <Bell className=\"w-5 h-5\" />\n            </button>\n            <div className=\"flex items-center gap-2 text-pearl\">\n              <UserCircle className=\"w-6 h-6 text-gold-light\" />\n              <span>{user.username}</span>\n            </div>\n            <button onClick={handleLogout} className=\"text-gold hover:text-gold-light transition\">\n              התנתק\n            </button>\n          </div>\n        </header>\n\n        <ContextRibbon\n          mode={isCaseReadOnly ? 'מצב קריאה בלבד' : 'מצב עריכת תיק פעיל'}\n          caseName={currentCase?.name}\n          status={currentCaseRecord?.status}\n          isReadOnly={isCaseReadOnly}\n          onBack={isAdmin ? () => setShowAdminDashboard(true) : () => window.history.back()}\n        />\n        <div className=\"flex flex-1\">\n          <aside className=\"hidden md:flex w-72 bg-navy-dark text-pearl flex-col border-l border-navy\">\n            <div className=\"px-6 py-6 border-b border-navy\">\n              <p className=\"text-xs uppercase tracking-widest text-slate-light\">ניווט</p>\n              <p className=\"text-2xl font-semibold text-white mt-2\">שליטה מלאה בתיק</p>\n            </div>\n            <nav className=\"flex-1 overflow-y-auto px-4 py-6 space-y-8\">\n              <div>\n                <p className=\"text-xs uppercase text-slate-light mb-3\">ניהול תיק</p>\n                <div className=\"space-y-2\">\n                  {primaryNavigation.map((item) => {\n                    const isActive = activeStep === item.step;\n                    return (\n                      <button\n                        key={item.label}\n                        onClick={() => setActiveStep(item.step)}\n                        className={`w-full flex items-center justify-between rounded-xl px-3 py-3 text-sm transition ${\n                          isActive\n                            ? 'bg-navy text-gold border-r-4 border-gold'\n                            : 'bg-transparent text-pearl hover:bg-navy/60'\n                        }`}\n                      >\n                        <span className=\"flex items-center gap-3\">\n                          <item.icon className=\"w-4 h-4\" />\n                          {item.label}\n                        </span>\n                        {isActive && <span className=\"text-[10px] uppercase tracking-widest text-gold-light\">פעיל</span>}\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n            </nav>\n            <div className=\"px-4 py-6 border-t border-navy space-y-3 text-sm\">\n              <button\n                onClick={() => handleCreateNewCase(user.username)}\n                className=\"w-full rounded-full bg-gold text-navy font-semibold py-2 hover:bg-gold-light transition flex items-center justify-center gap-2\"\n              >\n                <Upload className=\"w-4 h-4 rotate-180\" />\n                תיק חדש\n              </button>\n              <button\n                onClick={handleExportCase}\n                className=\"w-full rounded-full border border-gold text-gold py-2 hover:bg-gold/10 transition flex items-center justify-center gap-2\"\n              >\n                <Download className=\"w-4 h-4\" />\n                שמור תיק\n              </button>\n              <button\n                onClick={handleImportClick}\n                className=\"w-full rounded-full bg-navy text-pearl py-2 hover:bg-navy/80 transition flex items-center justify-center gap-2\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                טען תיק\n              </button>\n              <input type=\"file\" ref={fileInputRef} onChange={handleImportFile} className=\"hidden\" accept=\".json\" />\n              {isAdmin && (\n                <button\n                  onClick={() => setShowAdminDashboard(true)}\n                  className=\"w-full rounded-full bg-navy text-gold py-2 hover:bg-navy/70 transition flex items-center justify-center gap-2\"\n                >\n                  <LayoutDashboard className=\"w-4 h-4\" />\n                  דשבורד משרדי\n                </button>\n              )}\n            </div>\n          </aside>\n\n          <main className=\"flex-1 bg-pearl overflow-y-auto\">\n            <div className=\"md:hidden px-6 py-4 space-y-3 border-b border-pearl\">\n              <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                {primaryNavigation.map((item) => (\n                  <button\n                    key={item.label}\n                    onClick={() => setActiveStep(item.step)}\n                    className={`rounded-xl border px-3 py-2 flex items-center justify-center gap-2 ${\n                      activeStep === item.step ? 'border-gold text-navy bg-white' : 'border-pearl text-slate'\n                    }`}\n                  >\n                    <item.icon className=\"w-4 h-4\" />\n                    {item.label}\n                  </button>\n                ))}\n              </div>\n            </div>\n            {caseBanner && (\n              <div className=\"max-w-6xl mx-auto px-6\">\n                <div className={`mt-4 ${caseBanner.type === 'error' ? 'state-block state-block--error' : 'state-block'}`}>\n                  <p className=\"state-block__title text-sm\">\n                    {caseBanner.type === 'error' ? 'ייבוא התיק נכשל' : 'ייבוא התיק הושלם'}\n                  </p>\n                  <p className=\"state-block__description\">{caseBanner.message}</p>\n                </div>\n              </div>\n            )}\n            <div className=\"max-w-6xl mx-auto px-6 py-8 space-y-6\">\n              <SectionCard title=\"פרטי תיק\" subtitle=\"שליטה מלאה בבסיס הנתונים\">\n                <div className=\"grid gap-6 md:grid-cols-2\">\n                  <div>\n                    <label className=\"text-xs font-semibold text-slate\">שם התיק</label>\n                    <input\n                      className=\"mt-2 w-full rounded-xl border border-pearl bg-pearl/60 px-3 py-2 text-sm focus:border-gold focus:ring-1 focus:ring-gold outline-none transition\"\n                      value={currentCase.name}\n                      onChange={(e) => setCurrentCase({ ...currentCase, name: e.target.value })}\n                    />\n                  </div>\n                  <div className=\"text-sm text-slate flex flex-col gap-2\">\n                    <span>עו\"ד אחראי: {currentCase.attorney}</span>\n                    {currentCase.attorney !== user.username && (\n                      <span className=\"text-xs text-danger\">\n                        לצפייה בלבד – בבעלות {currentCase.attorney}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <div className=\"mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-slate\">\n                  <span>\n                    {saveStatus === 'saving' && 'שומר...'}\n                    {saveStatus === 'saved' && 'נשמר בהצלחה'}\n                    {saveStatus === 'error' && 'שמירה נכשלה'}\n                    {saveStatus === 'idle' && 'מוכן לעריכה'}\n                  </span>\n                  <div className=\"flex flex-wrap gap-3\">\n                    <button\n                      onClick={() => setActiveStep((prev) => Math.max(0, prev - 1))}\n                      disabled={activeStep === 0}\n                      className=\"rounded-full border border-gold px-4 py-2 text-xs font-semibold text-gold hover:bg-gold/10 transition disabled:opacity-40\"\n                    >\n                      חזרה\n                    </button>\n                    <button\n                      onClick={() => setActiveStep((prev) => Math.min(4, prev + 1))}\n                      disabled={activeStep === 4}\n                      className=\"rounded-full bg-gold px-5 py-2 text-xs font-semibold text-navy flex items-center gap-2 hover:bg-gold-light transition disabled:opacity-40\"\n                    >\n                      {activeStep === 0 ? 'התחל עבודה' : 'לשלב הבא'}\n                      <ChevronLeft className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              </SectionCard>\n\n              {activeStep === 0 && (\n                <SectionCard title=\"לוח בקרה כללי\">\n                  <CaseDashboard caseData={currentCase} navigateToStep={setActiveStep} />\n                </SectionCard>\n              )}\n\n              {activeStep === 1 && (\n                <SectionCard title=\"ניתוח רפואי־משפטי\" subtitle=\"רקע עובדתי ועיבוד חבות\">\n                  <div className=\"space-y-6\">\n                    <div className=\"rounded-card border border-pearl bg-pearl/50 p-4\">\n                      <div className=\"flex flex-col gap-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <label className=\"text-sm font-semibold text-navy\">רקע עובדתי / סיכום תיק</label>\n                          <div>\n                            <input\n                              type=\"file\"\n                              id=\"summary-upload\"\n                              className=\"hidden\"\n                              accept=\".pdf,.doc,.docx,.txt\"\n                              onChange={handleSummaryFileUpload}\n                            />\n                            <label\n                              htmlFor=\"summary-upload\"\n                              className=\"inline-flex cursor-pointer items-center gap-1 rounded-full border border-gold px-3 py-1 text-xs text-gold hover:bg-gold/10 transition\"\n                            >\n                              <UploadCloud className=\"w-3 h-3\" />\n                              צרף קובץ\n                            </label>\n                          </div>\n                        </div>\n                        <textarea\n                          className=\"w-full rounded-2xl border border-pearl bg-white p-4 text-sm text-navy focus:border-gold focus:ring-1 focus:ring-gold outline-none transition h-32\"\n                          placeholder=\"הזן כאן את העובדות המעובדות...\"\n                          value={currentCase.summary}\n                          onChange={(e) => setCurrentCase({ ...currentCase, summary: e.target.value })}\n                        />\n                        {currentCase.summaryFiles && currentCase.summaryFiles.length > 0 && (\n                          <div className=\"flex flex-wrap gap-2\">\n                            {currentCase.summaryFiles.map((file: AttachedFile, idx: number) => (\n                              <div\n                                key={idx}\n                                className=\"flex items-center gap-2 rounded-full border border-pearl bg-white px-3 py-1 text-xs text-slate\"\n                              >\n                                <FileText className=\"w-3 h-3\" />\n                                <span className=\"truncate max-w-[140px]\">{file.name}</span>\n                                <button\n                                  onClick={() => removeSummaryFile(file.name)}\n                                  className=\"text-danger hover:text-danger/80\"\n                                  aria-label={`הסר את הקובץ ${file.name}`}\n                                >\n                                  ×\n                                </button>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"rounded-card border border-pearl bg-white p-4\">\n                      <LiabilityStep caseData={currentCase} updateCaseData={setCurrentCase} />\n                    </div>\n                  </div>\n                </SectionCard>\n              )}\n\n              {activeStep === 2 && (\n                <SectionCard title=\"תחשיבי נזק כספיים\">\n                  <DamagesStep caseData={currentCase} updateCaseData={setCurrentCase} />\n                </SectionCard>\n              )}\n\n              {activeStep === 3 && (\n                <SectionCard title=\"נימוקים משפטיים\">\n                  <ReasoningStep caseData={currentCase} />\n                </SectionCard>\n              )}\n\n              {activeStep === 4 && (\n                <SectionCard title=\"דוח מסכם\">\n                  <ReportStep caseData={currentCase} />\n                </SectionCard>\n              )}\n            </div>\n            <LegalDisclaimer />\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}