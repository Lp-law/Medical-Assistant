{"ast":null,"code":"import{apiRequest,authFetch}from'./api';export const searchDocuments=async function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const query=new URLSearchParams();if(params.q)query.set('q',params.q);if(params.categoryId)query.set('categoryId',params.categoryId);if(params.categoryName)query.set('categoryName',params.categoryName);if(params.source)query.set('source',params.source);if(params.from)query.set('from',params.from);if(params.to)query.set('to',params.to);if(typeof params.limit==='number')query.set('limit',String(params.limit));if(typeof params.offset==='number')query.set('offset',String(params.offset));const path=\"/documents/search?\".concat(query.toString());return await apiRequest(path,{method:'GET'});};export const uploadDocument=async input=>{const formData=new FormData();formData.append('title',input.title);if(input.categoryId)formData.append('categoryId',input.categoryId);if(input.categoryName)formData.append('categoryName',input.categoryName);if(input.summary)formData.append('summary',input.summary);formData.append('file',input.file);const response=await authFetch('/documents/upload',{method:'POST',body:formData});if(!response.ok){const text=await response.text().catch(()=>'');throw new Error(text||'upload_failed');}const payload=await response.json();return payload.document;};export const listCategories=async()=>{var _payload$categories;const payload=await apiRequest('/categories',{method:'GET'});return(_payload$categories=payload.categories)!==null&&_payload$categories!==void 0?_payload$categories:[];};export const createCategory=async name=>{const payload=await apiRequest('/categories',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name})});return payload.category;};export const updateDocumentTags=async(id,input)=>{const payload=await apiRequest(\"/documents/\".concat(encodeURIComponent(id),\"/tags\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(input)});return payload.document;};","map":{"version":3,"names":["apiRequest","authFetch","searchDocuments","params","arguments","length","undefined","query","URLSearchParams","q","set","categoryId","categoryName","source","from","to","limit","String","offset","path","concat","toString","method","uploadDocument","input","formData","FormData","append","title","summary","file","response","body","ok","text","catch","Error","payload","json","document","listCategories","_payload$categories","categories","createCategory","name","headers","JSON","stringify","category","updateDocumentTags","id","encodeURIComponent"],"sources":["C:/Office-Apps/LexMedical-App/src/services/documentsApi.ts"],"sourcesContent":["import { apiRequest, authFetch } from './api';\r\nimport { CategoryRecord, DocumentRecord, DocumentSourceKey } from '../types';\r\n\r\nexport interface SearchDocumentsParams {\r\n  q?: string;\r\n  categoryId?: string;\r\n  categoryName?: string;\r\n  source?: DocumentSourceKey;\r\n  from?: string; // ISO\r\n  to?: string; // ISO\r\n  limit?: number;\r\n  offset?: number;\r\n}\r\n\r\nexport interface SearchDocumentsResponse {\r\n  documents: DocumentRecord[];\r\n  pagination: { limit: number; offset: number; total: number };\r\n}\r\n\r\nexport const searchDocuments = async (params: SearchDocumentsParams = {}): Promise<SearchDocumentsResponse> => {\r\n  const query = new URLSearchParams();\r\n  if (params.q) query.set('q', params.q);\r\n  if (params.categoryId) query.set('categoryId', params.categoryId);\r\n  if (params.categoryName) query.set('categoryName', params.categoryName);\r\n  if (params.source) query.set('source', params.source);\r\n  if (params.from) query.set('from', params.from);\r\n  if (params.to) query.set('to', params.to);\r\n  if (typeof params.limit === 'number') query.set('limit', String(params.limit));\r\n  if (typeof params.offset === 'number') query.set('offset', String(params.offset));\r\n\r\n  const path = `/documents/search?${query.toString()}`;\r\n  return await apiRequest<SearchDocumentsResponse>(path, { method: 'GET' });\r\n};\r\n\r\nexport interface UploadDocumentInput {\r\n  title: string;\r\n  categoryId?: string;\r\n  categoryName?: string;\r\n  summary?: string;\r\n  file: File;\r\n}\r\n\r\nexport const uploadDocument = async (input: UploadDocumentInput): Promise<DocumentRecord> => {\r\n  const formData = new FormData();\r\n  formData.append('title', input.title);\r\n  if (input.categoryId) formData.append('categoryId', input.categoryId);\r\n  if (input.categoryName) formData.append('categoryName', input.categoryName);\r\n  if (input.summary) formData.append('summary', input.summary);\r\n  formData.append('file', input.file);\r\n\r\n  const response = await authFetch('/documents/upload', { method: 'POST', body: formData });\r\n  if (!response.ok) {\r\n    const text = await response.text().catch(() => '');\r\n    throw new Error(text || 'upload_failed');\r\n  }\r\n  const payload = (await response.json()) as { document: DocumentRecord };\r\n  return payload.document;\r\n};\r\n\r\nexport const listCategories = async (): Promise<CategoryRecord[]> => {\r\n  const payload = await apiRequest<{ categories: CategoryRecord[] }>('/categories', { method: 'GET' });\r\n  return payload.categories ?? [];\r\n};\r\n\r\nexport const createCategory = async (name: string): Promise<CategoryRecord> => {\r\n  const payload = await apiRequest<{ category: CategoryRecord }>('/categories', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ name }),\r\n  });\r\n  return payload.category;\r\n};\r\n\r\nexport const updateDocumentTags = async (\r\n  id: string,\r\n  input: { topics: string[]; keywords: string[] },\r\n): Promise<DocumentRecord> => {\r\n  const payload = await apiRequest<{ document: DocumentRecord }>(`/documents/${encodeURIComponent(id)}/tags`, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(input),\r\n  });\r\n  return payload.document;\r\n};\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}